#########################
# Costa Rican Decisions #
#########################
# By Jeankedezeehond	#
#########################

COS_ZKG_decisions = {

	COS_Combat_Social_Inequality = {
		icon = GFX_decision_generic_independence
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = ZKG_GONE
			}
		}

		cost = 50

		fire_only_once = no

		days_re_enable = 365

		ai_will_do = {
			base = 0
			modifier = {
				add = 20
				has_stability < 0.3
			}
			modifier = {
				factor = 5
				has_political_power > 100
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Combat_Social_Inequality"
			add_stability = 0.03
		}
	}

	COS_German_Cultural_Program = {
		icon = GFX_decision_hol_exchange_intelligence_data
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = ZKG_GONE
				has_war = yes
			}
		}

		ai_hint_pp_cost = 35
		custom_cost_trigger = {
			has_political_power > 34.99
			authoritarian_democrat < 0.98
		}
		custom_cost_text = ZKG_3_CUPS_COST

		fire_only_once = yes

		ai_will_do = {
			base = 0
			modifier = {
				add = 20
				authoritarian_democrat < 0.20
			}
			modifier = {
				factor = 5
				has_political_power > 50
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_German_Cultural_Program"
			add_stability = 0.05
			custom_effect_tooltip = COS_ZKG_plus_3
			hidden_effect = {
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = 0.03
				}
				add_political_power = -35
			}
		}
	}

	COS_Extend_Loan_decision = {
		icon = GFX_decision_ger_mefo_bills
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = ZKG_GONE
			}
			has_completed_focus = COS_German_Crisis_Response
		}

		custom_cost_trigger = {
		}
		custom_cost_text = ZKG_3_CUPS

		fire_only_once = no

		days_re_enable = 365

		ai_will_do = {
			base = 0
			modifier = {
				factor = 0
				authoritarian_democrat > 0.25
			}
			modifier = {
				add = 100
				has_political_power < 0
			}
			modifier = {
				add = 100
				authoritarian_democrat < 0.10
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Extend_Loan_decision"
			custom_effect_tooltip = COS_ZKG_plus_3
			hidden_effect = {
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = 0.03
				}
			}
			add_political_power = 20
		}
	}

	COS_Sell_Government_Land_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = ZKG_GONE
			}
			has_completed_focus = COS_Cash_Crops
		}

		custom_cost_trigger = {
		}
		custom_cost_text = ZKG_8_CUPS

		fire_only_once = no

		days_re_enable = 100

		ai_will_do = {
			base = 0
			modifier = {
				factor = 0
				authoritarian_democrat > 0.25
			}
			modifier = {
				add = 100
				has_political_power < 0
			}
			modifier = {
				add = 100
				authoritarian_democrat < 0.10
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Sell_Government_Land_decision"
			custom_effect_tooltip = COS_ZKG_plus_8
			hidden_effect = {
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = 0.08
				}
			}
			add_political_power = 50
		}
	}

	COS_Land_Survey = {
		icon = GFX_decision_hol_draw_up_staff_plans

		allowed = {
			original_tag = COS
		}

		available = {
			authoritarian_democrat > 0.11
			controls_state = 316
		}

		visible = {
			has_country_flag = ZKG_SURVEY
		}

		fire_only_once = yes

		cost = 0
		days_remove = 90

		ai_will_do = { factor = 200 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Land_Survey"
			custom_effect_tooltip = COTO_EXPANSION
			set_country_flag = ZKG_SURVEY2
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Land_Survey"
			custom_effect_tooltip = COS_ZKG_minus_3
			hidden_effect = {
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = -0.03
				}
			}
		}
	}

	COS_Extend_Connections = {
		icon = GFX_decision_railroad

		allowed = {
			original_tag = COS
		}

		available = {
			authoritarian_democrat > 0.14
			controls_state = 316
		}

		visible = {
			has_country_flag = ZKG_SURVEY2
		}

		fire_only_once = yes

		cost = 0
		days_remove = 180

		ai_will_do = { factor = 200 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Extend_Connections"
			316 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_country_flag = ZKG_SURVEY3
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Extend_Connections"
			custom_effect_tooltip = COS_ZKG_minus_3
			hidden_effect = {
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = -0.03
				}
			}
		}
	}

	COS_Hire_Foreign_Engineers = {
		icon = GFX_decision_generic_operation

		allowed = {
			original_tag = COS
		}

		available = {
			authoritarian_democrat > 0.17
		}

		visible = {
			has_country_flag = ZKG_SURVEY3
		}

		fire_only_once = yes

		cost = 0

		ai_will_do = { factor = 200 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Hire_Foreign_Engineers"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Hire_Foreign_Engineers"
			custom_effect_tooltip = COS_ZKG_minus_3
			hidden_effect = {
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = -0.03
				}
			}
			add_tech_bonus = {
				name = COS_Hire_Foreign_Engineers
				bonus = 1
				uses = 1
				category = excavation_tech
			}
			set_country_flag = ZKG_SURVEY4
		}
	}

	COS_Plantation_Expansion = {
		icon = generic_construction

		allowed = {
			original_tag = COS
		}

		available = {
			authoritarian_democrat > 0.20
			controls_state = 316
		}

		visible = {
			has_country_flag = ZKG_SURVEY4
		}

		fire_only_once = yes

		cost = 0
		days_remove = 180

		ai_will_do = { factor = 200 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Plantation_Expansion"
			316 = {
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Plantation_Expansion"
			custom_effect_tooltip = COS_ZKG_plus_3
			hidden_effect = {
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = 0.03
				}
			}
		}
	}
}

COS_UFC_decisions = {

	COS_Sell_Government_Land_UFC_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
			}
		}

		custom_cost_trigger = {
		}
		custom_cost_text = UFC_8_BANANAS

		fire_only_once = no

		days_re_enable = 100

		ai_will_do = {
			base = 0
			modifier = {
				factor = 0
				market_liberal > 0.25
			}
			modifier = {
				add = 100
				has_political_power < 0
			}
			modifier = {
				add = 100
				market_liberal < 0.10
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Sell_Government_Land_UFC_decision"
			custom_effect_tooltip = COS_UFC_plus_8
			hidden_effect = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.08
				}
			}
			add_political_power = 50
		}
	}

	COS_Build_New_Telephone_Lines = {
		icon = GFX_decision_radar
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
			}
			market_liberal > 0.15
		}

		custom_cost_trigger = {
		}
		custom_cost_text = UFC_8_BANANAS

		fire_only_once = yes

		days_remove = 180

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				market_liberal > 0.25
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Build_New_Telephone_Lines"
			custom_effect_tooltip = COS_UFC_plus_8
			hidden_effect = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.08
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Build_New_Telephone_Lines"
			316 = {
				add_building_construction = {
					type = radar_station
					level = 1
					instant_build = yes
				}
			}
		}
	}

	COS_Establish_UFC_Headquarters_decision = {
		icon = GFX_decision_global_trade
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
			}
			has_completed_focus = COS_UFC_Land_Acquisition
		}

		ai_hint_pp_cost = 100
		custom_cost_trigger = {
			has_political_power > 99.99
			market_liberal < 0.93
		}
		custom_cost_text = UFC_8_BANANAS_PP

		fire_only_once = yes

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.25
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Establish_UFC_Headquarters_decision"
			custom_effect_tooltip = COS_UFC_plus_8
			custom_effect_tooltip = COS_UFC_HEADQUARTERS
			hidden_effect = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.08
				}
				add_political_power = -100
			}
			add_ideas = COS_UFC_Profit_idea
			set_variable = { cos_profit_factor = 0 }
			set_variable = { COS_UFC_consumer_goods = 0 }
			set_variable = { COS_UFC_factory_output = 0 }
			set_country_flag = COS_UFC_HEADQUARTERS_FLAG
		}
	}

	COS_Limon_Bananas = {
		icon = GFX_decision_infiltrate_state
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
				has_country_flag = COS_EXPANDING_OPERATIONS
			}
			controls_state = 316
			has_war = no
			market_liberal > 0.15
			has_socialist_government = no
		}
		visible = {
			has_country_flag = COS_UFC_HEADQUARTERS_FLAG
		}

		custom_cost_trigger = {
			has_equipment = {
				convoy > 5
			}
		}
		custom_cost_text = UFC_1_BANANAS

		fire_only_once = yes

		days_remove = 60

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.20
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Limon_Bananas"
			custom_effect_tooltip = COS_UFC_plus_1
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = convoy
					amount = -5
					producer = COS
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.01
				}
			}
			set_country_flag = COS_EXPANDING_OPERATIONS
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Limon_Bananas"
			set_temp_variable = { cos_profit_change = 1 }
			update_UFC_profits = yes
			hidden_effect = {
				clr_country_flag = COS_EXPANDING_OPERATIONS
			}
		}
	}

	COS_Jamaica_Sugar = {
		icon = GFX_decision_infiltrate_state
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
				has_country_flag = COS_EXPANDING_OPERATIONS
			}
			WIF = {
				has_opinion = {
					target = COS
					value > 59
				}
				has_socialist_government = no
			}
			has_war = no
			market_liberal > 0.15
		}
		visible = {
			has_country_flag = COS_UFC_HEADQUARTERS_FLAG
			WIF = {
				has_socialist_government = no
			}
		}

		custom_cost_trigger = {
			has_equipment = {
				convoy > 5
			}
		}
		custom_cost_text = UFC_1_BANANAS

		fire_only_once = yes

		days_remove = 60

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.20
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Jamaica_Sugar"
			custom_effect_tooltip = COS_UFC_plus_1
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = convoy
					amount = -5
					producer = COS
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.01
				}
			}
			set_country_flag = COS_EXPANDING_OPERATIONS
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Jamaica_Sugar"
			set_temp_variable = { cos_profit_change = 1 }
			update_UFC_profits = yes
			hidden_effect = {
				clr_country_flag = COS_EXPANDING_OPERATIONS
			}
		}
	}

	COS_Jamaica_Bananas = {
		icon = GFX_decision_infiltrate_state
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
				has_country_flag = COS_EXPANDING_OPERATIONS
			}
			WIF = {
				has_opinion = {
					target = COS
					value > 59
				}
				has_socialist_government = no
			}
			has_war = no
			market_liberal > 0.15
		}
		visible = {
			has_country_flag = COS_UFC_HEADQUARTERS_FLAG
			WIF = {
				has_socialist_government = no
			}
		}

		custom_cost_trigger = {
			has_equipment = {
				convoy > 10
			}
		}
		custom_cost_text = UFC_3_BANANAS

		fire_only_once = yes

		days_remove = 60

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.20
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Jamaica_Bananas"
			custom_effect_tooltip = COS_UFC_plus_3
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = convoy
					amount = -10
					producer = COS
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.03
				}
			}
			set_country_flag = COS_EXPANDING_OPERATIONS
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Jamaica_Bananas"
			set_temp_variable = { cos_profit_change = 2 }
			update_UFC_profits = yes
			hidden_effect = {
				clr_country_flag = COS_EXPANDING_OPERATIONS
			}
		}
	}

	COS_Cuba_Sugar = {
		icon = GFX_decision_infiltrate_state
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
				has_country_flag = COS_EXPANDING_OPERATIONS
			}
			CUB = {
				has_opinion = {
					target = COS
					value > 59
				}
				has_socialist_government = no
			}
			has_war = no
			market_liberal > 0.15
		}
		visible = {
			has_country_flag = COS_UFC_HEADQUARTERS_FLAG
			CUB = {
				has_socialist_government = no
			}
		}

		custom_cost_trigger = {
			has_equipment = {
				convoy > 10
			}
		}
		custom_cost_text = UFC_3_BANANAS

		fire_only_once = yes

		days_remove = 60

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.20
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Cuba_Sugar"
			custom_effect_tooltip = COS_UFC_plus_3
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = convoy
					amount = -10
					producer = COS
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.03
				}
			}
			set_country_flag = COS_EXPANDING_OPERATIONS
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Cuba_Sugar"
			set_temp_variable = { cos_profit_change = 2 }
			update_UFC_profits = yes
			hidden_effect = {
				clr_country_flag = COS_EXPANDING_OPERATIONS
			}
		}
	}

	COS_Nicaragua_Palm_Oil = {
		icon = GFX_decision_oasis
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
				has_country_flag = COS_EXPANDING_OPERATIONS
			}
			NIC = {
				has_opinion = {
					target = COS
					value > 59
				}
				has_socialist_government = no
			}
			has_war = no
			market_liberal > 0.15
		}
		visible = {
			has_country_flag = COS_UFC_HEADQUARTERS_FLAG
			NIC = {
				has_socialist_government = no
			}
		}

		custom_cost_trigger = {
			has_equipment = {
				convoy > 5
			}
		}
		custom_cost_text = UFC_1_BANANAS

		fire_only_once = yes

		days_remove = 60

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.20
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Nicaragua_Palm_Oil"
			custom_effect_tooltip = COS_UFC_plus_1
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = convoy
					amount = -5
					producer = COS
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.01
				}
			}
			set_country_flag = COS_EXPANDING_OPERATIONS
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Nicaragua_Palm_Oil"
			set_temp_variable = { cos_profit_change = 2 }
			update_UFC_profits = yes
			hidden_effect = {
				clr_country_flag = COS_EXPANDING_OPERATIONS
			}
		}
	}

	COS_Honduras_Palm_Oil = {
		icon = GFX_decision_oasis
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
				has_country_flag = COS_EXPANDING_OPERATIONS
			}
			HON = {
				has_opinion = {
					target = COS
					value > 59
				}
				has_socialist_government = no
			}
			has_war = no
			market_liberal > 0.15
		}
		visible = {
			has_country_flag = COS_UFC_HEADQUARTERS_FLAG
			HON = {
				has_socialist_government = no
			}
		}

		custom_cost_trigger = {
			has_equipment = {
				convoy > 5
			}
		}
		custom_cost_text = UFC_1_BANANAS

		fire_only_once = yes

		days_remove = 60

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.20
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Honduras_Palm_Oil"
			custom_effect_tooltip = COS_UFC_plus_1
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = convoy
					amount = -5
					producer = COS
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.01
				}
			}
			set_country_flag = COS_EXPANDING_OPERATIONS
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Honduras_Palm_Oil"
			set_temp_variable = { cos_profit_change = 2 }
			update_UFC_profits = yes
			hidden_effect = {
				clr_country_flag = COS_EXPANDING_OPERATIONS
			}
		}
	}

	COS_Honduras_Abaca = {
		icon = GFX_decision_infiltrate_state
		desc = COS_Honduras_Palm_Oil_desc
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
				has_country_flag = COS_EXPANDING_OPERATIONS
			}
			HON = {
				has_opinion = {
					target = COS
					value > 59
				}
				has_socialist_government = no
			}
			has_war = no
			market_liberal > 0.15
		}
		visible = {
			has_country_flag = COS_UFC_HEADQUARTERS_FLAG
			HON = {
				has_socialist_government = no
			}
		}

		custom_cost_trigger = {
			has_equipment = {
				convoy > 5
			}
		}
		custom_cost_text = UFC_1_BANANAS

		fire_only_once = yes

		days_remove = 60

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.20
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Honduras_Abaca"
			custom_effect_tooltip = COS_UFC_plus_1
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = convoy
					amount = -5
					producer = COS
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.01
				}
			}
			set_country_flag = COS_EXPANDING_OPERATIONS
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Honduras_Abaca"
			set_temp_variable = { cos_profit_change = 1 }
			update_UFC_profits = yes
			hidden_effect = {
				clr_country_flag = COS_EXPANDING_OPERATIONS
			}
		}
	}

	COS_Honduras_Banana = {
		icon = GFX_decision_infiltrate_state
		desc = COS_Honduras_Palm_Oil_desc
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
				has_country_flag = COS_EXPANDING_OPERATIONS
			}
			HON = {
				has_opinion = {
					target = COS
					value > 59
				}
				has_socialist_government = no
			}
			has_war = no
			market_liberal > 0.15
		}
		visible = {
			has_country_flag = COS_UFC_HEADQUARTERS_FLAG
			HON = {
				has_socialist_government = no
			}
		}

		custom_cost_trigger = {
			has_equipment = {
				convoy > 5
			}
		}
		custom_cost_text = UFC_1_BANANAS

		fire_only_once = yes

		days_remove = 60

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.20
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Honduras_Banana"
			custom_effect_tooltip = COS_UFC_plus_3
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = convoy
					amount = -10
					producer = COS
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.03
				}
			}
			set_country_flag = COS_EXPANDING_OPERATIONS
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Honduras_Banana"
			set_temp_variable = { cos_profit_change = 2 }
			update_UFC_profits = yes
			hidden_effect = {
				clr_country_flag = COS_EXPANDING_OPERATIONS
			}
		}
	}

	COS_Guatemala_Banana = {
		icon = GFX_decision_infiltrate_state
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
				has_country_flag = COS_EXPANDING_OPERATIONS
			}
			GUA = {
				has_opinion = {
					target = COS
					value > 59
				}
				has_socialist_government = no
			}
			has_war = no
			market_liberal > 0.15
		}
		visible = {
			has_country_flag = COS_UFC_HEADQUARTERS_FLAG
			GUA = {
				has_socialist_government = no
			}
		}

		custom_cost_trigger = {
			has_equipment = {
				convoy > 10
			}
		}
		custom_cost_text = UFC_3_BANANAS

		fire_only_once = yes

		days_remove = 60

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.20
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Guatemala_Banana"
			custom_effect_tooltip = COS_UFC_plus_3
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = convoy
					amount = -10
					producer = COS
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.03
				}
			}
			set_country_flag = COS_EXPANDING_OPERATIONS
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Guatemala_Banana"
			set_temp_variable = { cos_profit_change = 2 }
			update_UFC_profits = yes
			hidden_effect = {
				clr_country_flag = COS_EXPANDING_OPERATIONS
			}
		}
	}

	COS_Guatemala_Abaca = {
		icon = GFX_decision_infiltrate_state
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
				has_country_flag = COS_EXPANDING_OPERATIONS
			}
			GUA = {
				has_opinion = {
					target = COS
					value > 59
				}
				has_socialist_government = no
			}
			has_war = no
			market_liberal > 0.15
		}
		visible = {
			has_country_flag = COS_UFC_HEADQUARTERS_FLAG
			GUA = {
				has_socialist_government = no
			}
		}

		custom_cost_trigger = {
			has_equipment = {
				convoy > 5
			}
		}
		custom_cost_text = UFC_1_BANANAS

		fire_only_once = yes

		days_remove = 60

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.20
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Guatemala_Abaca"
			custom_effect_tooltip = COS_UFC_plus_1
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = convoy
					amount = -5
					producer = COS
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.01
				}
			}
			set_country_flag = COS_EXPANDING_OPERATIONS
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Guatemala_Abaca"
			set_temp_variable = { cos_profit_change = 1 }
			update_UFC_profits = yes
			hidden_effect = {
				clr_country_flag = COS_EXPANDING_OPERATIONS
			}
		}
	}

	COS_Colombia_Banana = {
		icon = GFX_decision_infiltrate_state
		allowed = { original_tag = COS }
		available = {
			NOT = {
				has_country_flag = UFC_GONE
				has_country_flag = COS_EXPANDING_OPERATIONS
			}
			COL = {
				has_opinion = {
					target = COS
					value > 59
				}
				has_socialist_government = no
			}
			has_war = no
			market_liberal > 0.15
		}
		visible = {
			has_country_flag = COS_UFC_HEADQUARTERS_FLAG
			GUA = {
				has_socialist_government = no
			}
		}

		custom_cost_trigger = {
			has_equipment = {
				convoy > 10
			}
		}
		custom_cost_text = UFC_3_BANANAS

		fire_only_once = yes

		days_remove = 60

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				market_liberal > 0.20
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Colombia_Banana"
			custom_effect_tooltip = COS_UFC_plus_3
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = convoy
					amount = -10
					producer = COS
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.03
				}
			}
			set_country_flag = COS_EXPANDING_OPERATIONS
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Colombia_Banana"
			set_temp_variable = { cos_profit_change = 2 }
			update_UFC_profits = yes
			hidden_effect = {
				clr_country_flag = COS_EXPANDING_OPERATIONS
			}
		}
	}
}

COS_Market_decisions = {
	COS_Purchase_Convoys = {
		icon = generic_naval
		allowed = { original_tag = COS }
		available = {
			check_variable = { cos_profit_factor > 0 }
		}

		custom_cost_trigger = {
			check_variable = { cos_profit_factor > 0 }
		}
		custom_cost_text = UFC_Profit_1_COST

		fire_only_once = no

		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				has_equipment = {
					convoy < 20
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Purchase_Convoys"
			set_temp_variable = { cos_profit_change = -1 }
			update_UFC_profits = yes
			custom_effect_tooltip = tooltip_white_line
			add_equipment_to_stockpile = { type = convoy amount = 20 producer = COS }
		}
	}

	COS_Purchase_Trucks = {
		icon = GFX_decision_generic_motorized
		allowed = { original_tag = COS }
		available = {
			check_variable = { cos_profit_factor > 1 }
		}

		custom_cost_trigger = {
			check_variable = { cos_profit_factor > 1 }
		}
		custom_cost_text = UFC_Profit_2_COST

		fire_only_once = no

		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				has_equipment = {
					motorized_equipment < 0
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Purchase_Trucks"
			set_temp_variable = { cos_profit_change = -2 }
			update_UFC_profits = yes
			custom_effect_tooltip = tooltip_white_line
			add_equipment_to_stockpile = { type = motorized_equipment amount = 50 producer = USA }
		}
	}

	COS_Purchase_Planes = {
		icon = generic_air
		allowed = { original_tag = COS }

		available = {
			check_variable = { cos_profit_factor > 2 }
		}

		custom_cost_trigger = {
			check_variable = { cos_profit_factor > 2 }
		}
		custom_cost_text = UFC_Profit_3_COST

		fire_only_once = no

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				check_variable = { cos_profit_factor < 10 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Purchase_Planes"
			set_temp_variable = { cos_profit_change = -3 }
			update_UFC_profits = yes
			custom_effect_tooltip = tooltip_white_line
			add_equipment_to_stockpile = { type = small_plane_airframe amount = 25 producer = USA }
		}
	}
}

COS_Guardia_decisions = {
	COS_Combat_Footworm = {
		icon = GFX_decision_generic_healthcare
		allowed = { original_tag = COS }

		cost = 50

		fire_only_once = yes

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 4
				social_democrat < 0.30
			}
			modifier = {
				factor = 2
				has_stability < 0.30
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Combat_Footworm"
			add_popularity = {
				ideology = social_democrat
				popularity = 0.03
			}
			add_stability = 0.02
		}
	}

	COS_Stimulate_Fishing_Industry = {
		icon = GFX_decision_cod
		allowed = { original_tag = COS }

		cost = 60

		fire_only_once = yes

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 4
				social_democrat < 0.30
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Stimulate_Fishing_Industry"
			add_popularity = {
				ideology = social_democrat
				popularity = 0.05
			}
		}
	}

	COS_Disband_Petroleum_Monopoly = {
		icon = GFX_decision_oil
		allowed = { original_tag = COS }

		cost = 100

		fire_only_once = yes

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 4
				social_democrat < 0.30
			}
			modifier = {
				factor = 2
				has_stability < 0.30
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Disband_Petroleum_Monopoly"
			add_popularity = {
				ideology = social_democrat
				popularity = 0.07
			}
			add_stability = 0.03
		}
	}

	COS_Create_Housing_Cooperatives = {
		icon = GFX_decision_generic_political_discourse
		allowed = { original_tag = COS }

		cost = 60

		fire_only_once = yes

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 4
				social_democrat < 0.30
			}
			modifier = {
				factor = 2
				has_stability < 0.30
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Create_Housing_Cooperatives"
			add_popularity = {
				ideology = social_democrat
				popularity = 0.03
			}
			add_stability = 0.05
		}
	}
}

COS_Cortes_decisions = {
	COS_Build_New_Schools = {
		icon = GFX_decision_generic_research
		allowed = { original_tag = COS }
		available = {
			has_completed_focus = COS_Educational_Reforms
		}

		cost = 60

		fire_only_once = yes

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 4
				social_conservative < 0.30
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Build_New_Schools"
			add_timed_idea = {
				idea = COS_Educating_the_Countryside
				days = 720
			}
			add_popularity = {
				ideology = social_conservative
				popularity = 0.03
			}
		}
	}

	COS_Infrastructural_Improvements = {
		icon = GFX_decision_generic_naval_base
		allowed = { original_tag = COS }
		available = {
			has_idea = COS_Iron_Bars_Presidency
		}

		cost = 60

		fire_only_once = yes

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 4
				social_conservative < 0.30
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Infrastructural_Improvements"
			add_popularity = {
				ideology = social_conservative
				popularity = 0.05
			}
		}
	}

	COS_Silence_the_Press = {
		icon = GFX_decision_oppression
		allowed = { original_tag = COS }
		visible = {
			has_country_flag = silence_trabaio
		}

		cost = 70

		fire_only_once = yes

		ai_will_do = {
			base = 0
			modifier = {
				add = 200
				social_conservative > 0.15
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Silence_the_Press"
			add_popularity = {
				ideology = syndicalist
				popularity = -0.05
			}
			add_stability = -0.03
		}
	}

	COS_Expand_Manufacturing_Industry = {
		icon = GFX_decision_generic_factory
		allowed = { original_tag = COS }
		available = {
			has_idea = COS_Iron_Bars_Presidency
		}

		cost = 150

		days_remove = 200

		fire_only_once = yes

		ai_will_do = { factor = 200 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Expand_Manufacturing_Industry"
			add_offsite_building = { type = industrial_complex level = 1 }
		}
	}
}

COS_Election_decisions = {
	COS_Gather_Support_Puntarenas = {
		icon = GFX_decision_generic_agreement
		allowed = { original_tag = COS }

		days_remove = 30

		cost = 35

		fire_only_once = yes

		ai_will_do = {
			factor = 30
			modifier = {
				add = 100
				check_variable = {
					var = cos_prn_factor
					value = 30
					compare = less_than_or_equals
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Gather_Support_Puntarenas"
			add_to_variable = {
				var = cos_prn_factor
				value = 3
				tooltip = COS_PRN_support_increase
			}
		}
	}

	COS_Gather_Support_San_Jose = {
		icon = GFX_decision_generic_agreement
		allowed = { original_tag = COS }

		days_remove = 30

		cost = 70

		fire_only_once = yes

		ai_will_do = {
			factor = 30
			modifier = {
				add = 100
				check_variable = {
					var = cos_prn_factor
					value = 30
					compare = less_than_or_equals
				}
			}
			modifier = {
				add = 200
				check_variable = {
					var = cos_pvp_factor
					value = 25
					compare = greater_than_or_equals
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Gather_Support_San_Jose"
			add_to_variable = {
				var = cos_prn_factor
				value = 15
				tooltip = COS_PRN_support_increase
			}
		}
	}
	COS_Gather_Support_Cartago = {
		icon = GFX_decision_generic_agreement
		allowed = { original_tag = COS }

		days_remove = 30

		cost = 55

		fire_only_once = yes

		ai_will_do = {
			factor = 30
			modifier = {
				add = 100
				check_variable = {
					var = cos_prn_factor
					value = 30
					compare = less_than_or_equals
				}
			}
			modifier = {
				add = 200
				check_variable = {
					var = cos_pvp_factor
					value = 25
					compare = greater_than_or_equals
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Gather_Support_Cartago"
			add_to_variable = {
				var = cos_prn_factor
				value = 10
				tooltip = COS_PRN_support_increase
			}
		}
	}
	COS_Gather_Support_Limon = {
		icon = GFX_decision_generic_agreement
		allowed = { original_tag = COS }

		days_remove = 30

		cost = 55

		fire_only_once = yes

		ai_will_do = {
			factor = 30
			modifier = {
				add = 100
				check_variable = {
					var = cos_prn_factor
					value = 30
					compare = less_than_or_equals
				}
			}
			modifier = {
				add = 200
				check_variable = {
					var = cos_pvp_factor
					value = 25
					compare = greater_than_or_equals
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Gather_Support_Limon"
			add_to_variable = {
				var = cos_prn_factor
				value = 10
				tooltip = COS_PRN_support_increase
			}
		}
	}
	COS_Gather_Support_Heredia = {
		icon = GFX_decision_generic_agreement
		allowed = { original_tag = COS }

		days_remove = 30

		cost = 35

		fire_only_once = yes

		ai_will_do = {
			factor = 30
			modifier = {
				add = 100
				check_variable = {
					var = cos_prn_factor
					value = 30
					compare = less_than_or_equals
				}
			}
			modifier = {
				add = 200
				check_variable = {
					var = cos_pvp_factor
					value = 25
					compare = greater_than_or_equals
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Gather_Support_Heredia"
			add_to_variable = {
				var = cos_prn_factor
				value = 3
				tooltip = COS_PRN_support_increase
			}
		}
	}
	COS_Gather_Support_Alajuela = {
		icon = GFX_decision_generic_agreement
		allowed = { original_tag = COS }

		days_remove = 30

		cost = 35

		fire_only_once = yes

		ai_will_do = {
			factor = 30
			modifier = {
				add = 100
				check_variable = {
					var = cos_prn_factor
					value = 30
					compare = less_than_or_equals
				}
			}
			modifier = {
				add = 200
				check_variable = {
					var = cos_pvp_factor
					value = 25
					compare = greater_than_or_equals
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Gather_Support_Alajuela"
			add_to_variable = {
				var = cos_prn_factor
				value = 3
				tooltip = COS_PRN_support_increase
			}
		}
	}
	COS_Gather_Support_Guanacaste = {
		icon = GFX_decision_generic_agreement
		allowed = { original_tag = COS }

		days_remove = 30

		cost = 45

		fire_only_once = yes

		ai_will_do = {
			factor = 30
			modifier = {
				add = 100
				check_variable = {
					var = cos_prn_factor
					value = 30
					compare = less_than_or_equals
				}
			}
			modifier = {
				add = 200
				check_variable = {
					var = cos_pvp_factor
					value = 25
					compare = greater_than_or_equals
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Gather_Support_Guanacaste"
			add_to_variable = {
				var = cos_prn_factor
				value = 7
				tooltip = COS_PRN_support_increase
			}
		}
	}

	COS_Jimenez_Supporters_mission = {

		allowed = {
			always = no
		}

		icon = GFX_decision_eng_blackshirt_march

		selectable_mission = yes
		days_mission_timeout = 25

		days_re_enable = 20

		cost = 35

		is_good = no

		fire_only_once = no

		ai_will_do = {
			factor = 30
			modifier = {
				add = 100
				check_variable = {
					var = cos_prn_factor
					value = 30
					compare = less_than_or_equals
				}
			}
			modifier = {
				add = 200
				check_variable = {
					var = cos_pvp_factor
					value = 25
					compare = greater_than_or_equals
				}
			}
		}

		cancel_trigger = {
			NOT = {
				has_country_flag = COS_ELECTIONS
				has_country_flag = JIMMY_DOWN
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Jimenez_Supporters_mission"
			add_to_variable = {
				var = cos_prn_factor
				value = 1
				tooltip = COS_PRN_support_increase
			}
			hidden_effect = {
				country_event = { id = cos.105 days = 40 }
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout COS_Jimenez_Supporters_mission"
			subtract_from_variable = {
				var = cos_prn_factor
				value = 3
				tooltip = COS_PRN_support_decrease
			}
			hidden_effect = {
				country_event = { id = cos.105 days = 20 }
			}
		}
	}

	COS_Mora_Supporters_mission = {

		allowed = {
			always = no
		}

		available = {
			has_country_flag = COS_ELECTIONS
		}

		icon = GFX_decision_generic_political_rally

		selectable_mission = yes
		days_mission_timeout = 15

		cost = 35

		is_good = no

		fire_only_once = no

		ai_will_do = {
			factor = 30
			modifier = {
				add = 100
				check_variable = {
					var = cos_prn_factor
					value = 30
					compare = less_than_or_equals
				}
			}
			modifier = {
				add = 200
				check_variable = {
					var = cos_pvp_factor
					value = 25
					compare = greater_than_or_equals
				}
			}
		}

		cancel_trigger = {
			NOT = {
				has_country_flag = COS_ELECTIONS
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Mora_Supporters_mission"
			add_to_variable = {
				var = cos_prn_factor
				value = 1
				tooltip = COS_PRN_support_increase
			}
			hidden_effect = {
				country_event = { id = cos.104 days = 40 }
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout COS_Mora_Supporters_mission"
			add_to_variable = {
				var = cos_pvp_factor
				value = 3
				tooltip = COS_PVP_support_increase
			}
			hidden_effect = {
				country_event = { id = cos.104 days = 20 }
			}
		}
	}
}

COS_Ferrer_Aggro_decisions = {
	COS_Legion_del_Caribe_Attack = {
		icon = GFX_decision_generic_military

		allowed = { always = no } #activated by effect

		cancel_trigger = {
			NOT = {
				has_war_with = CEN
				can_declare_war_on = CEN
			}
		}

		days_remove = 600
		fire_only_once = yes
		war_with_target_on_complete = yes

		modifier = {
			conscription = 0.03
			unit_limit_bonus = 5
			mobilization_speed = 1
			supply_consumption_factor = -0.5
			out_of_supply_factor = -0.5
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = 200
				CEN = { all_core_state = { has_state_flag = COS_supplied_rebels } }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Legion_del_Caribe_Attack"
			#Check to see whether they are in the same faction + lets head of the alliance pick a side
			if = {
				limit = {
					is_in_faction_with = CEN
					is_faction_leader = no
				}
				faction_leader = {
					remove_from_faction = CEN
					remove_from_faction = COS
					country_event = { id = cos.113 hours = 12 }
				}
			}

			#Declare the war
			declare_war_on = {
				type = topple_government
				target = CEN
			}

			#Load Rebel OOBS
			division_template = {
				name = "Brigada de Milicia"
				division_names_group = SPAN_MIL_01
				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
					militia = { x = 0 y = 2 }
				}
			}
			CEN = {
				every_owned_state = {
					limit = { has_state_flag = COS_supplied_rebels }
					create_unit = {
						division = "division_template = \"Brigada de Milicia\" start_experience_factor = 0.1 start_equipment_factor = 0.9"
						allow_spawning_on_enemy_provs = yes
						owner = ROOT
					}
				}
			}

			#STOP FURTHER REBEL ACTIONS
			set_country_flag = COS_TIME_TO_DANCE_DICKWEED
			COS_clear_legion_del_caribe_rebel_decisions = yes
		}
	}

	#GREAT CENTRAL AMERICAN REVOLUTION
	COS_Supply_Rebels = {
		icon = GFX_decision_infiltrate_state

		allowed = { always = no } #activated by effect

		available = {
			OR = {
				has_war = no
				controls_state = FROM
			}
		}

		cancel_trigger = {
			NOT = { FROM = { is_owned_by = CEN } }
		}

		custom_cost_text = MP_50
		custom_cost_trigger = {
			has_manpower > 49
			has_equipment = { infantry_equipment > 399 }
		}

		days_remove = 30
		fire_only_once = yes
		state_target = yes

		ai_will_do = { factor = 100 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel COS_Supply_Rebels target: [From.GetName]"
			hidden_effect = {
				add_manpower = 50
				add_equipment_to_stockpile = { type = infantry_equipment amount = 400 }
				remove_targeted_decision = { decision = COS_Legion_del_Caribe_Attack target = CEN }
				COS_disable_legion_del_caribe_decisions = yes
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Supply_Rebels target: [From.GetName]"
			hidden_effect = {
				add_manpower = -50
				add_equipment_to_stockpile = { type = infantry_equipment amount = -400 }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Supply_Rebels target: [From.GetName]"
			if = {
				limit = { has_war = no }
				custom_effect_tooltip = COS_suplied_rebels_tooltip
				FROM = { set_state_flag = COS_supplied_rebels }
			}
			else = {
				if = {
					limit = { NOT = { has_template = "Brigada de Milicia" } }
					division_template = {
						name = "Brigada de Milicia"
						division_names_group = SPAN_MIL_01
						regiments = {
							militia = { x = 0 y = 0 }
							militia = { x = 0 y = 1 }
							militia = { x = 0 y = 2 }
						}
					}
				}
				FROM = {
					create_unit = {
						division = "division_template = \"Brigada de Milicia\" start_experience_factor = 0.1 start_equipment_factor = 0.9"
						allow_spawning_on_enemy_provs = yes
						owner = ROOT
					}
				}
			}
		}
	}
}

COS_Democratic_Alliance_of_the_Caribbean_decisions = {
	COS_form_faction = {
		icon = GFX_decision_generic_agreement

		allowed = { always = no }

		visible = {
			is_subject = no
			is_faction_leader = no
			has_country_leader = { character = COS_jose_figueres_ferrer }
			CEN = { NOT = { has_country_flag = COS_legion_faction } }
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = COS_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = COS_forpol option = COS_FORPOL_CEN } }
			}
			modifier = {
				factor = 0
				is_in_faction = yes
				has_game_rule = { rule = COS_forpol option = DEFAULT }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_form_faction"
			set_country_flag = COS_legion_faction
			if = {
				limit = { is_in_faction = yes }
				separate_peace_all_wars = yes
				leave_faction = yes
			}
			create_faction = democratic_alliance_of_the_caribbean
			hidden_effect = {
				country_event = cos.132
			}
		}
	}

	COS_Invite = {
		icon = GFX_decision_generic_agreement

		visible = {
			is_faction_leader = yes
			country_exists = FROM
			FROM = {
				has_elected_government = yes
				is_subject = no
				is_in_faction = no
				has_capitulated = no
				NOT = { has_war_with = ROOT }
			}
		}

		available = {
			AND = {
				at_peace_or_same_enemies_as_FROM = yes
				FROM = { at_peace_or_same_enemies_as_ROOT = yes }
			}
		}

		targets = { HAI DOM CUB PUE YUC CEN COS PAN ECU COL VEN }
		target_root_trigger = {
			is_faction_leader = yes
		}
		target_trigger = {
			FROM = {
				has_elected_government = yes
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = { factor = 300 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Invite target: [From.GetName]"
			FROM = { country_event = cos.126 }
		}
	}

	COS_form_economic_bloc = {
		icon = GFX_decision_global_trade

		visible = {
			is_faction_leader = yes
			country_exists = FROM
			NOT = { has_idea = COS_car_economic_bloc_idea }
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = { factor = 300 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_form_economic_bloc target: [From.GetName]"
			ROOT = { add_ideas = COS_car_economic_bloc_idea }

			COS = {
				set_variable = { COS_car_eco_bloc_modifier = 0.015 }
				set_variable = { COS_car_eco_bloc_research = 0.01 }
				force_update_dynamic_modifier = yes
			}
		}
	}

	COS_economic_bloc = {
		icon = GFX_decision_global_trade

		visible = {
			has_idea = COS_car_economic_bloc_idea
			is_faction_leader = yes
			country_exists = FROM
			FROM = {
				is_in_faction = yes
				is_in_faction_with = ROOT
				has_capitulated = no
				NOT = { has_idea = COS_car_economic_bloc_idea }
			}
		}

		targets = { WIF JAM HAI TRI ANT HAI DOM CUB PUE YUC CEN COS PAN ECU COL VEN GYA SUR }
		target_root_trigger = {
			is_faction_leader = yes
		}
		target_trigger = {
			is_in_faction_with = ROOT
			has_democratic_government = yes #PAN and HAI can go authdem and still be democratic
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = { factor = 300 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_economic_bloc target: [From.GetName]"
			FROM = { add_ideas = COS_car_economic_bloc_idea }
			COS = {
				add_to_variable = { COS_car_eco_bloc_modifier = 0.015 }
				add_to_variable = { COS_car_eco_bloc_research = 0.01 }
				force_update_dynamic_modifier = yes
			}
		}
	}

	COS_protect_panama = {
		icon = GFX_decision_generic_agreement

		visible = {
			is_faction_leader = yes
			country_exists = FROM
			FROM = {
				is_in_faction = yes
				is_in_faction_with = COL
				has_democratic_government = yes
				has_capitulated = no
				NOT = { has_war_with = ROOT }
			}
			COL = { is_faction_leader = yes }
		}

		targets = { PAN }
		target_root_trigger = {
			is_faction_leader = yes
		}
		target_trigger = {
			FROM = {
				is_in_faction = yes
				is_in_faction_with = COL
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 20
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				FROM = { has_war = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_protect_panama target: [From.GetName]"
			FROM = {
				country_event = cos.134
			}
		}
	}

	COS_merge_with_the_andean_pact = {
		icon = GFX_decision_generic_agreement

		visible = {
			is_faction_leader = yes
			country_exists = FROM
			FROM = {
				has_elected_government = yes
				is_faction_leader = yes
				has_capitulated = no
				NOT = { has_war_with = ROOT }
			}
			304 = { is_owned_by_ROOT_or_ally = yes }
		}

		targets = { COL }
		target_root_trigger = {
			is_faction_leader = yes
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				FROM = { has_war = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_merge_with_the_andean_pact target: [From.GetName]"
			FROM = {
				country_event = cos.138
			}
		}
	}

	COS_integrate_into_CEN = {
		icon = GFX_decision_generic_agreement

		visible = {
			is_faction_leader = yes
			FROM = {
				NOT = { has_country_flag = COS_legion_faction }
				is_in_faction = yes
				is_subject = no
				has_capitulated = no
			}
		}

		targets = { CEN }
		target_root_trigger = {
			is_faction_leader = yes
		}
		target_trigger = {
			FROM = {
				is_in_faction = yes
				is_subject = no
			}
		}

		cost = 0
		days_remove = 60
		fire_only_once = yes

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				NOT = { has_completed_focus = COS_Rewrite_the_Constitution }
			}
			modifier = {
				factor = 0
				FROM = { has_war = yes }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_integrate_into_CEN target: [From.GetName]"
			FROM = {
				country_event = cos.139
				effect_tooltip = {
					add_ideas = CENdem_beacon_democracy
					if = {
						limit = {
							COS = { has_idea = COS_car_economic_bloc_idea }
							NOT = { has_idea = COS_car_economic_bloc_idea }
						}
						add_ideas = COS_car_economic_bloc_idea
					}
					else = {
						COS = {
							add_to_variable = { COS_car_eco_bloc_modifier = -0.015 }
							add_to_variable = { COS_car_eco_bloc_research = -0.01 }
							force_update_dynamic_modifier = yes
						}
					}
					ROOT = {
						COS_arturo_quiros_carranza = { set_nationality = CEN }
						COS_rafael_castro_quesada = { set_nationality = CEN }
						if = {
							limit = { has_character = COS_jose_figueres_ferrer }
							COS_jose_figueres_ferrer = { set_nationality = CEN }
						}
						every_core_state = { add_core_of = CEN }
						every_subject_country = {
							set_temp_variable = { target = THIS }
							CEN = { puppet_country_without_changing_government = yes }
						}
					}
					change_tag_from = ROOT
					set_faction_leader = yes
					annex_country = {
						target = COS
						transfer_troops = yes
					}
				}
			}
		}
	}

	CENdem_integrate_COS = { #Only visible to CEN
		icon = GFX_decision_generic_agreement

		visible = {
			is_faction_leader = yes
			has_country_flag = COS_legion_faction
			FROM = {
				is_in_faction = yes
				has_capitulated = no
				hidden_trigger = {
					NOT = { has_country_flag = COS_CEN_begun_integration }
				}
			}
		}

		targets = { COS }
		target_root_trigger = {
			is_faction_leader = yes
		}
		target_trigger = {
			FROM = {
				is_in_faction = yes
				is_faction_leader = no
				NOT = { has_country_flag = COS_no_further_integration } #Don't annoy a player
			}
		}

		cost = 80
		days_remove = 60

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				FROM = { has_war = yes }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CENdem_integrate_COS target: [From.GetName]"
			FROM = {
				country_event = cos.140
			}
			custom_effect_tooltip = if_they_accept_tt
			FROM = {
				event_option_tooltip = cos.140.a
			}
		}
	}

	CENdem_car_core_british_honduras = {
		icon = GFX_decision_generic_nationalism

		visible = {
			is_faction_leader = yes
			owns_state = 311
			NOT = { 311 = { is_core_of = ROOT } }
			FROM = {
				is_in_faction_with = ENT
				has_socialist_government = no
			}
			hidden_trigger = {
				original_tag = CEN
				NOT = { ROOT = { is_in_faction_with = ENT } }
				NOT = { has_country_flag = CENdem_belize_cored }
			}
		}

		available = {
			has_full_control_of_state = 311
			NOT = { has_war_with = FROM }
		}

		targets = { WIF }
		target_root_trigger = {
			owns_state = 311
			311 = { is_core_of = WIF }
		}
		target_trigger = {
			FROM = {
				is_in_faction_with = ENT
				has_socialist_government = no
			}
		}

		cost = 20
		fire_only_once = yes

		highlight_states = {
			highlight_state_targets = { state = 311 }
		}

		ai_will_do = { factor = 100 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CENdem_car_core_british_honduras target: [From.GetName]"
			WIF = { country_event = cendem.244 } #Ask WIF to remove their claim
			hidden_effect = {
				set_country_flag = CENdem_belize_cored
			}
		}
	}

	CENdem_car_core_british_honduras_2 = { #Alternative decision if WIF is socialist
		name = CENdem_car_core_british_honduras
		icon = GFX_decision_generic_nationalism

		visible = {
			is_faction_leader = yes
			owns_state = 311
			NOT = { 311 = { is_core_of = ROOT } }
			FROM = {
				NOT = { is_in_faction_with = ENT }
				has_socialist_government = yes
			}
			hidden_trigger = {
				original_tag = CEN
				NOT = { has_country_flag = CENdem_belize_cored }
			}
		}

		available = {
			has_full_control_of_state = 311
		}

		targets = { WIF }
		target_root_trigger = {
			owns_state = 311
			311 = { is_core_of = WIF }
		}
		target_trigger = {
			FROM = {
				NOT = { is_in_faction_with = ENT }
				has_socialist_government = yes
			}
		}

		cost = 30
		fire_only_once = yes

		highlight_states = {
			highlight_state_targets = { state = 311 }
		}

		ai_will_do = { factor = 100 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CENdem_car_core_british_honduras_2 target: [From.GetName]"
			311 = { enable_state_integration_80_compliance = yes }
			hidden_effect = {
				set_country_flag = CENdem_belize_cored
			}
		}
	}

	#INVASION TARGETS
	COS_Invasion = {
		icon = GFX_decision_generic_ignite_civil_war

		visible = {
			is_faction_leader = yes
			OR = {
				has_completed_focus = COS_Fullfill_our_Duty
				AND = {
					original_tag = CEN
					OR = {
						has_completed_focus = CENdem_keep_the_republican_armies_separated
						has_completed_focus = CENdem_the_central_american_task_force
						has_completed_focus = CENdem_federalised_army
					}
					hidden_trigger = {
						has_country_flag = COS_legion_faction
					}
				}
			}
			country_exists = FROM
			FROM = {
				has_elected_government = no
				is_subject = no
				if = {
					limit = { tag = DOM }
					OR = {
						NOT = {
							has_government = authoritarian_democrat
							has_government = paternal_autocrat
						}
						has_global_flag = DOMCOS_decwarallow
						has_global_flag = DOMCOS_decwarallow_2
					}
				}
				if = {
					limit = { tag = MEX }
					OR = {
						controls_state = 312 #Honduras
						controls_state = 313 #Guatemala
						controls_state = 314 #El Salvador
						controls_state = 317 #Managua
					}
				}
			}
		}

		war_with_target_on_remove = yes
		targets = { HAI DOM CUB PUE MEX YUC GUA ELS HON NIC PAN ECU COL VEN }
		target_root_trigger = {
			is_faction_leader = yes
		}
		target_trigger = {
			FROM = {
				has_elected_government = no
				is_subject = no
			}
		}

		cost = 50
		days_remove = 30
		fire_only_once = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						capital_scope = { region = 53 } #Caribbean Sea
						NOT = { is_owner_neighbor_of = ROOT }
						TAG = PAN
					}
					default_attack_AI_trigger_consider_naval_strength = yes
				}
			}
			modifier = {
				factor = 0
				NOT = { has_tech = transport }
				NOT = { has_tech = mtg_transport }
			}
			modifier = {
				factor = 0
				FROM = { default_attack_AI_trigger = yes }
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = { TAG = COS }
					OR = {
						is_in_faction_with = GER
						is_guaranteed_by = GER
					}
				}
				GER = {
					surrender_progress < 0.65
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = { TAG = COS }
					OR = {
						is_in_faction_with = ENT
						is_guaranteed_by = ENT
					}
				}
				ENT = {
					surrender_progress < 0.5
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction_with = INT
				}
				INT = {
					surrender_progress < 0.5
				}
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel COS_Invasion target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Invasion target: [From.GetName]"
			FROM = { incoming_war_notification_effect = yes }
			setup_decision_attack_AI = yes
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Invasion target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				type = topple_government
				target = FROM
			}
			FROM = {
				if = {
					limit = { tag = DOM }
					hidden_effect = { country_event = domrep.99 }
					if = {
						limit = { has_global_flag = DOMCOS_decwarallow_2 }
						custom_effect_tooltip = DOMCOS_reb_tooltip
						hidden_effect = { COS_create_democratic_rebels_divisions = yes }
					}
				}
			}
		}
	}
}

COS_Diplomacy_decisions = {
	COS_Join_Reichspakt = {
		name = join_faction
		icon = GFX_decision_generic_flags

		allowed = { original_tag = COS }
		available = {
			is_guaranteed_by = GER
			is_in_faction = no
			GER = {
				has_war_with = FRA
			}
		}
		visible = {
			is_guaranteed_by = GER
		}

		cost = 0

		fire_only_once = yes

		ai_will_do = {
			base = 0
			modifier = {
				add = 300
				OR = {
					has_war = yes
					has_game_rule = { rule = COS_forpol option = COS_FORPOL_GER }
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Join_Reichspakt"
			GER = {
				country_event = cos.120
			}
		}
	}

	COS_Join_Entente = {
		icon = GFX_decision_eng_ally_imperialist_coup
		name = join_faction

		allowed = { original_tag = COS }
		available = {
			is_guaranteed_by = CAN
			is_in_faction = no
			CAN = {
				has_war_with = ENG
			}
		}
		visible = {
			is_guaranteed_by = CAN
		}

		cost = 0

		fire_only_once = yes

		ai_will_do = {
			base = 0
			modifier = {
				add = 300
				OR = {
					has_war = yes
					has_game_rule = { rule = COS_forpol option = COS_FORPOL_ENT }
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Join_Entente"
			CAN = {
				country_event = cos.120
			}
		}
	}
}

COS_Ferrer_Pacifist_decisions = {
	COS_Tribunal_Sanciones_Inmediatas = {
		icon = GFX_decision_eng_trade_unions_demand
		allowed = { original_tag = COS }

		cost = 0

		modifier = {
			political_power_gain = -0.05
		}

		fire_only_once = yes

		days_remove = 30

		ai_will_do = { factor = 300 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Tribunal_Sanciones_Inmediatas"
			add_stability = 0.10
		}
	}

	COS_Tribunal_Probidad = {
		icon = GFX_decision_generic_police_action
		allowed = { original_tag = COS }

		cost = 0

		modifier = {
			political_power_gain = -0.05
		}

		fire_only_once = yes

		days_remove = 100

		ai_will_do = { factor = 300 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove COS_Tribunal_Probidad"
			add_political_power = 100
		}
	}

	COS_Coffee_Defense_Institute = {
		icon = GFX_decision_hand_palm_down
		allowed = { original_tag = COS }

		cost = 30

		fire_only_once = yes

		ai_will_do = { factor = 300 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Coffee_Defense_Institute"
			custom_effect_tooltip = COS_ZKG_minus_3
			hidden_effect = {
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = -0.03
				}
			}
		}
	}

	COS_Ban_PVP = {
		icon = GFX_decision_oppression
		allowed = { original_tag = COS }

		cost = 100

		fire_only_once = yes

		ai_will_do = {
			factor = 30
			modifier = {
				add = 200
				syndicalist > 0.15
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Ban_PVP"
			add_popularity = {
				ideology = syndicalist
				popularity = -0.5
			}
		}
	}

	COS_Found_ICE = {
		icon = GFX_decision_electrify
		allowed = { original_tag = COS }
		available = {
			has_completed_focus = COS_Hydro_Elelectricity
		}

		cost = 100

		fire_only_once = yes

		ai_will_do = { factor = 300 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Found_ICE"
			add_offsite_building = { type = industrial_complex level = 1 }
		}
	}

	COS_Disband_the_Council = {
		icon = GFX_decision_generic_break_treaty
		allowed = { original_tag = COS }
		available = {
			has_completed_focus = COS_Shining_Beacon_of_Progress
		}

		cost = 0

		fire_only_once = yes

		ai_will_do = { factor = 100 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Disband_the_Council"
			promote_character = {
				character = COS_teodoro_picado_michalski
				ideology = social_democrat_subtype
			}
			set_politics = {
				ruling_party = social_conservative
			}
			add_popularity = {
				ideology = social_conservative
				popularity = 0.30
			}
		}
	}

	COS_Abolish_Army = {
		icon = GFX_decision_peace_dove
		allowed = { original_tag = COS }
		available = {
			has_completed_focus = COS_Shining_Beacon_of_Progress
			has_war = no
		}

		cost = 0

		fire_only_once = yes

		ai_will_do = { factor = 100 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete COS_Abolish_Army"
			swap_ideas = {
				remove_idea = COS_beacon_democracy_2
				add_idea = COS_beacon_democracy_3a
			}
			country_event = cos.124
		}
	}
}
political_actions = {
	CEN_COS_peace_timer = {
		icon = revolt

		allowed = { always = no } #activated by on_state_control_changed

		available = {
			COS = { surrender_progress < 0.65 }
		}

		cancel_trigger = {
			OR = {
				has_war = no
				is_subject = yes
				has_capitulated = yes
			}
		}

		is_good = no
		days_mission_timeout = 90

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel CEN_COS_peace_timer"
			hidden_effect = {
				every_country = {
					limit = { has_active_mission = COS_peace_timer }
					remove_mission = COS_peace_timer
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CEN_COS_peace_timer"
			hidden_effect = {
				every_country = {
					limit = { has_active_mission = COS_peace_timer }
					remove_mission = COS_peace_timer
				}
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CEN_COS_peace_timer"
			if = {
				limit = {
					PAN = {
						is_ally_with = COS
						has_capitulated = yes
					}
				}
				PAN = {
					if = {
						limit = { is_subject = yes }
						overlord = {
							set_autonomy = {
								target = PREV
								autonomy_state = autonomy_free
							}
						}
					}
					if = {
						limit = { is_in_faction_with = COS }
						leave_faction = yes
					}
				}
			}
			if = {
				limit = {
					YUC = {
						is_ally_with = COS
						has_capitulated = yes
					}
				}
				YUC = {
					if = {
						limit = { is_subject = yes }
						overlord = {
							set_autonomy = {
								target = PREV
								autonomy_state = autonomy_free
							}
						}
					}
					if = {
						limit = { is_in_faction_with = COS }
						leave_faction = yes
					}
				}
			}
			COS = { leave_faction = yes }
			event_target:new_cos_faction_leader = {
				white_peace_with_ROOT = yes
				dismantle_faction = yes
			}
		}
	}
	COS_peace_timer = {
		icon = revolt

		allowed = { always = no } #activated by on_state_control_changed

		available = {
			COS = { surrender_progress < 0.65 }
		}

		cancel_trigger = {
			OR = {
				NOT = { has_war_with = event_target:costa_rica_attacker }
				event_target:costa_rica_attacker = { has_capitulated = yes }
				event_target:costa_rica_attacker = { is_subject = yes }
			}
		}

		is_good = yes
		days_mission_timeout = 90

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout COS_peace_timer"
			effect_tooltip = {
				if = {
					limit = {
						PAN = {
							is_ally_with = COS
							has_capitulated = yes
						}
					}
					PAN = {
						if = {
							limit = { is_subject = yes }
							overlord = {
								set_autonomy = {
									target = PREV
									autonomy_state = autonomy_free
								}
							}
						}
						if = {
							limit = { is_in_faction_with = COS }
							leave_faction = yes
						}
					}
				}
				if = {
					limit = {
						YUC = {
							is_ally_with = COS
							has_capitulated = yes
						}
					}
					YUC = {
						if = {
							limit = { is_subject = yes }
							overlord = {
								set_autonomy = {
									target = PREV
									autonomy_state = autonomy_free
								}
							}
						}
						if = {
							limit = { is_in_faction_with = COS }
							leave_faction = yes
						}
					}
				}
				COS = { leave_faction = yes }
				event_target:new_cos_faction_leader = {
					CEN = { white_peace_with_ROOT = yes }
					dismantle_faction = yes
				}
			}
		}
	}
}


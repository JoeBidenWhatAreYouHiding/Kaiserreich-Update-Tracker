###########################
#      Bukhara Events     #
###########################
# By JazzyHugh and Matoro #
###########################

add_namespace = bukhara_events

### Opening Events

country_event = { #The Bukharan Balancing Act
	id = bukhara_events.200
	title = bukhara_events.200.t
	desc = bukhara_events.200.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_bukharan_people_assemble

	option = {
		log = "[GetLogInfo]: event bukhara_events.200 option bukhara_events.200.a"
		name = bukhara_events.200.a
		country_event = { id = bukhara_events.201 days = 10 }
	}
}

country_event = { #Moscow's Southern Bulwark
	id = bukhara_events.201
	title = bukhara_events.201.t
	desc = bukhara_events.201.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_bukharan_artillery

	option = {
		name = bukhara_events.201.a #
		log = "[GetLogInfo]: event bukhara_events.201 option bukhara_events.201.a"
		custom_effect_tooltip = CA_prep_intro_tooltip
		activate_targeted_decision = { target = THIS decision = BUK_prep_stockpile_equipment }
		activate_targeted_decision = { target = THIS decision = BUK_prep_sell_supplies }
	}
}

country_event = { #Black Monday Arrives in Bukhara
	id = bukhara_events.202
	title = bukhara_events.202.t
	desc = bukhara_events.202.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_farmers_meeting

	option = {
		log = "[GetLogInfo]: event bukhara_events.202 option bukhara_events.202.a"
		name = bukhara_events.202.a #
		swap_ideas = {
			remove_idea = BUK_struggling_bureaucracy
			add_idea = BUK_stagnant_bureaucracy_0
		}
		if = {
			limit = { has_idea = BUK_russian_economic_control_export_focus }
			swap_ideas = {
				remove_idea = BUK_russian_economic_control_export_focus
				add_idea = BUK_russian_economic_control_BM
			}
		}
		else_if = {
			limit = { has_idea = BUK_russian_economic_control }
			swap_ideas = {
				remove_idea = BUK_russian_economic_control
				add_idea = BUK_russian_economic_control_BM
			}
		}
		hidden_effect = {
			country_event = { id = bukhara_events.203 days = 5 }
			country_event = { id = bukhara_events.205 days = 25 }
		}
	}
}

country_event = { #Emergency Meeting of the Council of Ministers
	id = bukhara_events.203
	title = bukhara_events.203.t
	desc = bukhara_events.203.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_tashkent_banquet

	option = {
		log = "[GetLogInfo]: event bukhara_events.203 option bukhara_events.203.a"
		name = bukhara_events.203.a #We must bulk up our military!
		subtract_from_variable = {
			BUK_atalyk_anger = 1
			tooltip = BUK_traditionalist_increase_slight
		}
		add_to_variable = {
			BUK_russian_anger = 2
			tooltip = BUK_russian_decrease_moderate
		}
		add_to_variable = {
			BUK_yb_anger = 1
			tooltip = BUK_reformist_decrease_slight
		}
		set_country_flag = BUK_traditionalist_recovery_plan
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.203 option bukhara_events.203.b"
		name = bukhara_events.203.b #Cut red tape and tighten our belt
		subtract_from_variable = {
			BUK_yb_anger = 1
			tooltip = BUK_reformist_increase_slight
		}
		add_to_variable = {
			BUK_atalyk_anger = 2
			tooltip = BUK_traditionalist_decrease_moderate
		}
		add_to_variable = {
			BUK_russian_anger = 1
			tooltip = BUK_russian_decrease_slight
		}
		set_country_flag = BUK_reformist_recovery_plan
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.203 option bukhara_events.203.c"
		name = bukhara_events.203.c #Turn to the Russian advisory
		subtract_from_variable = {
			BUK_russian_anger = 1
			tooltip = BUK_russian_increase_slight
		}
		add_to_variable = {
			BUK_atalyk_anger = 2
			tooltip = BUK_traditionalist_decrease_moderate
		}
		add_to_variable = {
			BUK_yb_anger = 2
			tooltip = BUK_reformist_decrease_moderate
		}
		set_country_flag = BUK_russian_recovery_plan
	}
	after = {
		set_country_flag = BUK_emergency_council
	}
}

country_event = { #Mirza Nasrullah Assassinated
	id = bukhara_events.204
	title = bukhara_events.204.t
	desc = bukhara_events.204.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event bukhara_events.204 option bukhara_events.204.a"
		name = bukhara_events.204.a #
		add_to_variable = {
			BUK_yb_anger = 3
			tooltip = BUK_reformist_decrease_great
		}
		add_to_variable = {
			BUK_russian_anger = 3
			tooltip = BUK_russian_decrease_great
		}
		custom_effect_tooltip = tooltip_white_line
		add_stability = -0.1
		custom_effect_tooltip = tooltip_white_line
		retire_character = BUK_mirza_nasrullah
	}
}

country_event = { #Samarkand Notables Demand Action #t-220
	id = bukhara_events.205
	title = bukhara_events.205.t
	desc = bukhara_events.205.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_kokand_rally

	option = {
		name = bukhara_events.205.a
		log = "[GetLogInfo]: event bukhara_events.205 option bukhara_events.205.a"
		custom_effect_tooltip = BUK_tt_samarkand_demands
		custom_effect_tooltip = tooltip_white_line
		activate_mission = BUK_samarkand_timer
		hidden_effect = {
			country_event = { id = central_asian_crisis_events.401 days = 220 }
			country_event = { id = bukhara_events.206 days = 120 }
			country_event = { id = bukhara_events.207 days = 130 }
		}
	}
}

country_event = { #Military Figures Demand Action
	id = bukhara_events.206
	title = bukhara_events.206.t
	desc = bukhara_events.206.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_basmachi_squad

	option = {
		name = bukhara_events.206.a
		log = "[GetLogInfo]: event bukhara_events.206 option bukhara_events.206.a"
		activate_mission = BUK_traditionalist_timer
	}
}

country_event = { #The Stifled Majis Demands Action
	id = bukhara_events.207
	title = {
		text = bukhara_events.207.t.complete
		trigger = {
			has_completed_focus = BUK_manage_the_ministries
		}
	}
	title = {
		text = bukhara_events.207.t.normal
		trigger = {
			NOT = {
				has_completed_focus = BUK_manage_the_ministries
			}
		}
	}
	desc = {
		text = bukhara_events.207.d.complete
		trigger = {
			has_completed_focus = BUK_manage_the_ministries
		}
	}
	desc = {
		text = bukhara_events.207.d.normal
		trigger = {
			NOT = {
				has_completed_focus = BUK_manage_the_ministries
			}
		}
	}
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_tashkent_banquet

	option = {
		name = bukhara_events.207.a
		log = "[GetLogInfo]: event bukhara_events.207 option bukhara_events.207.a"
		trigger = {
			NOT = { has_completed_focus = BUK_manage_the_ministries }
		}
		activate_mission = BUK_reformists_timer
	}
	option = {
		name = bukhara_events.207.b
		log = "[GetLogInfo]: event bukhara_events.207 option bukhara_events.207.b"
		trigger = {
			has_completed_focus = BUK_manage_the_ministries
		}
		subtract_from_variable = {
			BUK_yb_anger = 1
			tooltip = BUK_reformist_increase_slight
		}
	}
}

country_event = { #Miller Meets with Mansurov
	id = bukhara_events.208
	title = bukhara_events.208.t
	desc = bukhara_events.208.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = bukhara_events.208.a #...storming out angrily
		log = "[GetLogInfo]: event bukhara_events.208 option bukhara_events.208.a"
		custom_effect_tooltip = BUK_tt_monlobby
		set_country_flag = BUK_monlobby_flag
	}

	option = {
		name = bukhara_events.208.b #...listening intently
		log = "[GetLogInfo]: event bukhara_events.208 option bukhara_events.208.b"
		custom_effect_tooltip = BUK_tt_replobby
		set_country_flag = BUK_replobby_flag
	}
}

country_event = { #Poor Quality Uniforms
	id = bukhara_events.209
	title = bukhara_events.209.t
	desc = bukhara_events.209.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_sullen_basmachi

	option = {
		name = bukhara_events.209.a #Replace these rags!
		log = "[GetLogInfo]: event bukhara_events.209 option bukhara_events.209.a"
		add_political_power = -30
		add_to_variable = {
			BUK_prep = 3
			tooltip = CA_prep_tooltip
		}
	}
	option = {
		name = bukhara_events.209.b #Looks are not everything...
		log = "[GetLogInfo]: event bukhara_events.209 option bukhara_events.209.b"
		add_to_variable = {
			BUK_prep = -3
			tooltip = CA_prep_tooltip
		}
	}
}

country_event = { #Merchants Beset by Bandits
	id = bukhara_events.210
	title = bukhara_events.210.t
	desc = bukhara_events.210.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_sullen_basmachi

	option = {
		name = bukhara_events.210.a #Supply arms for these caravans.
		log = "[GetLogInfo]: event bukhara_events.210 option bukhara_events.210.a"
		add_stability = 0.03
		add_manpower = -150
		add_to_variable = {
			BUK_prep = -3
			tooltip = CA_prep_tooltip
		}
	}
	option = {
		name = bukhara_events.210.b #They can hire their own protection!
		log = "[GetLogInfo]: event bukhara_events.210 option bukhara_events.210.b"
		add_stability = -0.02
	}
}

### Fired from Russian Annexation of TRK / KHI ###

country_event = { #Surviving the Samarkand Crisis
	id = bukhara_events.700
	title = bukhara_events.700.t
	desc = bukhara_events.700.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_bukhara_after_assault

	option = {
		name = bukhara_events.700.a
		log = "[GetLogInfo]: event bukhara_events.700 option bukhara_events.700.a"
		add_ideas = central_asia_economic_destruction_start
		add_ideas = central_asia_disorganized_military_0
		add_ideas = central_asia_banditry_and_dissent_1
		hidden_effect = {
			country_event = { id = bukhara_events.701 days = 3 }
		}
		set_country_flag = BUK_revolution_suppressed
	}
}

country_event = { #Game Pieces in the Great Game
	id = bukhara_events.701
	title = bukhara_events.701.t
	desc = bukhara_events.701.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = bukhara_events.701.a #Use our Russian allies to lobby Moscow!
		log = "[GetLogInfo]: event bukhara_events.701 option bukhara_events.701.a"
		trigger = {
			check_variable = { BUK_russian_anger < 10 }
		}
		ai_chance = { base = 0 }
		hidden_effect = {
			if = {
				limit = {
					check_variable = { BUK_russian_anger < 5 }
					has_country_flag = BUK_monlobby_flag
				}
				RUS = {
					set_country_flag = BUK_monlobby_flag
				}
			}
			else_if = {
				limit = {
					check_variable = { BUK_russian_anger < 5 }
					has_country_flag = BUK_replobby_flag
				}
				RUS = {
					set_country_flag = BUK_replobby_flag
				}
			}
			else = {
				RUS = {
					set_country_flag = BUK_autonomy_lobby_flag
				}
			}
		}
	}

	option = {
		name = bukhara_events.701.b #We will trust Moscow to make the right decisions.
		log = "[GetLogInfo]: event bukhara_events.701 option bukhara_events.701.b"
		trigger = {
			check_variable = { BUK_russian_anger < 10 }
		}
	}

	option = {
		name = bukhara_events.701.c #Unfortunately, we have no choice but to trust Moscow...
		log = "[GetLogInfo]: event bukhara_events.701 option bukhara_events.701.c"
		trigger = {
			check_variable = { BUK_russian_anger > 9 }
		}
	}

	after = {
		hidden_effect = {
			RUS = {
				country_event = bukhara_events.702
			}
		}
	}
}

country_event = { #Dealing with Central Asia
	id = bukhara_events.702
	title = bukhara_events.702.t
	desc = {
		text = bukhara_events.702.d.nolobby
		trigger = {
			NOT = {
				OR = {
					has_country_flag = BUK_replobby_flag
					has_country_flag = BUK_monlobby_flag
					has_country_flag = BUK_autonomy_lobby_flag
				}
			}
		}
	}
	desc = {
		text = bukhara_events.702.d.baselobby
		trigger = {
			has_country_flag = BUK_autonomy_lobby_flag
		}
	}
	desc = {
		text = bukhara_events.702.d.monlobby
		trigger = {
			has_country_flag = BUK_monlobby_flag
		}
	}
	desc = {
		text = bukhara_events.702.d.replobby
		trigger = {
			has_country_flag = BUK_replobby_flag
		}
	}
	is_triggered_only = yes
	fire_only_once = yes
	trigger = { has_socialist_government = no }

	option = {
		name = bukhara_events.702.a #This is too much work - annex them!
		log = "[GetLogInfo]: event bukhara_events.702 option bukhara_events.702.a"
		ai_chance = {
			base = 80
			modifier = {
				factor = 0
				has_soclib_or_socdem_government = yes
			}
			modifier = {
				add = -40
				has_liberal_government = yes
				NOT = { has_country_flag = BUK_monlobby_flag }
			}
			modifier = {
				factor = 0
				OR = {
					has_country_flag = BUK_autonomy_lobby_flag
					has_country_flag = BUK_replobby_flag
					has_country_flag = BUK_monlobby_flag
				}
			}
			modifier = {
				factor = 0
				BUK = {
					is_ai = no
					check_variable = {
						var = BUK_russian_anger
						value = 10
						compare = less_than
					}
				}
			}
		}
		BUK = { country_event = { id = bukhara_events.703 days = 2 } }
	}

	option = {
		name = bukhara_events.702.b #Grant them dominion over the region, and retain the Emir
		log = "[GetLogInfo]: event bukhara_events.702 option bukhara_events.702.b"
		ai_chance = {
			base = 40
			modifier = {
				factor = 0
				is_monarchy = no
				has_government = market_liberal
				NOT = { has_country_flag = BUK_monlobby_flag }
			}
			modifier = {
				factor = 0
				has_country_flag = RUS_ideocrat_ai
				NOT = { has_country_flag = BUK_monlobby_flag }
			}
			modifier = {
				factor = 0
				has_soclib_or_socdem_government = yes
				NOT = { has_country_flag = BUK_monlobby_flag }
			}
			modifier = {
				factor = 0
				has_government = national_populist
				NOT = { has_country_flag = BUK_monlobby_flag }
			}
			modifier = {
				factor = 0
				has_country_flag = BUK_replobby_flag
			}
		}
		if = {
			limit = { NOT = { country_exists = BUK } }
			set_temp_variable = { tag_to_release = BUK }
			hidden_effect = {
				annexations_reset_central_asian_tags = yes
				418 = { add_claim_by = var:tag_to_release } #Ashkhabad
				584 = { add_claim_by = var:tag_to_release } #Karakum
			}
			every_state = {
				limit = {
					is_central_asia = yes
					is_alash = no
					NOT = { state = 418 } #Ashkhabad
					NOT = { state = 584 } #Karakum
				}
				remove_claim_by = ROOT
				hidden_effect = { remove_claim_by = var:tag_to_release }
				add_core_of = var:tag_to_release
			}
			release_targeted_tag = yes
			var:tag_to_release = {
				set_cosmetic_tag = BUK_RUS
				set_capital = { state = 407 remember_old_capital = no } #Tashkent
			}
		}
		BUK = {
			set_country_flag = BUK_going_to_be_an_emirate_flag
			country_event = { id = bukhara_events.704 days = 2 }
		}
	}

	option = {
		name = bukhara_events.702.c #Forge a new Central Asian republic in our sphere!
		log = "[GetLogInfo]: event bukhara_events.702 option bukhara_events.702.c"
		ai_chance = {
			base = 40
			modifier = {
				factor = 0
				is_monarchy = yes
				has_government = market_liberal
				NOT = { has_country_flag = BUK_replobby_flag }
			}
			modifier = {
				factor = 0
				has_country_flag = BUK_monlobby_flag
			}
			modifier = {
				factor = 0
				has_country_flag = RUS_ideocrat_ai
				NOT = { has_country_flag = BUK_replobby_flag }
			}
			modifier = {
				factor = 0
				has_conservative_government = yes
				NOT = { has_country_flag = BUK_replobby_flag }
			}
			modifier = {
				factor = 0
				has_government = paternal_autocrat
				NOT = { has_country_flag = BUK_replobby_flag }
			}
		}
		if = {
			limit = { NOT = { country_exists = BUK } }
			set_temp_variable = { tag_to_release = BUK }
			hidden_effect = {
				annexations_reset_central_asian_tags = yes
				584 = { add_claim_by = var:tag_to_release } #Karakum
			}
			every_state = {
				limit = {
					is_central_asia = yes
					is_alash = no
					NOT = { state = 418 } #Ashkhabad
					NOT = { state = 584 } #Karakum
				}
				remove_claim_by = ROOT
				hidden_effect = { remove_claim_by = var:tag_to_release }
				add_core_of = var:tag_to_release
			}
			release_targeted_tag = yes
			var:tag_to_release = {
				set_cosmetic_tag = TRK_RUS
				set_capital = { state = 407 remember_old_capital = no } #Tashkent
			}
		}
		BUK = { country_event = { id = bukhara_events.704 days = 2 } }
	}
}

country_event = { #The Uneasy Silence
	id = bukhara_events.703
	title = bukhara_events.703.t
	desc = bukhara_events.703.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_KHI_railyard

	option = {
		name = bukhara_events.703.a
		log = "[GetLogInfo]: event bukhara_events.703 option bukhara_events.703.a"
		RUS = {
			annex_country = {
				target = BUK
				transfer_troops = no
			}
			every_owned_state = {
				limit = {
					is_core_of = BUK
					NOT = { is_core_of = RUS }
				}
				add_claim_by = RUS
				add_resistance = 20
			}
			if = {
				limit = {
					any_owned_state = {
						has_dynamic_modifier = { modifier = RUS_TRK_modifier }
					}
				}
				every_owned_state = {
					limit = {
						OR = {
							is_khiva = yes
							is_bukhara = yes
							is_turkestan = yes
						}
						NOT = { has_state_flag = turkestan_state }
						NOT = { state = 418 } #Ashkhabad
					}
					set_state_flag = turkestan_state
					add_dynamic_modifier = { modifier = RUS_TRK_modifier }
					add_compliance = 15
				}
			}
			change_tag_from = BUK
		}
	}
}

country_event = { #Russia Grants us Dominion
	id = bukhara_events.704
	title = bukhara_events.704.t
	desc = bukhara_events.704.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = bukhara_events.704.a
		log = "[GetLogInfo]: event bukhara_events.704 option bukhara_events.704.a"
		add_stability = 0.05
		add_political_power = 25
		RUS = {
			every_owned_state = {
				limit = {
					is_central_asia = yes
					is_alash = no
					NOT = { state = 418 } #Ashkhabad
					NOT = { state = 584 } #Karakum
				}
				remove_claim_by = RUS
				hidden_effect = { remove_claim_by = ROOT }
				add_core_of = ROOT
				transfer_state_to = ROOT
			}
		}
		584 = { add_claim_by = ROOT } #Karakum
		hidden_effect = {
			if = {
				limit = { has_country_flag = BUK_going_to_be_an_emirate_flag }
				country_event = { id = bukhara_events.705 days = 7 }
			}
			else = {
				country_event = { id = bukhara_events.706 days = 5 }
			}
			RUS = { country_event = { id = bukhara_events.711 days = 10 } }
		}
		set_country_flag = BUK_russians_done_flag
	}
}

country_event = { #The Grand Parade
	id = bukhara_events.705
	title = bukhara_events.705.t
	desc = bukhara_events.705.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = bukhara_events.705.a
		log = "[GetLogInfo]: event bukhara_events.705 option bukhara_events.705.a"
		drop_cosmetic_tag = yes
		set_cosmetic_tag = BUK_RUS #Emirate of Turkestan
		set_temp_variable = { ideology_change_var = 0.05 }
		add_war_support = 0.05
		change_ruling_party_popularity = yes
		set_country_flag = CA_internal_struggles_concluded
	}
}

country_event = { #Moscow Requests the Emir's Presence
	id = bukhara_events.706
	title = bukhara_events.706.t
	desc = bukhara_events.706.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_KHI_railyard

	option = {
		name = bukhara_events.706.a
		log = "[GetLogInfo]: event bukhara_events.706 option bukhara_events.706.a"
		hidden_effect = {
			country_event = { id = bukhara_events.707 days = 3 }
		}
	}
}

country_event = { #The [GetMonth] Putsch
	id = bukhara_events.707
	title = bukhara_events.707.t
	desc = bukhara_events.707.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_communards

	option = {
		name = bukhara_events.707.a
		log = "[GetLogInfo]: event bukhara_events.707 option bukhara_events.707.a"
		retire_character = BUK_ibrahim_bek
		retire_character = BUK_shahmurad_khan
		retire_character = BUK_mohammed_alim_khan
		drop_cosmetic_tag = yes
		set_cosmetic_tag = TRK_RUS #Republic of Turkestan
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.07
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -0.07
		}
		if = {
			limit = {
				RUS = { has_government = national_populist }
			}
			hidden_effect = {
				set_party_name = {
					ideology = national_populist
					name = BUK_nprep_national_populist_party
					long_name = BUK_nprep_national_populist_party_long
				}
				set_party_name = {
					ideology = social_liberal
					name = BUK_red_coup_social_liberal_party
					long_name = BUK_red_coup_social_liberal_party_long
				}
				set_party_name = {
					ideology = market_liberal
					name = BUK_nprep_start_market_liberal_party
					long_name = BUK_nprep_start_market_liberal_party_long
				}
				set_party_name = {
					ideology = social_democrat
					name = BUK_nprep_start_social_democrat_party
					long_name = BUK_nprep_start_social_democrat_party_long
				}
				BUK_mahmudkhodja_behbudiy = {
					add_country_leader_role = {
						country_leader = {
							desc = BUK_mahmudkhodja_behbudiy_leader_desc
							ideology = national_populist_subtype
							traits = { BUK_progressive_puppet }
						}
						promote_leader = yes
					}
				}
				set_politics = {
					ruling_party = national_populist
					elections_allowed = no
				}
				activate_advisor = BUK_filipp_panov_sic
				country_event = { id = bukhara_events.709 days = 5 }
			}
		}
		else = {
			set_politics = {
				ruling_party = social_liberal
				elections_allowed = no
			}
			hidden_effect = {
				set_party_name = {
					ideology = social_democrat
					name = BUK_rep_social_democrat_party
					long_name = BUK_rep_social_democrat_party_long
				}
				set_party_name = {
					ideology = social_liberal
					name = BUK_rep_social_liberal_party
					long_name = BUK_rep_social_liberal_party_long
				}
				set_party_name = {
					ideology = market_liberal
					name = BUK_rep_market_liberal_party
					long_name = BUK_rep_market_liberal_party_long
				}
				activate_advisor = BUK_munawwar_qori_sic
				country_event = { id = bukhara_events.710 days = 5 }
			}
		}
		hidden_effect = {
			RUS = {
				country_event = { id = bukhara_events.708 days = 7 }
			}
			if = {
				limit = { has_template = "Ibrahim Bek's Riders" }
				delete_unit_template_and_units = { division_template = "Ibrahim Bek's Riders" }
			}
		}
	}
}

country_event = { #Our New Regime in Turkestan
	id = bukhara_events.708
	title = bukhara_events.708.t
	desc = bukhara_events.708.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event bukhara_events.708 option bukhara_events.708.a"
		name = bukhara_events.708.a
		add_political_power = 25
	}
}

country_event = { #The Uncomfortable Diarchy
	id = bukhara_events.709
	title = bukhara_events.709.t
	desc = bukhara_events.709.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_tashkent_debate

	option = {
		log = "[GetLogInfo]: event bukhara_events.709 option bukhara_events.709.a"
		name = bukhara_events.709.a
		add_stability = -0.03
		add_popularity = {
			ideology = national_populist
			popularity = 0.07
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.07
		}
		add_ideas = BUK_the_uneasy_alliance_1
		set_country_flag = CA_internal_struggles_concluded
		mark_focus_tree_layout_dirty = yes
		hidden_effect = {
			if = {
				limit = { has_template = "Haydarqul Bey's Warriors" }
				set_division_template_lock = {
					division_template = "Haydarqul Bey's Warriors"
					is_locked = no
				}
			}
			if = {
				limit = { has_template = "Seyid Kasym Khan's Warriors" }
				custom_effect_tooltip = tooltip_white_line
				set_division_template_lock = {
					division_template = "Seyid Kasym Khan's Warriors"
					is_locked = no
				}
			}
		}
	}
}

country_event = { #Rise of the Republic!
	id = bukhara_events.710
	title = bukhara_events.710.t
	desc = bukhara_events.710.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_tashkent_debate

	option = {
		name = bukhara_events.710.a
		log = "[GetLogInfo]: event bukhara_events.710 option bukhara_events.710.a"
		add_stability = 0.03
		add_popularity = {
			ideology = social_liberal
			popularity = 0.1
		}
		set_country_flag = CA_internal_struggles_concluded
		mark_focus_tree_layout_dirty = yes
		hidden_effect = {
			if = {
				limit = { has_template = "Haydarqul Bey's Warriors" }
				set_division_template_lock = {
					division_template = "Haydarqul Bey's Warriors"
					is_locked = no
				}
			}
			if = {
				limit = { has_template = "Seyid Kasym Khan's Warriors" }
				set_division_template_lock = {
					division_template = "Seyid Kasym Khan's Warriors"
					is_locked = no
				}
				custom_effect_tooltip = tooltip_white_line
			}
		}
	}
}

country_event = { #Transcaspian Question #fires for RUS
	id = bukhara_events.711
	title = bukhara_events.711.t
	desc = bukhara_events.711.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = bukhara_events.711.a
		log = "[GetLogInfo]: event bukhara_events.711 option bukhara_events.711.a"
		ai_chance = { base = 75 }
		418 = { remove_claim_by = ROOT }
		584 = {
			remove_claim_by = ROOT
			add_core_of = BUK
			transfer_state_to = BUK
		}
		584 = { enable_state_integration_50_compliance = yes } #Karakum
	}
	option = {
		name = bukhara_events.711.b
		log = "[GetLogInfo]: event bukhara_events.711 option bukhara_events.711.b"
		ai_chance = { base = 25 }
	}
}

### Fired by Focus ###

country_event = { #Trouble with the Smallholders
	id = bukhara_events.1000
	title = bukhara_events.1000.t
	desc = bukhara_events.1000.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_happy_farmer

	immediate = {
		hidden_effect = {
			country_event = { id = bukhara_events.1005 days = 45 }
		}
	}

	option = {
		log = "[GetLogInfo]: event bukhara_events.1000 option bukhara_events.1000.a"
		name = bukhara_events.1000.a #Nip these communists in the bud
		subtract_from_variable = {
			BUK_russian_anger = 1
			tooltip = BUK_russian_increase_slight
		}
		add_to_variable = {
			BUK_yb_anger = 1
			tooltip = BUK_reformist_decrease_slight
		}
		custom_effect_tooltip = tooltip_white_line
		add_popularity = {
			ideology = radical_socialist popularity = -0.03
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1000 option bukhara_events.1000.b"
		name = bukhara_events.1000.b #Leave these farmers be
		subtract_from_variable = {
			BUK_yb_anger = 1
			tooltip = BUK_reformist_increase_slight
		}
		add_to_variable = {
			BUK_russian_anger = 1
			tooltip = BUK_russian_decrease_slight
		}
		custom_effect_tooltip = tooltip_white_line
		add_stability = 0.02
	}
}

country_event = { #Issues with the Officers
	id = bukhara_events.1001
	title = bukhara_events.1001.t
	desc = bukhara_events.1001.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_RUS_troops

	immediate = {
		hidden_effect = {
			country_event = { id = bukhara_events.1004 days = 45 }
		}
	}

	option = {
		log = "[GetLogInfo]: event bukhara_events.1001 option bukhara_events.1001.a"
		name = bukhara_events.1001.a #Keep the Russian advisors and guests in the mix
		subtract_from_variable = {
			BUK_russian_anger = 1
			tooltip = BUK_russian_increase_slight
		}
		add_to_variable = {
			BUK_atalyk_anger = 1
			tooltip = BUK_traditionalist_decrease_slight
		}
		custom_effect_tooltip = tooltip_white_line
		add_doctrine_cost_reduction = {
			name = bukhara_events.1001.t
			cost_reduction = 0.1
			uses = 1
			category = land_doctrine
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1001 option bukhara_events.1001.b"
		name = bukhara_events.1001.b #This is a celebration of Bukharan might, not Russian control!
		subtract_from_variable = {
			BUK_atalyk_anger = 1
			tooltip = BUK_traditionalist_increase_slight
		}
		add_to_variable = {
			BUK_russian_anger = 1
			tooltip = BUK_russian_decrease_slight
		}
		custom_effect_tooltip = tooltip_white_line
		add_war_support = 0.03
	}
}

country_event = { #Atalyk Alleges Corruption
	id = bukhara_events.1002
	title = bukhara_events.1002.t
	desc = bukhara_events.1002.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event bukhara_events.1002 option bukhara_events.1002.a"
		name = bukhara_events.1002.a #Allow Ibrahim Bek to run wild
		add_to_variable = {
			BUK_yb_anger = 1
			tooltip = BUK_reformist_decrease_slight
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1002 option bukhara_events.1002.b"
		name = bukhara_events.1002.b #Keep this limited and contained
		add_to_variable = {
			BUK_atalyk_anger = 1
			tooltip = BUK_traditionalist_decrease_slight
		}
	}
}

country_event = { #Issues of Bureaucratic Sovereignty
	id = bukhara_events.1003
	title = bukhara_events.1003.t
	desc = bukhara_events.1003.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event bukhara_events.1003 option bukhara_events.1003.a"
		name = bukhara_events.1003.a #Force them to hear out our economists
		add_to_variable = {
			BUK_russian_anger = 1
			tooltip = BUK_russian_decrease_slight
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1003 option bukhara_events.1003.b"
		name = bukhara_events.1003.b #Ignore these groaners and let the Russians work!
		add_to_variable = {
			BUK_yb_anger = 1
			tooltip = BUK_reformist_decrease_slight
		}
	}
}

country_event = { #Flight of the Barons
	id = bukhara_events.1004
	title = bukhara_events.1004.t
	desc = bukhara_events.1004.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_KHI_railyard

	option = {
		log = "[GetLogInfo]: event bukhara_events.1004 option bukhara_events.1004.a"
		name = bukhara_events.1004.a
		add_to_variable = {
			BUK_russian_anger = 1
			tooltip = BUK_russian_decrease_slight
		}
		custom_effect_tooltip = tooltip_white_line
		add_political_power = -15
	}
}

country_event = { #Grumbling Among the Officers
	id = bukhara_events.1005
	title = bukhara_events.1005.t
	desc = bukhara_events.1005.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_basmachi_horsemen

	option = {
		log = "[GetLogInfo]: event bukhara_events.1005 option bukhara_events.1005.a"
		name = bukhara_events.1005.a
		add_to_variable = {
			BUK_atalyk_anger = 1
			tooltip = BUK_traditionalist_decrease_slight
		}
		custom_effect_tooltip = tooltip_white_line
		army_experience = -5
	}
}

country_event = { #Report from the Officers
	id = bukhara_events.1006
	title = bukhara_events.1006.t
	desc = bukhara_events.1006.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_bukhara_platoon

	option = {
		log = "[GetLogInfo]: event bukhara_events.1006 option bukhara_events.1006.a"
		name = bukhara_events.1006.a #pay off the officers
		subtract_from_variable = {
			BUK_atalyk_anger = 1
			tooltip = BUK_traditionalist_increase_slight
		}
		army_experience = 15
		add_political_power = -75
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1006 option bukhara_events.1006.b"
		name = bukhara_events.1006.b #we can't afford it
		add_to_variable = {
			BUK_atalyk_anger = 2
			tooltip = BUK_traditionalist_decrease_moderate
		}
	}
}

country_event = { #A Meeting with the Old Notables
	id = bukhara_events.1007
	title = bukhara_events.1007.t
	desc = bukhara_events.1007.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_basmachi_riders

	option = {
		log = "[GetLogInfo]: event bukhara_events.1007 option bukhara_events.1007.a"
		name = bukhara_events.1007.a #their support is worth it
		add_to_variable = {
			BUK_atalyk_anger = 2
			tooltip = BUK_traditionalist_decrease_moderate
		}
		add_manpower = 1500
		swap_ideas = {
			remove_idea = BUK_tribal_auxiliaries
			add_idea = BUK_tribal_auxiliaries_expanded
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1007 option bukhara_events.1007.b"
		name = bukhara_events.1007.b #the enemy of my friend is my enemy
		add_popularity = {
			ideology = paternal_autocrat popularity = 0.03
		}
	}
}

country_event = { #Handling the 'Miller Qazis'
	id = bukhara_events.1008
	title = bukhara_events.1008.t
	desc = bukhara_events.1008.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_bukharan_elders

	option = {
		log = "[GetLogInfo]: event bukhara_events.1008 option bukhara_events.1008.a"
		name = bukhara_events.1008.a #they are dangerous heretics
		subtract_from_variable = {
			BUK_atalyk_anger = 1
			tooltip = BUK_traditionalist_increase_slight
		}
		add_to_variable = {
			BUK_yb_anger = 1
			tooltip = BUK_reformist_decrease_slight
		}
		add_popularity = {
			ideology = paternal_autocrat popularity = 0.02
		}
		swap_ideas = {
			remove_idea = BUK_ulemma_support
			add_idea = BUK_ulemma_support_conservative
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1008 option bukhara_events.1008.b"
		name = bukhara_events.1008.b #they have served reasonably
		subtract_from_variable = {
			BUK_yb_anger = 1
			tooltip = BUK_reformist_increase_slight
		}
		add_to_variable = {
			BUK_atalyk_anger = 1
			tooltip = BUK_traditionalist_decrease_slight
		}
		add_popularity = {
			ideology = social_conservative popularity = 0.02
		}
		swap_ideas = {
			remove_idea = BUK_ulemma_support
			add_idea = BUK_ulemma_support_moderate
		}
	}
}

country_event = { #shuffling up the Parvanchi (master of ceremonies) and Toqsababashi (chief of the standard)
	id = bukhara_events.1009
	title = bukhara_events.1009.t
	desc = bukhara_events.1009.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_ark_of_bukhara

	option = {
		log = "[GetLogInfo]: event bukhara_events.1009 option bukhara_events.1009.a"
		name = bukhara_events.1009.a #rid ourselves of these corrupt parasites
		add_to_variable = {
			BUK_yb_anger = 1
			tooltip = BUK_reformist_decrease_slight
		}
		if = {
			limit = { has_idea = BUK_ministers_sec }
			swap_ideas = {
				remove_idea = BUK_ministers_sec
				add_idea = BUK_ministers_pol_sec
			}
		}
		else_if = {
			limit = { has_idea = BUK_ministers_mil }
			swap_ideas = {
				remove_idea = BUK_ministers_mil
				add_idea = BUK_ministers_pol_mil
			}
		}
		else_if = {
			limit = { has_idea = BUK_ministers_sec_mil }
			swap_ideas = {
				remove_idea = BUK_ministers_sec_mil
				add_idea = BUK_ministers_all
			}
		}
		else = {
			add_ideas = BUK_ministers_pol
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1009 option bukhara_events.1009.b"
		name = bukhara_events.1009.b #they have too many allies among the majlis
	}
}

country_event = { #shuffling up the Mir Akhor (master of the horse) and Qaraulbegi (chief of the guards)
	id = bukhara_events.1010
	title = bukhara_events.1010.t
	desc = bukhara_events.1010.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_ark_of_bukhara

	option = {
		log = "[GetLogInfo]: event bukhara_events.1010 option bukhara_events.1010.a"
		name = bukhara_events.1010.a #cast out these ancient men
		add_to_variable = {
			BUK_atalyk_anger = 1
			tooltip = BUK_traditionalist_decrease_slight
		}
		if = {
			limit = { has_idea = BUK_ministers_pol }
			swap_ideas = {
				remove_idea = BUK_ministers_pol
				add_idea = BUK_ministers_pol_mil
			}
		}
		else_if = {
			limit = { has_idea = BUK_ministers_sec }
			swap_ideas = {
				remove_idea = BUK_ministers_sec
				add_idea = BUK_ministers_sec_mil
			}
		}
		else_if = {
			limit = { has_idea = BUK_ministers_pol_sec }
			swap_ideas = {
				remove_idea = BUK_ministers_pol_sec
				add_idea = BUK_ministers_all
			}
		}
		else = {
			add_ideas = BUK_ministers_mil
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1010 option bukhara_events.1010.b"
		name = bukhara_events.1010.b #the traditionalists would be furious
	}
}

country_event = { #shuffling up the Mirzabashi (chief secretary)
	id = bukhara_events.1011
	title = bukhara_events.1011.t
	desc = bukhara_events.1011.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_ark_of_bukhara

	option = {
		log = "[GetLogInfo]: event bukhara_events.1011 option bukhara_events.1011.a"
		name = bukhara_events.1011.a #remove the Russian's puppet
		add_to_variable = {
			BUK_russian_anger = 1
			tooltip = BUK_russian_decrease_slight
		}
		if = {
			limit = { has_idea = BUK_ministers_pol }
			swap_ideas = {
				remove_idea = BUK_ministers_pol
				add_idea = BUK_ministers_pol_sec
			}
		}
		else_if = {
			limit = { has_idea = BUK_ministers_mil }
			swap_ideas = {
				remove_idea = BUK_ministers_mil
				add_idea = BUK_ministers_sec_mil
			}
		}
		else_if = {
			limit = { has_idea = BUK_ministers_pol_mil }
			swap_ideas = {
				remove_idea = BUK_ministers_pol_mil
				add_idea = BUK_ministers_all
			}
		}
		else = {
			add_ideas = BUK_ministers_sec
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1011 option bukhara_events.1011.b"
		name = bukhara_events.1011.b #we cannot afford to upset our allies
	}
}

country_event = { #The Anti-Atalyk Pact
	id = bukhara_events.1012
	title = bukhara_events.1012.t
	desc = bukhara_events.1012.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_bukharan_elders

	option = {
		log = "[GetLogInfo]: event bukhara_events.1012 option bukhara_events.1012.a"
		name = bukhara_events.1012.a #We must concede to this alliance
		hidden_effect = {
			country_event = { id = bukhara_events.1014 days = 5 }
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1012 option bukhara_events.1012.b"
		name = bukhara_events.1012.b #all the more reason to place our trust in Ibrahim Bek!
		hidden_effect = {
			country_event = { id = bukhara_events.1015 days = 5 }
		}
	}
}

country_event = { #New Chairman of the Majlis
	id = bukhara_events.1013
	title = bukhara_events.1013.t
	desc = bukhara_events.1013.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_town_crier

	option = {
		log = "[GetLogInfo]: event bukhara_events.1013 option bukhara_events.1013.a"
		name = bukhara_events.1013.a #Munawwar Qari
		activate_advisor = BUK_munawwar_qori_sic
		custom_effect_tooltip = tooltip_white_line
		add_popularity = {
			ideology = social_conservative popularity = 0.03
		}
		add_popularity = {
			ideology = social_liberal popularity = 0.06
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1013 option bukhara_events.1013.b"
		name = bukhara_events.1013.b #Muhiddin Mansurov
		activate_advisor = BUK_muhiddin_mansurov_sic
		custom_effect_tooltip = tooltip_white_line
		add_popularity = {
			ideology = social_conservative popularity = 0.03
		}
		add_popularity = {
			ideology = social_liberal popularity = 0.03
		}
		add_popularity = {
			ideology = market_liberal popularity = 0.03
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1013 option bukhara_events.1013.c"
		name = bukhara_events.1013.c #Sadriddin Ayni
		activate_advisor = BUK_sadriddin_ayni_sic
		custom_effect_tooltip = tooltip_white_line
		add_popularity = {
			ideology = social_conservative popularity = 0.03
		}
		add_popularity = {
			ideology = market_liberal popularity = 0.06
		}
	}
	after = {
		set_temp_variable = { coalition_partner_var = token:social_democrat }
		add_to_coalition = yes
		set_temp_variable = { coalition_partner_var = token:social_liberal }
		add_to_coalition = yes
		set_temp_variable = { coalition_partner_var = token:market_liberal }
		add_to_coalition = yes
	}
}

country_event = { #The Emir Acquiesces
	id = bukhara_events.1014
	title = bukhara_events.1014.t
	desc = bukhara_events.1014.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_town_crier

	option = {
		log = "[GetLogInfo]: event bukhara_events.1014 option bukhara_events.1014.a"
		name = bukhara_events.1014.a #
		add_stability = -0.05
		add_popularity = {
			ideology = paternal_autocrat popularity = -0.07
		}
		set_country_flag = BUK_flag_not_emir_right_hand
	}
}

country_event = { #The Velvet Purge
	id = bukhara_events.1015
	title = bukhara_events.1015.t
	desc = bukhara_events.1015.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_town_crier

	option = {
		log = "[GetLogInfo]: event bukhara_events.1015 option bukhara_events.1015.a"
		name = bukhara_events.1015.a #
		add_to_variable = {
			BUK_yb_anger = 2
			tooltip = BUK_reformist_decrease_moderate
		}
		add_to_variable = {
			BUK_russian_anger = 2
			tooltip = BUK_russian_decrease_moderate
		}
		add_popularity = {
			ideology = paternal_autocrat popularity = 0.1
		}
		add_popularity = {
			ideology = social_conservative popularity = -0.03
		}
		add_popularity = {
			ideology = social_liberal popularity = -0.03
		}
		set_country_flag = BUK_flag_emir_right_hand
	}
}

country_event = { #Crafting a New Constitution
	id = bukhara_events.1016
	title = bukhara_events.1016.t
	desc = bukhara_events.1016.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_tashkent_banquet

	option = {
		log = "[GetLogInfo]: event bukhara_events.1016 option bukhara_events.1016.a"
		name = bukhara_events.1016.a #Go with the more extensive version
		hidden_effect = {
			country_event = { id = bukhara_events.1019 days = 5 }
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1016 option bukhara_events.1016.b"
		name = bukhara_events.1016.b #Listen to the Kushbeggi's suggestions
		hidden_effect = {
			country_event = { id = bukhara_events.1021 days = 5 }
		}
	}
}

country_event = { #The Kushbeggi's Conundrum
	id = bukhara_events.1017
	title = bukhara_events.1017.t
	desc = bukhara_events.1017.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event bukhara_events.1017 option bukhara_events.1017.a"
		name = bukhara_events.1017.a #Stick to our guns
		hidden_effect = {
			country_event = { id = bukhara_events.1023 days = 5 }
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1017 option bukhara_events.1017.b"
		name = bukhara_events.1017.b #Take the liberals into account
		hidden_effect = {
			country_event = { id = bukhara_events.1021 days = 5 }
		}
	}
}

country_event = { #Dealing with the Constitutional Question
	id = bukhara_events.1018
	title = bukhara_events.1018.t
	desc = bukhara_events.1018.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_basmachi_horsemen

	option = {
		log = "[GetLogInfo]: event bukhara_events.1018 option bukhara_events.1018.a"
		name = bukhara_events.1018.a #Draft a constitution solidifying our grasp
		hidden_effect = {
			country_event = { id = bukhara_events.1025 days = 5 }
		}
	}
	option = {
		log = "[GetLogInfo]: event bukhara_events.1018 option bukhara_events.1018.b"
		name = bukhara_events.1018.b #We rule through divine might, not witches' words!
		add_stability = 0.05
		add_war_support = 0.05
		add_popularity = {
			ideology = paternal_autocrat popularity = 0.1
		}
	}
}

country_event = { #The Bukharan Constitution, Part 1 (democratic)
	id = bukhara_events.1019
	title = bukhara_events.1019.t
	desc = bukhara_events.1019.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_generic_diplomacy1

	option = {
		log = "[GetLogInfo]: event bukhara_events.1019 option bukhara_events.1019.a"
		name = bukhara_events.1019.a #
		swap_ideas = {
			remove_idea = BUK_beholden_governors
			add_idea = BUK_dem_constitution_1
		}
		hidden_effect = {
			country_event = { id = bukhara_events.1020 days = 3 }
		}
	}
}

country_event = { #The Bukharan Constitution, Part 2 (democratic)
	id = bukhara_events.1020
	title = bukhara_events.1020.t
	desc = bukhara_events.1020.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_generic_diplomacy1

	option = {
		log = "[GetLogInfo]: event bukhara_events.1020 option bukhara_events.1020.a"
		name = bukhara_events.1020.a #
		swap_ideas = {
			remove_idea = BUK_dem_constitution_1
			add_idea = BUK_dem_constitution_2
		}
	}
}

country_event = { #The Bukharan Constitution, Part 1 (compromise)
	id = bukhara_events.1021
	title = bukhara_events.1021.t
	desc = bukhara_events.1021.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_generic_diplomacy1

	option = {
		log = "[GetLogInfo]: event bukhara_events.1021 option bukhara_events.1021.a"
		name = bukhara_events.1021.a #
		if = {
			limit = { has_government = social_conservative }
			swap_ideas = {
				remove_idea = BUK_beholden_governors
				add_idea = BUK_mixed_constitution_dem_1
			}
		}
		if = {
			limit = { has_government = authoritarian_democrat }
			swap_ideas = {
				remove_idea = BUK_beyliks_improved
				add_idea = BUK_mixed_constitution_kush_1
			}
		}
		hidden_effect = {
			country_event = { id = bukhara_events.1022 days = 3 }
		}
	}
}

country_event = { #The Bukharan Constitution, Part 2 (compromise)
	id = bukhara_events.1022
	title = bukhara_events.1022.t
	desc = bukhara_events.1022.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_generic_diplomacy1

	option = {
		log = "[GetLogInfo]: event bukhara_events.1022 option bukhara_events.1022.a"
		name = bukhara_events.1022.a #
		if = {
			limit = { has_government = social_conservative }
			swap_ideas = {
				remove_idea = BUK_mixed_constitution_dem_1
				add_idea = BUK_mixed_constitution_dem_2
			}
		}
		if = {
			limit = { has_government = authoritarian_democrat }
			swap_ideas = {
				remove_idea = BUK_mixed_constitution_kush_1
				add_idea = BUK_mixed_constitution_kush_2
			}
		}
	}
}

country_event = { #The Bukharan Constitution, Part 1 (kushbeggi)
	id = bukhara_events.1023
	title = bukhara_events.1023.t
	desc = bukhara_events.1023.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_generic_diplomacy1

	option = {
		log = "[GetLogInfo]: event bukhara_events.1023 option bukhara_events.1023.a"
		name = bukhara_events.1023.a #
		swap_ideas = {
			remove_idea = BUK_beyliks_improved
			add_idea = BUK_kushbeggi_constitution_1
		}
		hidden_effect = {
			country_event = { id = bukhara_events.1024 days = 3 }
		}
	}
}

country_event = { #The Bukharan Constitution, Part 2 (kushbeggi)
	id = bukhara_events.1024
	title = bukhara_events.1024.t
	desc = bukhara_events.1024.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_generic_diplomacy1

	option = {
		log = "[GetLogInfo]: event bukhara_events.1024 option bukhara_events.1024.a"
		name = bukhara_events.1024.a #
		swap_ideas = {
			remove_idea = BUK_kushbeggi_constitution_1
			add_idea = BUK_kushbeggi_constitution_2
		}
	}
}

country_event = { #The Bukharan Constitution, Part 1 (authoritarian)
	id = bukhara_events.1025
	title = bukhara_events.1025.t
	desc = bukhara_events.1025.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_generic_diplomacy1

	option = {
		log = "[GetLogInfo]: event bukhara_events.1025 option bukhara_events.1025.a"
		name = bukhara_events.1025.a #
		swap_ideas = {
			remove_idea = BUK_beyliks_improved
			add_idea = BUK_auth_constitution_1
		}
		hidden_effect = {
			country_event = { id = bukhara_events.1026 days = 3 }
		}
	}
}

country_event = { #The Bukharan Constitution, Part 2 (authoritarian)
	id = bukhara_events.1026
	title = bukhara_events.1026.t
	desc = bukhara_events.1026.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_generic_diplomacy1

	option = {
		log = "[GetLogInfo]: event bukhara_events.1026 option bukhara_events.1026.a"
		name = bukhara_events.1026.a #
		swap_ideas = {
			remove_idea = BUK_auth_constitution_1
			add_idea = BUK_auth_constitution_2
		}
		custom_effect_tooltip = BUK_auth_constitution_natpop_tt
		hidden_effect = {
			add_popularity = {
				ideology = paternal_autocrat popularity = -0.15
			}
			add_popularity = {
				ideology = national_populist popularity = 0.15
			}
			set_party_name = {
				ideology = national_populist
				name = BUK_constitutional_national_populist_party
				long_name = BUK_constitutional_national_populist_party_long
			}
			set_politics = {
				ruling_party = national_populist
				elections_allowed = no
			}
			set_temp_variable = { coalition_partner_var = token:paternal_autocrat }
			add_to_coalition = yes
			BUK_mohammed_alim_khan = {
				add_country_leader_role = {
					country_leader = {
						desc = BUK_mohammed_alim_khan_leader_desc
						ideology = national_populist_subtype
					}
					promote_leader = yes
				}
			}

			set_temp_variable = { BUK_new_authdem = BUK.party_popularity_100@authoritarian_democrat }
			divide_temp_variable = { BUK_new_authdem = 2 }

			set_temp_variable = { BUK_new_pataut = BUK.party_popularity_100@paternal_autocrat }
			divide_temp_variable = { BUK_new_pataut = 2 }

			set_temp_variable = { BUK_new_natpop = BUK.party_popularity_100@national_populist }
			add_to_temp_variable = { BUK_new_natpop = BUK_new_authdem }
			add_to_temp_variable = { BUK_new_natpop = BUK_new_pataut }

			set_temp_variable = { sum = 100 }
			subtract_from_temp_variable = { sum = party_popularity_100@totalist }
			subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
			subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
			subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
			subtract_from_temp_variable = { sum = party_popularity_100@social_liberal }
			subtract_from_temp_variable = { sum = party_popularity_100@market_liberal }
			subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
			subtract_from_temp_variable = { sum = BUK_new_authdem }
			subtract_from_temp_variable = { sum = BUK_new_pataut }
			subtract_from_temp_variable = { sum = BUK_new_natpop }

			add_to_temp_variable = { BUK_new_natpop = sum } #avoid rounding errors

			set_popularities = {
				totalist = party_popularity_100@totalist
				syndicalist = party_popularity_100@syndicalist
				radical_socialist = party_popularity_100@radical_socialist
				social_democrat = party_popularity_100@social_democrat
				social_liberal = party_popularity_100@social_liberal
				market_liberal = party_popularity_100@market_liberal
				social_conservative = party_popularity_100@social_conservative
				authoritarian_democrat = BUK_new_authdem
				paternal_autocrat = BUK_new_pataut
				national_populist = BUK_new_natpop
			}
		}
	}
}

country_event = { #Petitioning Russia for True Independence
	id = bukhara_events.1027
	title = bukhara_events.1027.t
	desc = bukhara_events.1027.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event bukhara_events.1027 option bukhara_events.1027.a"
		name = bukhara_events.1027.a #Request greater independence
		add_political_power = -25
		hidden_effect = {
			RUS = {
				country_event = { id = bukhara_events.1028 days = 3 }
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event bukhara_events.1027 option bukhara_events.1027.b"
		name = bukhara_events.1027.b #Offer compensation for independence
		add_political_power = -150
		hidden_effect = {
			RUS = {
				set_country_flag = buk_good_deal_flag
				country_event = { id = bukhara_events.1028 days = 3 }
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event bukhara_events.1027 option bukhara_events.1027.c"
		name = bukhara_events.1027.c #Why even bother bothering them?
		add_stability = 0.03
	}
}

country_event = { #Our Turkestani Allies Demand Greater Independence
	id = bukhara_events.1028
	title = bukhara_events.1028.t
	desc = bukhara_events.1028.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event bukhara_events.1028 option bukhara_events.1028.a"
		name = bukhara_events.1028.a #Grant them their request
		ai_chance = {
			base = 1
			modifier = {
				factor = 100
				has_country_flag = buk_good_deal_flag
			}
			modifier = {
				factor = 0
				NOT = { has_country_flag = buk_good_deal_flag }
			}
		}
		if = {
			limit = { has_country_flag = buk_good_deal_flag }
			clr_country_flag = buk_good_deal_flag
			add_political_power = 25
		}
		else = {
			add_political_power = -25
		}
		BUK = { get_current_government_type = yes }
		set_autonomy = { target = BUK autonomy_state = nominal_puppet end_wars = no }
		BUK = { restore_previous_government_type = yes }
		hidden_effect = {
			BUK = {
				country_event = { id = bukhara_events.1029 days = 3 }
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event bukhara_events.1028 option bukhara_events.1028.b"
		name = bukhara_events.1028.b #Absolutely not!
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_country_flag = buk_good_deal_flag
			}
			modifier = {
				factor = 100
				NOT = { has_country_flag = buk_good_deal_flag }
			}
		}
		hidden_effect = {
			BUK = {
				country_event = { id = bukhara_events.1030 days = 3 }
			}
		}
	}
}

country_event = { #Russia Withdraws Some Tendrils of Control
	id = bukhara_events.1029
	title = bukhara_events.1029.t
	desc = bukhara_events.1029.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event bukhara_events.1029 option bukhara_events.1029.a"
		name = bukhara_events.1029.a #
		add_political_power = 25
		add_stability = 0.05
		effect_tooltip = {
			RUS = {
				set_autonomy = { target = BUK autonomy_state = nominal_puppet end_wars = no }
			}
		}
	}
}

country_event = { #Russia Denies us our Requests
	id = bukhara_events.1030
	title = bukhara_events.1030.t
	desc = bukhara_events.1030.d
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event bukhara_events.1030 option bukhara_events.1030.a"
		name = bukhara_events.1030.a #Then we must stand down...
		add_political_power = -25
		add_stability = -0.05
	}
}

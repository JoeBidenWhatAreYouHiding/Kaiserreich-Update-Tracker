###########################
# Galicia Events
###########################
# By ~mw~
###########################

add_namespace = galicia_events

country_event = { #Galicia wants to join Poland
	id = galicia_events.2
	title = galicia_events.2.t
	desc = galicia_events.2.d

	is_triggered_only = yes

	fire_only_once = yes

	option = { #excellent
		log = "[GetLogInfo]: event galicia_events.2 option galicia_events.2.a"
		name = galicia_events.2.a
		ai_chance = {
			base = 10
			modifier = {
				add = 10
				UKR = { has_authoritarian_government = yes }
			}
		}
		POL_galicia_joins_poland = yes
		annex_country = {
			target = GAL
			transfer_troops = yes
		}
	}
	option = { #excellent (with UKR)
		log = "[GetLogInfo]: event galicia_events.2 option galicia_events.2.b"
		name = galicia_events.2.b
		trigger = {
			UKR = { ROOT_can_grant_land = yes }
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 10
				UKR = { has_democratic_government = yes }
			}
		}
		POL_galicia_joins_poland_ukraine = yes
		annex_country = {
			target = GAL
			transfer_troops = yes
		}
	}
}

# Overlord of POL and GAL: Galicia wishes to unite with Poland
country_event = {
	id = galicia_events.3
	title = galicia_events.3.t
	desc = galicia_events.3.d
	picture = GFX_report_event_spain_civil_war_soldiers

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event galicia_events.3 option galicia_events.3.a"
		name = galicia_events.3.a
		ai_chance = { base = 100 }
		FROM = { country_event = { id = galicia_events.4 hours = 8 } }
	}

	option = {
		log = "[GetLogInfo]: event galicia_events.3 option galicia_events.3.b"
		name = galicia_events.3.b
		ai_chance = { base = 0 }
		FROM = { country_event = { id = galicia_events.5 hours = 8 } }
	}
}

# Galicia: Overlord approves union
country_event = {
	id = galicia_events.4
	title = galicia_events.4.t
	desc = galicia_events.4.d
	picture = GFX_report_event_spain_civil_war_soldiers

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event galicia_events.4 option galicia_events.4.a"
		name = galicia_events.4.a
		POL = { country_event = { id = galicia_events.2 hours = 8 } }
	}
}

# Galicia: Overlord denies union
country_event = {
	id = galicia_events.5
	title = galicia_events.5.t
	desc = galicia_events.5.d
	picture = GFX_report_event_spain_civil_war_soldiers

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event galicia_events.5 option galicia_events.5.a"
		name = galicia_events.5.a
		reverse_add_opinion_modifier = { target = FROM modifier = KR_hates_govt }
	}
}

#Poland: Galician Poles join POL
country_event = {
	id = galicia_events.6
	title = galicia_events.6.t
	desc = galicia_events.6.d

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		NOT = { country_exists = GAL }
		owns_any_state_of = {
			88 #Krakow
			91 #Lwow
		}
		GAL = { any_character = { has_character_flag = GAL_polish_character } }
	}

	immediate = {
		hidden_effect = {
			GAL = {
				GAL_remove_karl_albrecht = yes
				GAL_characters_join_poland_effect = yes
			}
		}
	}

	option = { # Wish him luck
		log = "[GetLogInfo]: event galicia_events.6 option galicia_events.6.a"
		name = galicia_events.6.a
		custom_effect_tooltip = characters_will_be_recruited
		character_list_tooltip = {
			limit = { has_character_flag = GAL_polish_character }
		}
		hidden_effect = {
			every_character = { clr_character_flag = GAL_polish_character }
			UKR = { country_event = galicia_events.8 }
		}
	}
}

country_event = { # Albrecht Elected as King of Poland
	id = galicia_events.7
	title = galicia_events.7.t
	desc = galicia_events.7.d

	is_triggered_only = yes

	option = { # Wish him luck
		log = "[GetLogInfo]: event galicia_events.7 option galicia_events.7.a"
		name = galicia_events.7.a
		add_political_power = 10
		GAL_wladyslaw_sikorski = {
			promote_character = social_conservative_subtype
			promote_leader = yes
		}
	}
}

#Ukraine: Galician Ukrainians join UKR
country_event = {
	id = galicia_events.8
	title = galicia_events.8.t
	desc = galicia_events.8.d

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		NOT = { country_exists = GAL }
		owns_any_state_of = {
			89 #Stanislawow
			91 #Lwow
		}
		GAL = { any_character = { has_character_flag = GAL_ukrainian_character } }
	}

	immediate = {
		hidden_effect = {
			GAL = {
				GAL_remove_karl_albrecht = yes
				GAL_characters_join_ukraine_effect = yes
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event galicia_events.8 option galicia_events.8.a"
		name = galicia_events.8.a
		custom_effect_tooltip = characters_will_be_recruited
		character_list_tooltip = {
			limit = { has_character_flag = GAL_ukrainian_character }
		}
		hidden_effect = {
			every_character = { clr_character_flag = GAL_ukrainian_character }
			POL = { country_event = galicia_events.6 }
		}
	}
}

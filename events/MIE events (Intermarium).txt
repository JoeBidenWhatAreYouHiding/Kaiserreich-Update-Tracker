###Events for Intermarium Cooperation (MIE)
###Coded by Augenis

add_namespace = intermarium_events

country_event = { # Eastern European Cooperation begins
	id = intermarium_events.0
	title = intermarium_events.0.t
	desc = intermarium_events.0.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.0 option intermarium_events.0.a"
		name = intermarium_events.0.a
		unlock_decision_category_tooltip = MIE_decisions
	}
}
country_event = { # BLR event about Ostwall construction
	id = intermarium_events.1
	title = intermarium_events.1.t
	desc = intermarium_events.1.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.1 option intermarium_events.1.a"
		name = intermarium_events.1.a
		207 = { #Braslav
			custom_override_tooltip = {
				add_building_construction = {
					type = bunker
					province = {
						all_provinces = yes
						limit_to_border_country = RUS
					}
					level = 1
					instant_build = yes
				}
				tooltip = {
					localization_key = tooltip_add_building_on_border_provinces_with_tag
					BUILDING = bunker
					NUMBER = 1
					TAG = "[RUS.GetTag]"
				}
			}
		}
		1087 = { #Mohilev
			custom_override_tooltip = {
				add_building_construction = {
					type = bunker
					province = {
						all_provinces = yes
						limit_to_border_country = RUS
					}
					level = 1
					instant_build = yes
				}
				tooltip = {
					localization_key = tooltip_add_building_on_border_provinces_with_tag
					BUILDING = bunker
					NUMBER = 1
					TAG = "[RUS.GetTag]"
				}
			}
		}
		194 = { #Mozyr
			custom_override_tooltip = {
				add_building_construction = {
					type = bunker
					province = {
						all_provinces = yes
						limit_to_border_country = RUS
					}
					level = 1
					instant_build = yes
				}
				tooltip = {
					localization_key = tooltip_add_building_on_border_provinces_with_tag
					BUILDING = bunker
					NUMBER = 1
					TAG = "[RUS.GetTag]"
				}
			}
		}
	}
}
country_event = { # event about offensive exercises
	id = intermarium_events.2
	title = intermarium_events.2.t
	desc = intermarium_events.2.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.2 option intermarium_events.2.a"
		name = intermarium_events.2.a
		if = {
			limit = {
				any_army_leader = { has_trait = panzer_leader }
			}
			every_army_leader = {
				limit = { has_trait = panzer_leader }
				add_attack = 1
			}
		}
		else = {
			army_experience = 20
		}
	}
}
country_event = { # event about planning
	id = intermarium_events.3
	title = intermarium_events.3.t
	desc = intermarium_events.3.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.3 option intermarium_events.3.a"
		name = intermarium_events.3.a
		if = {
			limit = {
				any_army_leader = { has_trait = infantry_leader }
			}
			every_army_leader = {
				limit = { has_trait = infantry_leader }
				add_planning = 1
			}
		}
		else = {
			army_experience = 20
		}
	}
}
country_event = { # event about defense contributions
	id = intermarium_events.4
	title = intermarium_events.4.t
	desc = intermarium_events.4.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	trigger = {
		NOT = {
			tag = MIE
			has_idea = MIE_contributions
		}
	}

	option = {
		log = "[GetLogInfo]: event intermarium_events.4 option intermarium_events.4.a"
		name = intermarium_events.4.a
		ai_chance = { base = 100 }
		add_ideas = MIE_contributions
		add_to_variable = { global.MIE_infantry_equipment_monthly = 30 }
		add_to_variable = { global.MIE_support_equipment_monthly = 15 }
		add_to_variable = { global.MIE_artillery_equipment_monthly = 5 }
		custom_effect_tooltip = MIE_defense_contributions_tt
	}
	option = {
		log = "[GetLogInfo]: event intermarium_events.4 option intermarium_events.4.b"
		name = intermarium_events.4.b
		ai_chance = { base = 0 }
	}
}
country_event = { # event about infantry eq shipments
	id = intermarium_events.5
	title = intermarium_events.5.t
	desc = intermarium_events.5.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.5 option intermarium_events.5.a"
		name = intermarium_events.5.a
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 1000
		}
	}
}
country_event = { # event about support eq shipments
	id = intermarium_events.6
	title = intermarium_events.6.t
	desc = intermarium_events.6.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.6 option intermarium_events.6.a"
		name = intermarium_events.6.a
		add_equipment_to_stockpile = {
			type = support_equipment
			amount = 250
		}
	}
}
country_event = { # event about artillery shipments
	id = intermarium_events.7
	title = intermarium_events.7.t
	desc = intermarium_events.7.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.7 option intermarium_events.7.a"
		name = intermarium_events.7.a
		add_equipment_to_stockpile = {
			type = artillery_equipment
			amount = 250
		}
	}
}
country_event = { # event about aircraft
	id = intermarium_events.8
	title = intermarium_events.8.t
	desc = intermarium_events.8.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.8 option intermarium_events.8.a"
		name = intermarium_events.8.a
		capital_scope = {
			add_building_construction = {
				type = air_base
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = anti_air_building
				level = 2
				instant_build = yes
			}
		}
		if = {
			limit = { has_dlc_bba = yes }
			add_equipment_to_stockpile = {
				type = small_plane_airframe
				amount = 50
				producer = GER
			}
		}
		else = {
			add_equipment_to_stockpile = {
				type = fighter_equipment_1
				amount = 50
				producer = GER
			}
		}
	}
}
country_event = { # event about aircraft 2
	id = intermarium_events.9
	title = intermarium_events.9.t
	desc = intermarium_events.9.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.9 option intermarium_events.9.a"
		name = intermarium_events.9.a
		add_ideas = MIE_joint_air_command_1
	}
}
country_event = { # event about aircraft 3
	id = intermarium_events.10
	title = intermarium_events.10.t
	desc = intermarium_events.10.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.10 option intermarium_events.10.a"
		name = intermarium_events.10.a
		if = {
			limit = { has_idea = MIE_joint_air_command_1 }
			swap_ideas = {
				remove_idea = MIE_joint_air_command_1
				add_idea = MIE_joint_air_command_2
			}
		}
		else = {
			add_ideas = MIE_joint_air_command_2
		}
	}
}
country_event = { # event about tanks
	id = intermarium_events.11
	title = intermarium_events.11.t
	desc = intermarium_events.11.d
	picture = GFX_report_event_Manteuffel_Coup

	trigger = {
		NOT = { tag = MIE }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.11 option intermarium_events.11.a"
		name = intermarium_events.11.a
		effect_tooltip = {
			MIE = {
				custom_effect_tooltip = {
					localization_key = tooltip_create_division_template
					NAME = "Osteuropäische Interdivision"
					LINE_1 = { localization_key = line_battalion_tt NAME = medium_armor ICON = GFX_unit_medium_armor_icon_small COUNT = 6 }
					LINE_2 = { localization_key = line_battalion_tt NAME = motorized ICON = GFX_unit_motorized_icon_small COUNT = 4 }
					SUPPORT_1 = { localization_key = support_battalion_tt NAME = mot_recon ICON = GFX_unit_mot_recon_icon_small }
					SUPPORT_2 = { localization_key = support_battalion_tt NAME = engineer ICON = GFX_unit_engineer_icon_small }
					SUPPORT_3 = { localization_key = support_battalion_tt NAME = artillery ICON = GFX_unit_artillery_icon_small }
				}
				capital_scope = {
					custom_effect_tooltip = {
						localization_key = tooltip_spawn_unit
						TYPE = "Osteuropäische Interdivision"
					}
				}
			}
		}
		custom_effect_tooltip = MIE_transferable_armored_division_tt
	}
}

country_event = { #Intermarium disbands
	id = intermarium_events.12
	title = intermarium_events.12.t
	desc = intermarium_events.12.d
	picture = GFX_report_event_Manteuffel_Coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.12 option intermarium_events.12.a"
		name = intermarium_events.12.a
		MIE_remove_from_intermarium = yes
	}
}
country_event = { # German help arrives to MIE
	id = intermarium_events.13
	title = intermarium_events.13.t
	desc = intermarium_events.13.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.13 option intermarium_events.13.a"
		name = intermarium_events.13.a
		custom_effect_tooltip = MIE_2000_guns_tt
		add_war_support = 0.05
	}
}
country_event = { # German help to BAT
	id = intermarium_events.14
	title = intermarium_events.14.t
	desc = intermarium_events.14.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.14 option intermarium_events.14.a"
		name = intermarium_events.14.a
		ai_chance = { base = 5 }
		12 = { add_resistance = -25 }
		190 = { add_resistance = -25 }
		BAT_calculate_resistance = yes
	}
	option = {
		log = "[GetLogInfo]: event intermarium_events.14 option intermarium_events.14.b"
		name = intermarium_events.14.b
		191 = { add_resistance = -25 }
		13 = { add_resistance = -25 }
		BAT_calculate_resistance = yes
	}
}
country_event = { # German help to LIT
	id = intermarium_events.15
	title = intermarium_events.15.t
	desc = intermarium_events.15.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.15 option intermarium_events.15.a"
		name = intermarium_events.15.a
		set_temp_variable = { LIT_threat_change = -5 }
		LIT_change_LAF_threat = yes
		add_command_power = 50
	}
}
country_event = { # Pro-German coup in BLR for RUS
	id = intermarium_events.17
	title = intermarium_events.17.t
	desc = intermarium_events.17.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event intermarium_events.17 option intermarium_events.17.a"
		name = intermarium_events.17.a
		add_named_threat = {
			threat = 5
			name = GER_coup_BLR
		}
	}
}
country_event = { # German help to UKR
	id = intermarium_events.18
	title = intermarium_events.18.t
	desc = intermarium_events.18.d

	is_triggered_only = yes
	trigger = {
		OR = {
			NOT = { has_country_flag = UKR_vdr_side }
			is_ai = yes
		}
	}

	option = {
		log = "[GetLogInfo]: event intermarium_events.18 option intermarium_events.18.a"
		name = intermarium_events.18.a
		add_political_power = 40
		if = {
			limit = { has_active_mission = UKR_bill_negotiations }
			custom_effect_tooltip = tooltip_white_line
			custom_override_tooltip = {
				tooltip = { localization_key = UKR_relief_bill_support_increase_slight PARTY = UKR_relief_bill_urdp }
				add_to_variable = { UKR_urdp_support = 10 }
			}
			custom_override_tooltip = {
				tooltip = { localization_key = UKR_relief_bill_support_increase_slight PARTY = UKR_relief_bill_protofis }
				add_to_variable = { UKR_protofis_support = 10 }
			}
			custom_override_tooltip = {
				tooltip = { localization_key = UKR_relief_bill_support_increase_slight PARTY = UKR_relief_bill_udkhp }
				add_to_variable = { UKR_udkhp_support = 10 }
			}
			custom_override_tooltip = {
				tooltip = { localization_key = UKR_relief_bill_support_increase_slight PARTY = UKR_relief_bill_uskhd }
				add_to_variable = { UKR_uskhd_support = 10 }
			}
			custom_override_tooltip = {
				tooltip = { localization_key = UKR_relief_bill_support_increase_slight PARTY = UKR_relief_bill_independents }
				add_to_variable = { UKR_independents_support = 10 }
			}
		}
		if = {
			limit = { NOT = { has_country_flag = UKR_revolt_started } }
			set_country_flag = UKR_hetman_side_ai
			add_command_power = 40
		}
		if = {
			limit = {
				has_country_flag = UKR_hetman_side
				has_country_flag = UKR_revolt_started
			}
			set_temp_variable = { UKR_strength_change = -10 }
			UKR_change_vdr_strength = yes
			add_command_power = 40
		}
		else_if = {
			limit = {
				has_country_flag = UKR_vdr_side
				has_country_flag = UKR_revolt_started
				is_ai = yes
			}
			set_temp_variable = { UKR_strength_change = 15 }
			UKR_change_hetman_strength = yes
			add_command_power = -40
		}
	}
}

country_event = { # Hard mode
	id = intermarium_events.19
	title = intermarium_events.19.t
	desc = intermarium_events.19.d
	picture = GFX_report_event_GER_army
	is_triggered_only = yes
	fire_only_once = yes
	timeout_days = 30 # Just in case a player is AFK for some reason

	option = {
		log = "[GetLogInfo]: event intermarium_events.19 option intermarium_events.19.a"
		name = intermarium_events.19.a
	}
	option = {
		log = "[GetLogInfo]: event intermarium_events.19 option intermarium_events.19.b"
		name = intermarium_events.19.b
		ai_chance = { base = 0 }
		set_global_flag = MIE_east_no_help
		custom_effect_tooltip = intermarium_events.19.b.tt
	}
	option = {
		log = "[GetLogInfo]: event intermarium_events.19 option intermarium_events.19.c"
		name = intermarium_events.19.c
		ai_chance = { base = 0 }
		set_global_flag = MIE_east_no_help
		set_global_flag = MIE_east_no_help_ee
		custom_effect_tooltip = intermarium_events.19.c.tt
	}
}

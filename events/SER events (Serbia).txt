###########################
# Reworked Serbia Events
###########################
# By Augenis
###########################

add_namespace = serbia_events
add_namespace = serbia_flavour_events
add_namespace = serbia_puppet_events
add_namespace = yugoslavia_mechanics_events
add_namespace = yugoslavia_events

country_event = { #Black Monday Hits Serbia!
	id = serbia_events.1
	title = serbia_events.1.t
	desc = serbia_events.1.d
	picture = GFX_report_event_generic_strike

	is_triggered_only = yes

	immediate = {
		hidden_effect = { add_ideas = SER_black_monday_1 }
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.1 option serbia_events.1.a"
		name = serbia_events.1.a
		effect_tooltip = { add_ideas = SER_black_monday_1 }
		custom_effect_tooltip = SER_republicans_drop
		add_to_variable = { SER_republican_strength = -10 }
		activate_mission = SER_black_monday_timer
		hidden_effect = {
			country_event = { id = serbia_events.4 days = 14 random_days = 10 }
			country_event = { id = serbia_events.5 days = 45 random_days = 20 }
			country_event = { id = serbia_events.7 days = 70 random_days = 20 }
			country_event = { id = serbia_events.12 days = 14 random_days = 7 }
		}
	}
}

country_event = { #1936 Serbian Elections
	id = serbia_events.2
	title = serbia_events.2.t
	desc = serbia_events.2.d
	picture = GFX_report_event_ser_election

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.2 option serbia_events.2.a"
		name = serbia_events.2.a
		custom_effect_tooltip = SER_check_decision_tooltip
		hidden_effect = {
			country_event = { id = serbia_events.6 days = 120 random_days = 60 }
		}
	}
}

country_event = { #The Vidovdan Speech
	id = serbia_events.3
	title = serbia_events.3.t
	desc = serbia_events.3.d
	picture = GFX_report_event_ser_vidovdan

	immediate = {
		hidden_effect = {
			country_event = { id = serbia_events.53 days = 365 }
		}
	}

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.3 option serbia_events.3.a"
		name = serbia_events.3.a
		remove_ideas = SER_treaty_of_wartholz
		swap_ideas = {
			remove_idea = SER_secret_rearmament
			add_idea = SER_open_rearmament
		}
		complete_national_focus = SER_Vidovdan_Speech
		custom_effect_tooltip = SER_republicans_gain
		add_to_variable = { SER_republican_strength = 5 }
		country_lock_all_division_template = no
		AUS = {
			add_ai_strategy = {
				type = prepare_for_war
				id = "SER"
				value = -100
			}
		}
		HUN = {
			add_ai_strategy = {
				type = prepare_for_war
				id = "SER"
				value = -100
			}
			add_ai_strategy = {
				type = prepare_for_war
				id = "ROM"
				value = -100
			}
		}
		CRO = {
			add_ai_strategy = {
				type = prepare_for_war
				id = "SER"
				value = -100
			}
		}
		BUL = {
			country_event = bulgaria_events.20
		}
		activate_mission = SER_revanchism_timer
	}
}

country_event = { # Socialists growing
	id = serbia_events.4
	title = serbia_events.4.t

	desc = serbia_events.4.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.4 option serbia_events.4.a"
		name = serbia_events.4.a
		ai_chance = {
			base = 45
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
				}
			}
		}
		custom_effect_tooltip = SER_socialists_gain
		add_to_variable = { SER_socialist_strength = 10 }
		hidden_effect = {
			country_event = { id = serbia_events.12 days = 14 random_days = 7 }
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.4 option serbia_events.4.b"
		name = serbia_events.4.b
		ai_chance = {
			base = 55
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_moderate_socialists_gain
		add_to_variable = { SER_moderate_socialist_strength = 10 }
	}
}

country_event = { # Konspiracija offer
	id = serbia_events.5
	title = serbia_events.5.t
	desc = serbia_events.5.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.5 option serbia_events.5.a"
		name = serbia_events.5.a #Do it
		ai_chance = {
			base = 40
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		add_popularity = {
			ideology = national_populist
			popularity = 0.05
		}
		custom_effect_tooltip = SER_socialists_drop
		add_to_variable = { SER_socialist_strength = -10 }
		SER_recalculate_konspiracija = yes
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.5 option serbia_events.5.b"
		name = serbia_events.5.b #It's too risky
		ai_chance = {
			base = 60
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
				}
			}
		}
	}
}

country_event = { # Greenshirts
	id = serbia_events.6
	title = serbia_events.6.t
	desc = serbia_events.6.d
	picture = GFX_report_event_ser_greenshirts

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.6 option serbia_events.6.a"
		name = serbia_events.6.a
		ai_chance = {
			base = 45
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
				}
			}
		}
		add_political_power = -50
		custom_effect_tooltip = SER_radicals_drop
		add_to_variable = { SER_radical_strength = -10 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.6 option serbia_events.6.b"
		name = serbia_events.6.b
		ai_chance = {
			base = 55
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_radicals_republicans_gain
		add_to_variable = { SER_radical_strength = 10 }
		add_to_variable = { SER_republican_strength = 10 }
	}
}

country_event = { # Countryside problems
	id = serbia_events.7
	title = serbia_events.7.t

	is_triggered_only = yes

	desc = serbia_events.7.d

	option = {
		log = "[GetLogInfo]: event serbia_events.7 option serbia_events.7.a"
		name = serbia_events.7.a
		ai_chance = {
			base = 35
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_agrarians_gain
		add_to_variable = { SER_agrarian_strength = 10 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.7 option serbia_events.7.b"
		name = serbia_events.7.b
		ai_chance = {
			base = 30
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_republicans_gain
		add_to_variable = { SER_republican_strength = 10 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.7 option serbia_events.7.c"
		name = serbia_events.7.c
		ai_chance = {
			base = 35
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
				}
			}
		}
		add_stability = -0.03
		custom_effect_tooltip = SER_socialists_gain
		add_to_variable = { SER_socialist_strength = 10 }
		hidden_effect = {
			country_event = { id = serbia_events.12 days = 14 random_days = 7 }
		}
	}
}

country_event = { # Republican Strategy
	id = serbia_events.8
	title = serbia_events.8.t
	desc = serbia_events.8.d
	picture = GFX_report_event_AUS_Ausgleich_prag

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.8 option serbia_events.8.a"
		name = serbia_events.8.a
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_republicans_gain
		add_to_variable = { SER_republican_strength = 10 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.8 option serbia_events.8.b"
		name = serbia_events.8.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
				}
			}
		}
		custom_effect_tooltip = SER_radicals_agrarians_drop
		add_to_variable = { SER_radical_strength = -10 }
		add_to_variable = { SER_agrarian_strength = -5 }
		hidden_effect = {
			country_event = { id = serbia_events.12 days = 14 random_days = 7 }
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.8 option serbia_events.8.c"
		name = serbia_events.8.c
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_socialists_both_drop
		add_to_variable = { SER_socialist_strength = -10 }
		add_to_variable = { SER_moderate_socialist_strength = -5 }
	}
}

country_event = { # Radical Strategy
	id = serbia_events.9
	title = serbia_events.9.t
	desc = serbia_events.9.d
	picture = GFX_report_event_ser_radical_union

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.9 option serbia_events.9.a"
		name = serbia_events.9.a
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_radicals_gain
		add_to_variable = { SER_radical_strength = 15 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.9 option serbia_events.9.b"
		name = serbia_events.9.b
		ai_chance = {
			base = 35
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
				}
			}
		}
		custom_effect_tooltip = SER_radicals_agrarians_gain
		add_to_variable = { SER_radical_strength = 5 }
		add_to_variable = { SER_agrarian_strength = 10 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.9 option serbia_events.9.c"
		name = serbia_events.9.c
		ai_chance = {
			base = 45
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_republicans_socialists_drop
		add_to_variable = { SER_republican_strength = -10 }
		add_to_variable = { SER_socialist_strength = -5 }
		hidden_effect = {
			country_event = { id = serbia_events.12 days = 14 random_days = 7 }
		}
	}
}

country_event = { # Socialist strategy
	id = serbia_events.10
	title = serbia_events.10.t
	desc = serbia_events.10.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.10 option serbia_events.10.a"
		name = serbia_events.10.a
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
				}
			}
		}
		custom_effect_tooltip = SER_socialists_gain
		add_to_variable = { SER_socialist_strength = 10 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.10 option serbia_events.10.b"
		name = serbia_events.10.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_all_left_gain
		add_to_variable = { SER_socialist_strength = 5 }
		add_to_variable = { SER_moderate_socialist_strength = 5 }
		add_to_variable = { SER_republican_strength = 5 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.10 option serbia_events.10.c"
		name = serbia_events.10.c
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_radicals_agrarians_drop
		add_to_variable = { SER_radical_strength = -10 }
		add_to_variable = { SER_agrarian_strength = -5 }
	}
	after = {
		hidden_effect = {
			country_event = { id = serbia_events.12 days = 14 random_days = 7 }
		}
	}
}

country_event = { # The Election
	id = serbia_events.11
	title = serbia_events.11.t
	desc = serbia_events.11.d
	picture = GFX_report_event_ser_election

	trigger = {
		NOT = { has_country_flag = SER_has_completed_1936_elc }
	}

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			end_coalition = yes
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.11 option serbia_events.11.a"
		name = serbia_events.11.a
		trigger = {
			SER_rep_no_coalition = yes
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.1
		}
		complete_national_focus = SER_Moralistic_Democracy
		add_stability = 0.1
		activate_advisor = SER_milan_grol_sic
		news_event = { id = serbia_flavour_events.32 days = 1 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.11 option serbia_events.11.b"
		name = serbia_events.11.b
		trigger = {
			SER_rad_no_coalition = yes
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.1
		}
		set_politics = {
			ruling_party = market_liberal
			election_frequency = 60
			elections_allowed = yes
		}
		add_stability = 0.1
		complete_national_focus = SER_National_Vanguard
		activate_advisor = SER_nikola_uzunovic_sic
		news_event = { id = serbia_flavour_events.33 days = 1 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.11 option serbia_events.11.c"
		name = serbia_events.11.c
		trigger = {
			SER_rep_no_coalition = no
			SER_repsoc_coalition = yes
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.07
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.03
		}
		complete_national_focus = SER_Moralistic_Democracy
		set_country_flag = SER_repsoc_coalition_flag
		add_stability = 0.05
		activate_advisor = SER_milan_grol_sic
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
		}
		news_event = { id = serbia_flavour_events.32 days = 1 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.11 option serbia_events.11.e"
		name = serbia_events.11.e
		trigger = {
			SER_rad_no_coalition = no
			SER_radagr_coalition = yes
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.07
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.03
		}
		set_politics = {
			ruling_party = market_liberal
			election_frequency = 60
			elections_allowed = yes
		}
		add_stability = 0.05
		set_country_flag = SER_radagr_coalition_flag
		complete_national_focus = SER_National_Vanguard
		activate_advisor = SER_nikola_uzunovic_sic
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			add_to_coalition = yes
		}
		news_event = { id = serbia_flavour_events.33 days = 1 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.11 option serbia_events.11.f"
		name = serbia_events.11.f
		trigger = {
			SER_jointsoc_coalition = yes
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.07
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.03
		}
		set_politics = {
			ruling_party = radical_socialist
			election_frequency = 60
			elections_allowed = yes
		}
		add_stability = -0.05
		complete_national_focus = SER_Victory_for_the_People
		activate_mission = SER_prove_to_the_people
		activate_mission = SER_defang_the_army
		activate_mission = SER_merge_the_coalition_parties
		set_variable = { SER_socialist_control = 0 }
		activate_advisor = SER_sima_markovic_sic
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
			if = {
				limit = {
					OR = {
						has_country_flag = SER_chetniks_agitated1
						has_country_flag = SER_chetniks_agitated2
					}
					OR = {
						national_populist < 0.2
						is_ai = yes
					}
				}
				set_country_flag = SER_waiting_for_coup
				country_event = { id = serbia_events.13 days = 5 }
			}
			else_if = {
				limit = {
					OR = {
						has_country_flag = SER_chetniks_agitated1
						has_country_flag = SER_chetniks_agitated2
					}
				}
				country_event = { id = serbia_events.130 days = 5 }
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.11 option serbia_events.11.g"
		name = serbia_events.11.g
		trigger = {
			SER_repsoc_coalition = no
			SER_jointsoc_coalition = no
			check_variable = {
				var = SER_republican_strength
				value = SER_socialist_strength
				compare = greater_than_or_equals
			}
			SER_leftfront_coalition = yes
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.04
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.03
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.03
		}
		complete_national_focus = SER_Moralistic_Democracy
		set_country_flag = SER_repsoc_coalition_flag
		add_stability = -0.1
		activate_advisor = SER_milan_grol_sic
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
			set_temp_variable = { coalition_partner_var = token:radical_socialist }
			add_to_coalition = yes
			if = {
				limit = {
					OR = {
						has_country_flag = SER_chetniks_agitated1
						has_country_flag = SER_chetniks_agitated2
					}
					OR = {
						national_populist < 0.2
						is_ai = yes
					}
				}
				set_country_flag = SER_waiting_for_coup
				country_event = { id = serbia_events.13 days = 5 }
			}
			else_if = {
				limit = {
					OR = {
						has_country_flag = SER_chetniks_agitated1
						has_country_flag = SER_chetniks_agitated2
					}
				}
				country_event = { id = serbia_events.130 days = 5 }
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.11 option serbia_events.11.h"
		name = serbia_events.11.h
		trigger = {
			SER_repsoc_coalition = no
			SER_jointsoc_coalition = no
			check_variable = { SER_socialist_strength > SER_republican_strength }
			SER_leftfront_coalition = yes
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.03
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.04
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.03
		}
		set_politics = {
			ruling_party = radical_socialist
			election_frequency = 60
			elections_allowed = yes
		}
		add_stability = -0.1
		complete_national_focus = SER_Victory_for_the_People
		activate_mission = SER_prove_to_the_people
		activate_mission = SER_defang_the_army
		activate_mission = SER_merge_the_coalition_parties
		set_variable = { SER_socialist_control = 0 }
		activate_advisor = SER_sima_markovic_sic
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			add_to_coalition = yes
			if = {
				limit = {
					OR = {
						has_country_flag = SER_chetniks_agitated1
						has_country_flag = SER_chetniks_agitated2
					}
					OR = {
						national_populist < 0.2
						is_ai = yes
					}
				}
				set_country_flag = SER_waiting_for_coup
				country_event = { id = serbia_events.13 days = 5 }
			}
			else_if = {
				limit = {
					OR = {
						has_country_flag = SER_chetniks_agitated1
						has_country_flag = SER_chetniks_agitated2
					}
				}
				country_event = { id = serbia_events.130 days = 5 }
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.11 option serbia_events.11.i"
		name = serbia_events.11.i
		trigger = {
			SER_repsoc_coalition = no
			SER_leftfront_coalition = no
			SER_radagr_coalition = no
			check_variable = {
				var = SER_republican_strength
				value = SER_radical_strength
				compare = greater_than_or_equals
			}
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.05
		}
		complete_national_focus = SER_Moralistic_Democracy
		set_country_flag = SER_reprad_coalition_flag
		add_stability = -0.1
		activate_advisor = SER_milan_grol_sic
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			add_to_coalition = yes
		}
		news_event = { id = serbia_flavour_events.32 days = 1 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.11 option serbia_events.11.j"
		name = serbia_events.11.j
		trigger = {
			SER_repsoc_coalition = no
			SER_leftfront_coalition = no
			SER_radagr_coalition = no
			check_variable = { SER_radical_strength > SER_republican_strength }
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.05
		}
		set_politics = {
			ruling_party = market_liberal
			election_frequency = 60
			elections_allowed = yes
		}
		complete_national_focus = SER_National_Vanguard
		set_country_flag = SER_reprad_coalition_flag
		add_stability = -0.1
		activate_advisor = SER_nikola_uzunovic_sic
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			add_to_coalition = yes
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			add_to_coalition = yes
		}
		news_event = { id = serbia_flavour_events.33 days = 1 }
	}
	after = {
		set_country_flag = SER_has_completed_1936_elc
		SER_recalculate_konspiracija = yes
		mark_focus_tree_layout_dirty = yes
	}
}

country_event = { #Chetnik organizations worried
	id = serbia_events.12
	title = serbia_events.12.t
	desc = serbia_events.12.d
	picture = GFX_report_event_ser_white_hand_coup

	trigger = {
		OR = {
			SER_jointsoc_coalition = yes
			SER_leftfront_coalition = yes
		}
		NOT = { has_country_flag = SER_has_completed_1936_elc }
	}

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.12 option serbia_events.12.a"
		name = serbia_events.12.a
		ai_chance = {
			base = 40
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_radicals_gain
		add_to_variable = { SER_radical_strength = 15 }
		set_country_flag = SER_chetniks_agitated1
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.12 option serbia_events.12.b"
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
				}
			}
		}
		name = serbia_events.12.b
		set_country_flag = SER_chetniks_agitated2
		add_popularity = {
			ideology = national_populist
			popularity = 0.04
		}
		SER_recalculate_konspiracija = yes
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.12 option serbia_events.12.c"
		ai_chance = {
			base = 40
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		name = serbia_events.12.c
		add_manpower = -1000
		add_war_support = -0.03
		add_stability = -0.03
		set_country_flag = SER_chetniks_agitated2
	}
}

country_event = { #Military putsch
	id = serbia_events.13
	title = serbia_events.13.t
	desc = serbia_events.13.d
	picture = GFX_report_event_ser_white_hand_coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.13 option serbia_events.13.a"
		name = serbia_events.13.a
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_will_people_support_tooltip
		hidden_effect = {
			if = {
				limit = { has_country_flag = SER_chetniks_agitated1 }
				country_event = serbia_events.14
			}
			else = {
				country_event = serbia_events.15
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.13 option serbia_events.13.b"
		name = serbia_events.13.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
				}
			}
		}
		custom_effect_tooltip = SER_will_army_support_tooltip
		hidden_effect = {
			if = {
				limit = { has_country_flag = SER_chetniks_agitated2 }
				country_event = serbia_events.14
			}
			else = {
				country_event = serbia_events.15
			}
		}
	}
	after = {
		clr_country_flag = SER_waiting_for_coup
	}
}

country_event = { #Putsch fails (Konspiracija support too high)
	id = serbia_events.130
	title = serbia_events.130.t
	desc = serbia_events.130.d
	picture = GFX_report_event_ser_white_hand_coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.130 option serbia_events.130.a"
		name = serbia_events.130.a
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -0.1
		}
		add_stability = -0.1
	}
}

country_event = { #Putsch succeeds
	id = serbia_events.14
	title = serbia_events.14.t
	desc = serbia_events.14.d
	picture = GFX_report_event_ser_white_hand_coup

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.14 option serbia_events.14.a"
		name = serbia_events.14.a
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.05
		}
		set_politics = {
			ruling_party = paternal_autocrat
			elections_allowed = no
		}
		add_stability = -0.3
		remove_ideas = SER_konspiracija_idea
		add_ideas = SER_royalist_purged_army
		show_unit_leaders_tooltip = SER_petar_zivkovic #TODO: revert when bug with country_leader variable is fixed
		country_event = { id = serbia_events.17 days = 4 }
		activate_advisor = SER_aleksandar_cincar_markovic_sic
		hidden_effect = {
			end_coalition = yes
			drop_cosmetic_tag = yes
			BUL = {
				country_event = serbia_flavour_events.2
			}
			news_event = serbia_flavour_events.41
			country_event = { id = serbia_events.64 days = 10 }
		}
		mark_focus_tree_layout_dirty = yes
	}
}

country_event = { #The republic endures
	id = serbia_events.15
	title = serbia_events.15.t
	desc = serbia_events.15.d
	picture = GFX_report_event_generic_trial

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.15 option serbia_events.15.a"
		name = serbia_events.15.a
		add_manpower = -20
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -0.10
		}
		SER_recalculate_konspiracija = yes
		if = {
			limit = { has_government = social_liberal }
			news_event = { id = serbia_flavour_events.32 days = 1 }
		}
		else = {
			news_event = { id = serbia_flavour_events.34 days = 1 }
		}
	}
}

country_event = { # Nish Resistance
	id = serbia_events.16
	title = serbia_events.16.t
	desc = serbia_events.16.d
	picture = GFX_report_event_spr_anarchist_uprising2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.16 option serbia_events.16.a"
		name = serbia_events.16.a
		767 = {
			add_resistance = 10
			add_resistance_target = {
				amount = 20
				occupier = BUL
				days = 120
				tooltip = SER_kons_rebellion_increase_rt_tt
			}
		}
		add_stability = -0.02
	}
}

country_event = { #Arrival of King Petar II
	id = serbia_events.17
	title = serbia_events.17.t
	desc = serbia_events.17.d
	picture = GFX_report_event_generic_happy_crowd

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.17 option serbia_events.17.a"
		name = serbia_events.17.a
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.03
		}
		add_ideas = SER_Petar_II_regency
		set_variable = { SER_petar_score = 0 }
		hidden_effect = {
			country_event = { id = serbia_flavour_events.15 days = 365 random_days = 30 }
			country_event = { id = serbia_flavour_events.18 days = 730 random_days = 30 }
			country_event = { id = serbia_flavour_events.19 days = 1095 random_days = 30 }
			country_event = { id = serbia_flavour_events.40 days = 2900 random_days = 120 }
		}
	}
}

country_event = { # Assassination of Jaša Prodanovic
	id = serbia_events.18
	title = serbia_events.18.t
	desc = serbia_events.18.d
	picture = GFX_report_event_ser_Jasa_Prodanovic_rip

	is_triggered_only = yes
	trigger = {
		has_idea = SER_konspiracija_idea
		NOT = {
			has_active_mission = SER_complete_the_revolution
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.18 option serbia_events.18.a"
		name = serbia_events.18.a #Back down, we need their support against Bulgaria
		add_stability = -0.07
		add_political_power = -30
		add_popularity = {
			ideology = national_populist
			popularity = 0.05
		}
		activate_mission = SER_prodanovic_assassination_fallout
		set_variable = { SER_prodanovic_natpop_loss = -0.08 }
		add_ideas = SER_konspiracija_conflict
	}
}

country_event = { #MISSION SUCCESS!
	id = serbia_events.19
	title = serbia_events.19.t
	desc = serbia_events.19.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.19 option serbia_events.19.a"
		name = serbia_events.19.a
		add_popularity = {
			ideology = national_populist
			popularity = SER_prodanovic_natpop_loss
		}
		remove_mission = SER_prodanovic_assassination_fallout
		custom_effect_tooltip = SER_curbed_konspiracija_control_tt
		set_country_flag = SER_curbed_konspiracija_control_flag
		SER_recalculate_konspiracija = yes
		clr_country_flag = SER_ai_insanity_check
	}
}

country_event = { #MISSION FAIL! LEVI SQUAD, GET HER!
	id = serbia_events.20
	title = serbia_events.20.t
	desc = {
		text = serbia_events.20.d1
		trigger = {
			has_country_flag = SER_you_fucked_up_response_flag
		}
	}
	desc = {
		text = serbia_events.20.d2
		trigger = {
			NOT = {
				has_country_flag = SER_you_fucked_up_response_flag
			}
		}
	}
	picture = GFX_report_event_generic_reporters

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.20 option serbia_events.20.a"
		name = serbia_events.20.a
		add_popularity = {
			ideology = national_populist
			popularity = 0.05
		}
		if = {
			limit = { has_idea = SER_ideologically_charged_army }
			remove_ideas = SER_ideologically_charged_army
		}
		if = {
			limit = { has_idea = SER_republican_guard }
			remove_ideas = SER_republican_guard
		}
		add_ideas = SER_puppet_show
		remove_mission = SER_prodanovic_assassination_fallout
		custom_effect_tooltip = SER_enshrined_konspiracija_control_tt
		set_country_flag = SER_enshrined_konspiracija_control_flag
		SER_recalculate_konspiracija = yes
		clr_country_flag = SER_ai_insanity_check
	}
}

country_event = { #Post-1936 Elections
	id = serbia_events.21
	title = serbia_events.21.t
	desc = serbia_events.21.d
	picture = GFX_report_event_ser_election

	is_triggered_only = yes

	trigger = {
		has_country_flag = SER_has_completed_1936_elc
		has_elected_government = yes
		NOT = {
			has_country_leader = { character = SER_petar_ii }
		}
		SER_has_founded_yugoslavia = no
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.21 option serbia_events.21.a"
		name = serbia_events.21.a #Republican Popular Front
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.2
				has_completed_focus = SER_National_Vanguard
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
				}
			}
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.1
		}
		if = {
			limit = {
				has_country_leader = { character = SER_dragomir_vasic }
			}
			retire_character = SER_dragomir_vasic
			promote_character = SER_milan_grol
			hidden_effect = {
				country_event = serbia_flavour_events.14
			}
		}
		set_politics = {
			ruling_party = social_liberal
			election_frequency = 60
			elections_allowed = yes
		}
		if = {
			limit = {
				NOT = {
					has_completed_focus = SER_Moralistic_Democracy
				}
			}
			complete_national_focus = SER_Moralistic_Democracy
		}
		clr_country_flag = SER_reprad_coalition_flag
		set_country_flag = SER_repsoc_coalition_flag
		activate_advisor = SER_mihailo_ilic_sic
		hidden_effect = {
			SER_remove_radical_ideas = yes
			for_each_loop = {
				array = SER_former_rep_government_ideas
				add_ideas = var:v
			}
			end_coalition = yes
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.21 option serbia_events.21.b"
		name = serbia_events.21.b #People's Radical Party (separate from Agrarians)
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.2
				has_completed_focus = SER_Moralistic_Democracy
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
				}
			}
		}
		trigger = {
			NOT = {
				has_completed_focus = SER_unite_with_agrarians
			}
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.1
		}
		if = {
			limit = {
				has_country_leader = { character = SER_dragomir_vasic }
			}
			retire_character = SER_dragomir_vasic
			promote_character = SER_milan_grol
			hidden_effect = {
				country_event = serbia_flavour_events.14
			}
		}
		set_politics = {
			ruling_party = market_liberal
			election_frequency = 60
			elections_allowed = yes
		}
		if = {
			limit = {
				NOT = {
					has_completed_focus = SER_National_Vanguard
				}
			}
			complete_national_focus = SER_National_Vanguard
		}
		clr_country_flag = SER_reprad_coalition_flag
		set_country_flag = SER_radagr_coalition_flag
		activate_advisor = SER_nikola_uzunovic_sic
		hidden_effect = {
			SER_remove_republican_ideas = yes
			for_each_loop = {
				array = SER_former_rad_government_ideas
				add_ideas = var:v
			}
			end_coalition = yes
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			add_to_coalition = yes
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.21 option serbia_events.21.b"
		name = serbia_events.21.b #People's Radical Party (merged with Agrarians)
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.2
				has_completed_focus = SER_Moralistic_Democracy
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
				}
			}
		}
		trigger = {
			has_completed_focus = SER_unite_with_agrarians
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.1
		}
		if = {
			limit = {
				has_country_leader = { character = SER_dragomir_vasic }
			}
			retire_character = SER_dragomir_vasic
			promote_character = SER_milan_grol
			hidden_effect = {
				country_event = serbia_flavour_events.14
			}
		}
		set_politics = {
			ruling_party = social_conservative
			election_frequency = 60
			elections_allowed = yes
		}
		clr_country_flag = SER_reprad_coalition_flag
		set_country_flag = SER_radagr_coalition_flag
		activate_advisor = SER_nikola_uzunovic_sic
		hidden_effect = {
			SER_remove_republican_ideas = yes
			for_each_loop = {
				array = SER_former_rad_government_ideas
				add_ideas = var:v
			}
			end_coalition = yes
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
		}
	}
	after = {
		SER_recalculate_konspiracija = yes
	}
}

country_event = { # Mihajlov crosses the border
	id = serbia_events.22
	title = serbia_events.22.t
	desc = serbia_events.22.d
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.22 option serbia_events.22.a"
		name = serbia_events.22.a
		add_manpower = -1000
		add_popularity = {
			ideology = national_populist
			popularity = -0.02
		}
	}
}

country_event = { #The IMRO rises
	id = serbia_events.23
	title = serbia_events.23.t

	desc = {
		text = serbia_events.23.d.default
		trigger = { has_war = no }
	}

	desc = {
		text = serbia_events.23.d.at_war
		trigger = { has_war = yes }
	}
	picture = GFX_report_event_GRE_army

	trigger = {
		106 = { is_owned_and_controlled_by = ROOT }
		is_subject = no
	}

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			SER_setup_imro_headquarters = yes
			mark_focus_tree_layout_dirty = yes
		}
		log = "KR_Event_Logging;IMRO REBELLION START"
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.23 option serbia_events.23.a"
		name = serbia_events.23.a
		effect_tooltip = {
			MAC = {
				transfer_state = 106
				add_state_core = 106
				declare_war_on = {
					target = SER
					type = annex_everything
				}
			}
		}
		complete_national_focus = SER_macedonian_rebellion
		if = {
			limit = { has_war = no }
			unlock_decision_category_tooltip = SER_imro_decisions
			custom_effect_tooltip = IMRO_rebellion_begins_in_lull_phase
		}
		else = {
			add_stability = -0.1
		}
	}
}

country_event = { # Macedonia ticking clock
	id = serbia_events.230

	trigger = {
		has_war_with = MAC
		OR = {
			has_active_mission = SER_IMRO_reb_lull_phase
			has_global_flag = SER_imro_dont_attack
		}
		check_variable = { enemies^num = 1 } #Only at war with MAC
		BUL = { focus_progress = { focus = BUL_macedonia_intervention progress < 0 } } #Stop teleporting armies if natpop BUL is about to attack
	}

	is_triggered_only = yes
	hidden = yes

	immediate = {
		country_event = { id = serbia_events.230 hours = 24 }
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.230 option 1"
		SER_IMRO_teleport_effect = yes
	}
}

country_event = { # The IMRO Game - Round system
	id = serbia_events.24
	title = serbia_events.24.t
	desc = serbia_events.24.d
	picture = GFX_report_event_GRE_army

	trigger = {
		OR = {
			has_war_with = MAC
			has_war_with = SER
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.24 option serbia_events.24.a"
		name = serbia_events.24.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 3 #to 30
				tag = MAC
				has_global_flag = IMRO_lured_north
			}
		}
		custom_effect_tooltip = IMRO_attacks_north_tt
		if = {
			limit = {
				tag = MAC
			}
			set_global_flag = IMRO_attacks_north
		}
		else = {
			set_global_flag = SER_attacks_north
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.24 option serbia_events.24.b"
		name = serbia_events.24.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 3 #to 30
				tag = MAC
				has_global_flag = IMRO_lured_south
			}
		}
		custom_effect_tooltip = IMRO_attacks_south_tt
		if = {
			limit = {
				tag = MAC
			}
			set_global_flag = IMRO_attacks_south
		}
		else = {
			set_global_flag = SER_attacks_south
		}
	}
}

country_event = { # Serbia gets a win
	id = serbia_events.25
	title = serbia_events.25.t
	desc = serbia_events.25.d
	picture = GFX_report_event_GRE_army

	trigger = {
		has_war_with = MAC
	}
	immediate = {
		add_to_variable = { SER_won_rounds = 1 }
		if = {
			limit = {
				has_completed_focus = SER_destruction_strategy
				NOT = {
					MAC = {
						has_completed_focus = IMRO_study_their_tactics
					}
				}
			}
			add_to_variable = { SER_won_rounds = 1 }
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.25 option serbia_events.25.a"
		name = serbia_events.25.a
		custom_effect_tooltip = IMRO_SER_won_round_tt
	}
}

country_event = { # IMRO gets a win
	id = serbia_events.26
	title = serbia_events.26.t
	desc = serbia_events.26.d
	picture = GFX_report_event_GRE_army

	trigger = {
		has_war_with = MAC
	}
	immediate = {
		add_to_variable = { IMRO_won_rounds = 1 }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.26 option serbia_events.26.a"
		name = serbia_events.26.a
		custom_effect_tooltip = IMRO_SER_lost_round_tt
	}
}

country_event = { # Round results
	id = serbia_events.27
	title = serbia_events.27.t
	desc = serbia_events.27.d
	picture = GFX_report_event_GRE_army

	trigger = {
		has_war_with = MAC
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.27 option serbia_events.27.a"
		name = serbia_events.27.a
		trigger = {
			check_variable = { IMRO_won_rounds > SER_won_rounds }
		}
		if = {
			limit = { check_variable = { IMRO_won_rounds > 2 } }
			106 = {
				add_resistance = 10
				add_resistance_target = {
					amount = 10
					occupier = SER
					days = 60
					tooltip = SER_IMRO_increase_rt_tt
				}
			}
		}
		else = {
			106 = {
				add_resistance = 5
				add_resistance_target = {
					amount = 5
					occupier = SER
					days = 60
					tooltip = SER_IMRO_increase_rt_tt
				}
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.27 option serbia_events.27.b"
		name = serbia_events.27.b
		trigger = {
			NOT = { check_variable = { IMRO_won_rounds > SER_won_rounds } }
		}
		if = {
			limit = { check_variable = { SER_won_rounds > 2 } }
			106 = {
				add_resistance = -10
				add_resistance_target = {
					amount = -10
					occupier = SER
					days = 60
					tooltip = SER_IMRO_decrease_rt_tt
				}
			}
		}
		else = {
			106 = {
				add_resistance = -5
				add_resistance_target = {
					amount = -5
					occupier = SER
					days = 60
					tooltip = SER_IMRO_decrease_rt_tt
				}
			}
		}
	}
	after = {
		custom_effect_tooltip = SER_IMRO_action_time
		set_variable = { SER_won_rounds = 0 }
		set_variable = { IMRO_won_rounds = 0 }
	}
}

country_event = { # IMRO chaos sowed
	id = serbia_events.28
	title = serbia_events.28.t
	desc = serbia_events.28.d
	picture = GFX_report_event_GRE_army

	trigger = {
		has_war_with = MAC
	}
	immediate = {
		set_country_flag = { flag = SER_macedonia_focuses_blocked days = 90 value = 1 }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.28 option serbia_events.28.a"
		name = serbia_events.28.a
		custom_effect_tooltip = IMRO_SER_sow_chaos_tt
	}
}

country_event = { # Occupation of Pirin
	id = serbia_events.29
	title = serbia_events.29.t
	desc = serbia_events.29.d
	picture = GFX_report_event_GRE_army

	trigger = {
		SER = { has_war_with = MAC }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.29 option serbia_events.29.a"
		name = serbia_events.29.a
		custom_effect_tooltip = IMRO_occupy_pirin_tt
	}
}

country_event = { # Assassinations
	id = serbia_events.30
	title = serbia_events.30.t
	desc = serbia_events.30.d
	picture = GFX_report_event_GRE_army

	trigger = {
		SER = { has_war_with = MAC }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.30 option serbia_events.30.a"
		name = serbia_events.30.a
		add_war_support = -0.1
		add_stability = -0.05
		random_unit_leader = {
			limit = {
				NOT = { has_character_flag = IMRO_targeted }
			}
			add_timed_unit_leader_trait = {
				trait = wounded
				days = 90
			}
			set_character_flag = IMRO_targeted
		}
		random_unit_leader = {
			limit = {
				NOT = { has_character_flag = IMRO_targeted }
			}
			add_timed_unit_leader_trait = {
				trait = wounded
				days = 90
			}
			set_character_flag = IMRO_targeted
		}
		random_unit_leader = {
			limit = {
				NOT = { has_character_flag = IMRO_targeted }
			}
			add_timed_unit_leader_trait = {
				trait = wounded
				days = 90
			}
			set_character_flag = IMRO_targeted
		}
	}
}

country_event = { # Fifth Balkan War (IMRO yeets Serbia in Bulgaria)
	id = serbia_events.31
	title = serbia_events.31.t
	desc = serbia_events.31.d
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.31 option serbia_events.31.a"
		name = serbia_events.31.a
		ai_chance = { base = 0 }
		if = {
			limit = { original_tag = SER }
			add_stability = -0.3
			add_war_support = -0.3
			remove_ideas = SER_IMRO_rebellion
			remove_mission = SER_IMRO_lull_phase_rounds
			remove_mission = SER_IMRO_reb_action_phase
			remove_mission = SER_IMRO_reb_lull_phase
			106 = {
				remove_dynamic_modifier = { modifier = SER_IMRO_mountain_warfare }
				remove_dynamic_modifier = { modifier = SER_IMRO_spawned_resistance }
				hidden_effect = { start_state_integration_resistance = yes }
			}
			BUL = {
				annex_country = { target = MAC transfer_troops = yes }
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.31 option serbia_events.31.b"
		name = serbia_events.31.b # Bulgaria still exists
		trigger = {
			is_subject = no
			BUL = {
				exists = yes
				is_subject = no
			}
		}
		declare_war_on = {
			target = BUL
			type = annex_everything
		}
		if = {
			limit = { original_tag = SER }
			add_stability = -0.2
			remove_ideas = SER_IMRO_rebellion
			remove_mission = SER_IMRO_lull_phase_rounds
			remove_mission = SER_IMRO_reb_action_phase
			remove_mission = SER_IMRO_reb_lull_phase
			106 = {
				remove_dynamic_modifier = { modifier = SER_IMRO_mountain_warfare }
				remove_dynamic_modifier = { modifier = SER_IMRO_spawned_resistance }
				hidden_effect = { start_state_integration_resistance = yes }
			}
			BUL = {
				annex_country = {
					target = MAC
					transfer_troops = yes
				}
			}
			MAC = { MAC_ivan_mihajlov = { set_nationality = BUL } }
			hidden_effect = {
				every_other_country = {
					limit = {
						is_in_faction_with = BPL
						can_declare_war_on = BUL
						OR = {
							original_tag = GRE
							original_tag = ROM
						}
					}
					country_event = serbia_events.31
				}
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.31 option serbia_events.31.b"
		name = serbia_events.31.b # Bulgaria does not exist
		trigger = {
			is_subject = no
			BUL = {
				OR = {
					exists = no
					is_subject = yes
				}
			}
		}
		add_stability = -0.2
		remove_ideas = SER_IMRO_rebellion
		remove_mission = SER_IMRO_lull_phase_rounds
		remove_mission = SER_IMRO_reb_action_phase
		remove_mission = SER_IMRO_reb_lull_phase
		106 = {
			remove_dynamic_modifier = { modifier = SER_IMRO_mountain_warfare }
			remove_dynamic_modifier = { modifier = SER_IMRO_spawned_resistance }
			hidden_effect = { start_state_integration_resistance = yes }
		}
		declare_war_on = {
			target = MAC
			type = annex_everything
		}
	}
}
country_event = { # IMRO goes free (Serbia has gone to war with someone)
	id = serbia_events.310
	title = serbia_events.310.t
	desc = serbia_events.310.d
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.310 option serbia_events.310.a"
		name = serbia_events.310.a
		if = {
			limit = {
				original_tag = SER
			}
			add_stability = -0.1
			remove_ideas = SER_IMRO_rebellion
			remove_mission = SER_IMRO_lull_phase_rounds
			remove_mission = SER_IMRO_reb_action_phase
			remove_mission = SER_IMRO_reb_lull_phase
			106 = {
				remove_dynamic_modifier = { modifier = SER_IMRO_mountain_warfare }
				remove_dynamic_modifier = { modifier = SER_IMRO_spawned_resistance }
				hidden_effect = { start_state_integration_resistance = yes }
			}
		}
		else = {
			if = {
				limit = {
					country_exists = MAC
				}
				effect_tooltip = {
					MAC = { declare_war_on = { target = ROOT type = annex_everything } }
				}
			}
			else_if = {
				limit = {
					SER = { has_war_with = BUL }
					BUL = { has_completed_focus = BUL_macedonia_intervention }
				}
				declare_war_on = {
					target = BUL
					type = annex_everything
				}
			}
		}
	}
}
country_event = { # IMRO is defeated
	id = serbia_events.3100
	title = serbia_events.3100.t
	desc = serbia_events.3100.d
	picture = GFX_report_event_GRE_army

	trigger = {
		owns_state = 106
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.3100 option serbia_events.3100.a"
		name = serbia_events.3100.a
		add_stability = 0.1
		remove_ideas = SER_IMRO_rebellion
		remove_mission = SER_IMRO_lull_phase_rounds
		remove_mission = SER_IMRO_reb_action_phase
		remove_mission = SER_IMRO_reb_lull_phase
		106 = {
			remove_dynamic_modifier = { modifier = SER_IMRO_mountain_warfare }
			remove_dynamic_modifier = { modifier = SER_IMRO_spawned_resistance }
			hidden_effect = { start_state_integration_resistance = yes }
		}
		hidden_effect = {
			BUL = {
				country_event = { id = bulgaria_events.50 days = 3 }
			}
		}
		add_timed_idea = {
			idea = SER_IMRO_rebellion_2
			days = 250
		}
	}
}

country_event = { #War is Imminent!
	id = serbia_events.32
	title = serbia_events.32.t
	desc = serbia_events.32.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.32 option serbia_events.32.a"
		name = serbia_events.32.a
		custom_effect_tooltip = SER_will_declare_war_allies_tooltip
		add_ai_strategy = {
			type = prepare_for_war
			id = AUS
			value = 100
		}
		AUS = {
			set_country_flag = added_AI_strategies_@ROOT
			add_ai_strategy = {
				type = prepare_for_war
				id = ROOT
				value = 100
			}
			if = {
				limit = { is_in_faction = yes }
				every_other_country = {
					limit = {
						is_in_faction_with = AUS
						is_neighbor_of = ROOT
					}
					set_country_flag = added_AI_strategies_@ROOT
					add_ai_strategy = {
						type = prepare_for_war
						id = ROOT
						value = 100
					}
					ROOT = {
						add_ai_strategy = {
							type = prepare_for_war
							id = PREV
							value = 100
						}
					}
				}
			}
			else_if = {
				limit = { num_subjects > 0 }
				every_subject_country = {
					limit = { is_neighbor_of = ROOT }
					set_country_flag = added_AI_strategies_@ROOT
					add_ai_strategy = {
						type = prepare_for_war
						id = ROOT
						value = 100
					}
					ROOT = {
						add_ai_strategy = {
							type = prepare_for_war
							id = PREV
							value = 100
						}
					}
				}
			}
			else_if = {
				limit = { is_subject = yes }
				overlord = {
					set_country_flag = added_AI_strategies_@ROOT
					add_ai_strategy = {
						type = prepare_for_war
						id = ROOT
						value = 100
					}
					ROOT = {
						add_ai_strategy = {
							type = prepare_for_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
	}
}

country_event = { #Serbia Mobilises for War
	id = serbia_events.33
	title = serbia_events.33.t
	desc = serbia_events.33.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.33 option serbia_events.33.a"
		name = serbia_events.33.a
		custom_effect_tooltip = SER_will_declare_war_tooltip
	}
}

country_event = { #The War Against Austria
	id = serbia_events.34
	title = serbia_events.34.t

	desc = {
		text = serbia_events.34.d.normal
		trigger = {
			NOT = { has_war_with = AUS }
		}
	}
	desc = {
		text = serbia_events.34.d.already_at_war
		trigger = { has_war_with = AUS }
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			every_other_country = {
				limit = { has_country_flag = added_AI_strategies_@ROOT }
				clr_country_flag = added_AI_strategies_@ROOT
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = -100
				}
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.34 option serbia_events.34.a"
		name = serbia_events.34.a
		trigger = {
			tag = ITA
			is_subject = no
			NOT = {
				is_in_faction_with = SER
				has_war_with = AUS
			}
			OR = {
				AND = {
					488 = { owned_by_austria_or_puppet = yes }
					can_declare_war_on = 488.owner
				}
				AND = {
					736 = { owned_by_austria_or_puppet = yes }
					can_declare_war_on = 736.owner
				}
				AND = {
					783 = { owned_by_austria_or_puppet = yes }
					can_declare_war_on = 783.owner
				}
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				surrender_progress > 0
			}
			modifier = {
				factor = 0
				enemies_strength_ratio > 0.7
			}
		}
		if = {
			limit = { can_declare_war_on = 488.owner }
			declare_war_on = {
				target = 488.owner
				type = annex_everything
			}
		}
		if = {
			limit = {
				var:736.owner = {
					NOT = { tag = var:488.owner }
				}
				can_declare_war_on = 736.owner
			}
			declare_war_on = {
				target = 736.owner
				type = annex_everything
			}
		}
		if = {
			limit = {
				var:783.owner = {
					NOT = {
						tag = var:488.owner
						tag = var:736.owner
					}
				}
				can_declare_war_on = 783.owner
			}
			declare_war_on = {
				target = 783.owner
				type = annex_everything
			}
		}
		if = {
			limit = {
				var:488.owner = { tag = AUS }
				can_declare_war_on = HUN
				HUN = { has_war_with = AUS }
			}
			declare_war_on = {
				target = HUN
				type = annex_everything
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.34 option serbia_events.34.a"
		name = serbia_events.34.a
		trigger = {
			tag = POL
			is_subject = no
			NOT = {
				is_in_faction_with = SER
				has_war_with = AUS
			}
			91 = { owned_by_austria_or_puppet = yes }
			can_declare_war_on = 91.owner
		}
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				surrender_progress > 0
			}
			modifier = {
				factor = 0
				enemies_strength_ratio > 0.7
			}
		}
		declare_war_on = {
			target = 91.owner #Lwow
			type = annex_everything
		}
		if = {
			limit = {
				var:91.owner = { is_ally_with = AUS }
				can_declare_war_on = HUN
				HUN = { has_war_with = AUS }
			}
			declare_war_on = {
				target = HUN
				type = annex_everything
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.34 option serbia_events.34.a"
		name = serbia_events.34.a
		trigger = {
			tag = ROM
			is_subject = no
			NOT = {
				is_in_faction_with = SER
				has_war_with = AUS
			}
			84 = { owned_by_austria_or_puppet = yes }
			can_declare_war_on = 84.owner
		}
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				surrender_progress > 0
			}
			modifier = {
				factor = 0
				enemies_strength_ratio > 0.7
			}
		}
		declare_war_on = {
			target = 84.owner #Transylvania
			type = annex_everything
		}
		if = {
			limit = {
				can_declare_war_on = HUN
				HUN = { has_war_with = AUS }
			}
			declare_war_on = {
				target = HUN
				type = annex_everything
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.34 option serbia_events.34.a"
		name = serbia_events.34.a
		trigger = {
			is_in_faction_with = SER
			NOT = { has_war_with = AUS }
		}
		ai_chance = { base = 100 }
		effect_tooltip = {
			declare_war_on = {
				target = 84.owner
				type = annex_everything
			}
			if = {
				limit = {
					can_declare_war_on = HUN
					HUN = { has_war_with = AUS }
				}
				declare_war_on = {
					target = HUN
					type = annex_everything
				}
			}
		}
		hidden_effect = {
			SER = {
				every_enemy_country = {
					ROOT = {
						add_to_war = {
							targeted_alliance = PREV.PREV
							enemy = PREV
						}
					}
				}
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.34 option serbia_events.34.b"
		name = serbia_events.34.b
		trigger = {
			NOT = { has_war_with = AUS }
		}
		ai_chance = {
			base = 0
			modifier = {
				factor = 0
				is_in_faction_with = SER
			}
			modifier = {
				add = 100
				surrender_progress > 0
			}
			modifier = {
				add = 100
				enemies_strength_ratio > 0.7
			}
			modifier = {
				add = 100
				NOT = { is_in_faction_with = SER }
				is_subject = yes
			}
			modifier = {
				add = 100
				tag = ITA
				NOT = {
					AND = {
						488 = { owned_by_austria_or_puppet = yes }
						can_declare_war_on = 488.owner
					}
					AND = {
						736 = { owned_by_austria_or_puppet = yes }
						can_declare_war_on = 736.owner
					}
					AND = {
						783 = { owned_by_austria_or_puppet = yes }
						can_declare_war_on = 783.owner
					}
				}
			}
			modifier = {
				add = 100
				tag = POL
				OR = {
					91 = { owned_by_austria_or_puppet = no }
					NOT = { can_declare_war_on = 91.owner }
				}
			}
			modifier = {
				add = 100
				tag = ROM
				OR = {
					84 = { owned_by_austria_or_puppet = no }
					NOT = { can_declare_war_on = 84.owner }
				}
			}
		}
		add_war_support = -0.2
		if = {
			limit = { is_in_faction_with = SER }
			leave_faction = yes
		}
		every_other_country = {
			limit = { has_country_flag = SER_will_attack_austria }
			add_opinion_modifier = {
				target = ROOT
				modifier = KR_outraged
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.34 option serbia_events.34.c"
		name = serbia_events.34.c
		trigger = {
			has_war_with = AUS
			NOT = { is_in_faction_with = SER }
		}
	}
}

country_event = { #The Balkan Research Initiative
	id = serbia_events.35
	title = serbia_events.35.t
	desc = serbia_events.35.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.35 option serbia_events.35.a"
		name = serbia_events.35.a #Of course we'll join!
		add_political_power = -30
		add_to_tech_sharing_group = balkan_research
		add_opinion_modifier = {
			target = FROM
			modifier = KR_pleased
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.35 option serbia_events.35.b"
		name = serbia_events.35.b #We don't trust them
		ai_chance = { base = 0 }
		add_political_power = 30
		FROM = { country_event = serbia_events.36 }
		effect_tooltip = {
			reverse_add_opinion_modifier = {
				target = FROM
				modifier = KR_disapproves_of_govt
			}
		}
	}
}

country_event = { #FROM refuses to join the Initiative
	id = serbia_events.36
	title = serbia_events.36.t
	desc = serbia_events.36.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.36 option serbia_events.36.a"
		name = serbia_events.36.a
		add_opinion_modifier = {
			target = FROM
			modifier = KR_disapproves_of_govt
		}
	}
}

country_event = { #End of the Balkan Research Initiative
	id = serbia_events.37
	title = serbia_events.37.t
	desc = {
		text = serbia_events.37.d.war
		trigger = {
			any_enemy_country = { is_in_tech_sharing_group = balkan_research }
		}
	}
	desc = {
		text = serbia_events.37.d.joined_other_faction
		trigger = {
			NOT = { any_enemy_country = { is_in_tech_sharing_group = balkan_research } }
		}
	}

	trigger = {
		is_in_tech_sharing_group = balkan_research
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.37 option serbia_events.37.a"
		name = serbia_events.37.a
		if = {
			limit = { is_in_tech_sharing_group = balkan_research }
			remove_from_tech_sharing_group = balkan_research
		}
	}
}

country_event = { #Serbia wishes to join FROM's faction
	id = serbia_events.38
	title = serbia_events.38.t
	desc = serbia_events.38.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.38 option serbia_events.38.a"
		name = serbia_events.38.a
		FROM = { country_event = serbia_events.39 }
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.38 option serbia_events.38.b"
		name = serbia_events.38.b
		ai_chance = { base = 0 }
		FROM = { country_event = serbia_events.41 }
	}
}

country_event = { #FROM Accepts Serbia
	id = serbia_events.39
	title = serbia_events.39.t

	desc = {
		text = serbia_events.39.d.INT
		trigger = {
			FROM = { tag = INT }
		}
	}
	desc = {
		text = serbia_events.39.d.ENT
		trigger = {
			FROM = { tag = ENT }
		}
	}
	desc = {
		text = serbia_events.39.d.RUS
		trigger = {
			FROM = { tag = RUS }
		}
	}
	desc = {
		text = serbia_events.39.d.GER
		trigger = {
			FROM = { tag = GER }
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.39 option serbia_events.39.a"
		name = serbia_events.39.a
		trigger = {
			NOT = { FROM = { tag = GER } }
		}
		if = {
			limit = {
				FROM = {
					OR = {
						tag = RUS
						tag = INT
					}
				}
			}
			FROM = { save_event_target_as = future_serbian_ally }
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.39 option serbia_events.39.b"
		name = serbia_events.39.b
		trigger = {
			FROM = { tag = GER }
		}
	}
	after = {
		belgrade_pact_is_disbanded = yes
		FROM = { add_to_faction = ROOT }
	}
}

country_event = { #Serbia has disbanded the Pact
	id = serbia_events.40
	title = serbia_events.40.t

	desc = {
		text = serbia_events.40.d.default
		trigger = {
			NOT = { has_event_target = future_serbian_ally }
		}
	}
	desc = {
		text = serbia_events.40.d.alliance
		trigger = {
			has_event_target = future_serbian_ally
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.40 option serbia_events.40.a"
		name = serbia_events.40.a
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				OR = {
					tag = CZE
					tag = GAL
					RUS = {
						any_owned_state = { is_claim_or_core_of_ROOT = yes }
					}
					AND = {
						RUS = {
							is_faction_leader = yes
							any_allied_country = {
								any_owned_state = { is_claim_or_core_of_ROOT = yes }
							}
						}
						NOT = { has_completed_focus = BUL_path_to_peace } #Bypass for BUL so they can join SER if theyre already friendly
					}
				}
			}
			modifier = {
				add = 100
				tag = GRE
				NOT = { has_game_rule = { rule = GRE_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = GRE_forpol option = GRE_FORPOL_RUS } }
			}
		}
		if = {
			limit = { is_in_tech_sharing_group = balkan_research }
			remove_from_tech_sharing_group = balkan_research
		}
		if = {
			limit = {
				is_in_faction_with = FROM
				is_subject = no
			}
			leave_faction = yes
		}
		if = {
			limit = { has_capitulated = yes }
			custom_effect_tooltip = GAME_OVER_TT
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.40 option serbia_events.40.b"
		name = serbia_events.40.b
		trigger = {
			has_event_target = future_serbian_ally
			NOT = { has_war_with = event_target:future_serbian_ally }
			event_target:future_serbian_ally = { both_socialist_or_both_not_socialist = yes }
		}
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				OR = {
					tag = CZE
					tag = GAL
					RUS = {
						any_owned_state = { is_claim_or_core_of_ROOT = yes }
					}
					AND = {
						RUS = {
							is_faction_leader = yes
							any_allied_country = {
								any_owned_state = { is_claim_or_core_of_ROOT = yes }
							}
						}
						NOT = { has_completed_focus = BUL_path_to_peace } #Bypass for BUL so they can join SER if theyre already friendly
					}
				}
			}
			modifier = {
				factor = 0
				tag = GRE
				NOT = { has_game_rule = { rule = GRE_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = GRE_forpol option = GRE_FORPOL_RUS } }
			}
		}
		if = {
			limit = { is_in_tech_sharing_group = balkan_research }
			remove_from_tech_sharing_group = balkan_research
		}
		event_target:future_serbian_ally = { country_event = { id = serbia_events.42 hours = 8 } }
	}
}

country_event = { #FROM Refuses Serbia
	id = serbia_events.41
	title = serbia_events.41.t
	desc = serbia_events.41.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.41 option serbia_events.41.a"
		name = serbia_events.41.a
		add_opinion_modifier = {
			target = FROM
			modifier = KR_hates_govt
		}
	}
}

country_event = { #FROM wants to join Russia
	id = serbia_events.42
	title = serbia_events.42.t

	desc = {
		text = serbia_events.42.d.ROM
		trigger = {
			FROM = { tag = ROM }
		}
	}
	desc = {
		text = serbia_events.42.d.other
		trigger = {
			NOT = { FROM = { tag = ROM } }
		}
	}

	picture = GFX_report_event_generic_diplomacy1

	trigger = {
		FROM = { is_in_faction = no }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.42 option serbia_events.42.a"
		name = serbia_events.42.a
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				FROM = {
					any_owned_state = { is_claim_or_core_of_ROOT = yes }
				}
			}
		}
		add_to_faction = FROM
		FROM = {
			every_owned_state = {
				limit = { is_claimed_by = ROOT }
				remove_claim_by = ROOT
			}
		}
		hidden_effect = {
			GER = { embargo_FROM = yes }
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.42 option serbia_events.42.b"
		name = serbia_events.42.b
		ai_chance = {
			base = 0
			modifier = {
				add = 50
				FROM = {
					any_owned_state = { is_claim_or_core_of_ROOT = yes }
				}
			}
			modifier = {
				factor = 0
				FROM = { has_capitulated = yes }
			}
		}
		FROM = {
			country_event = { id = serbia_events.4201 hours = 8 }
		}
	}
}

country_event = { #Russia refuses former Serbian ally
	id = serbia_events.4201
	title = serbia_events.4201.t
	desc = serbia_events.4201.d
	picture = GFX_report_event_generic_diplomacy1

	trigger = {
		is_in_faction = no
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.4201 option serbia_events.4201.a"
		name = serbia_events.4201.a
		add_opinion_modifier = {
			target = FROM
			modifier = KR_disapproves_of_govt
		}
	}
}

country_event = { # Formation of the Serbian Radical Union
	id = serbia_events.43
	title = serbia_events.43.t
	desc = serbia_events.43.d
	picture = GFX_report_event_ser_radical_union

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.43 option serbia_events.43.a"
		name = serbia_events.43.a
		add_country_leader_role = {
			character = SER_milan_stojadinovic
			country_leader = {
				desc = SER_milan_stojadinovic_leader_desc
				ideology = social_conservative_subtype
			}
			promote_leader = yes
		}
		set_politics = {
			ruling_party = social_conservative
			elections_allowed = yes
		}
		hidden_effect = {
			add_popularity = {
				ideology = market_liberal
				popularity = -0.2
			}
			add_popularity = {
				ideology = social_conservative
				popularity = 0.2
			}
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			remove_from_coalition = yes
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
			if = {
				limit = {
					has_country_flag = SER_reprad_coalition_flag
				}
				set_temp_variable = { coalition_partner_var = token:social_liberal }
				add_to_coalition = yes
			}
			set_party_name = {
				ideology = social_conservative
				long_name = SER_sarez_party_long
				name = SER_sarez_party
			}
			set_party_name = {
				ideology = market_liberal
				long_name = SER_sarez_party_long
				name = SER_sarez_party
			}
		}
		SER_recalculate_konspiracija = yes
	}
}

country_event = { # Stojadinovic's speech
	id = serbia_events.44
	title = serbia_events.44.t
	desc = serbia_events.44.d
	picture = GFX_report_event_ser_radical_union

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.44 option serbia_events.44.a"
		name = serbia_events.44.a
		SER_reduce_scars = yes
	}
}

country_event = { # Conflict between Radicals and Republicans
	id = serbia_events.45
	title = serbia_events.45.t
	desc = {
		text = serbia_events.45.d1
		trigger = {
			is_in_coalition_with_social_liberal = yes
			is_in_coalition_with_radical_socialist = no
		}
	}
	desc = {
		text = serbia_events.45.d2
		trigger = {
			is_in_coalition_with_radical_socialist = yes
			is_in_coalition_with_social_liberal = no
		}
	}
	desc = {
		text = serbia_events.45.d3
		trigger = {
			is_in_coalition_with_social_liberal = yes
			is_in_coalition_with_radical_socialist = yes
		}
	}
	picture = GFX_report_event_generic_trial_big

	is_triggered_only = yes

	trigger = {
		has_government = authoritarian_democrat
		OR = {
			is_in_coalition_with_social_liberal = yes
			is_in_coalition_with_radical_socialist = yes
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.45 option serbia_events.45.a"
		name = serbia_events.45.a
		add_stability = -0.03
		hidden_effect = {
			country_event = { id = serbia_events.45 days = 60 random_days = 20 }
		}
	}
}
country_event = { # Petar II is put in house arrest
	id = serbia_events.46
	title = serbia_events.46.t
	desc = serbia_events.46.d
	picture = GFX_report_event_yugoslavian_king_peter

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.46 option serbia_events.46.a"
		name = serbia_events.46.a
		add_stability = -0.1
		add_popularity = {
			ideology = national_populist
			popularity = 0.05
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.05
		}
		clr_country_flag = SER_petar_anime_protagonist
	}
}
country_event = { # Vasic visits Stojadinovic
	id = serbia_events.48
	title = serbia_events.48.t
	desc = serbia_events.48.d
	picture = GFX_report_event_generic_trial_big

	is_triggered_only = yes

	trigger = {
		has_government = authoritarian_democrat
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.48 option serbia_events.48.a"
		name = serbia_events.48.a
		set_country_flag = SER_reassured_vasic
		custom_effect_tooltip = SER_vasic_is_not_so_pissed_tt
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.48 option serbia_events.48.b"
		name = serbia_events.48.b
		hidden_effect = {
			country_event = { id = serbia_events.49 days = 3 }
		}
		custom_effect_tooltip = SER_vasic_is_really_pissed_tt
	}
}
country_event = { # Fall of SONU
	id = serbia_events.49
	title = serbia_events.49.t
	desc = serbia_events.49.d
	picture = GFX_report_event_generic_trial_big

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.49 option serbia_events.49.a"
		name = serbia_events.49.a
		add_stability = -0.2
		set_temp_variable = { coalition_partner_var = token:social_liberal }
		remove_from_coalition = yes
		set_temp_variable = { coalition_partner_var = token:social_democrat }
		remove_from_coalition = yes
		set_party_name = {
			ideology = authoritarian_democrat
			long_name = SER_sarez_party_long
			name = SER_sarez_party
		}
		set_party_name = {
			ideology = social_conservative
			long_name = SER_sarez_party_long
			name = SER_sarez_party
		}
		set_party_name = {
			ideology = market_liberal
			long_name = SER_sarez_party_long
			name = SER_sarez_party
		}
		add_popularity = {
			ideology = national_populist
			popularity = 0.05
		}
		SER_recalculate_konspiracija = yes
		set_country_flag = SER_sonu_has_broken
		complete_national_focus = SER_no_communists
		mark_focus_tree_layout_dirty = yes
	}
}

country_event = { #Aviation expertise
	id = serbia_events.50
	title = serbia_events.50.t
	desc = serbia_events.50.d

	is_triggered_only = yes

	option = { #Russia
		log = "[GetLogInfo]: event serbia_events.50 option serbia_events.50.a"
		name = serbia_events.50.a
		trigger = {
			country_exists = RUS
			NOT = { has_war_with = RUS }
		}
		add_ideas = SER_russian_aerial_expertise
	}
	option = { #French
		log = "[GetLogInfo]: event serbia_events.50 option serbia_events.50.b"
		name = serbia_events.50.b
		trigger = {
			country_exists = FRA
			NOT = { has_war_with = FRA }
		}
		add_ideas = SER_french_aerial_expertise
	}
	option = { #none
		log = "[GetLogInfo]: event serbia_events.50 option serbia_events.50.c"
		name = serbia_events.50.c
	}
	after = {
		air_experience = 25
	}
}

country_event = { #Weltkrieg Aeroplanes Replacement
	id = serbia_events.51
	title = serbia_events.51.t
	desc = serbia_events.51.d

	is_triggered_only = yes

	option = { #Russia
		log = "[GetLogInfo]: event serbia_events.51 option serbia_events.51.a"
		name = serbia_events.51.a
		trigger = {
			country_exists = RUS
			NOT = { has_war_with = RUS }
		}
		if = {
			limit = { has_dlc_bba = yes }
			add_equipment_to_stockpile = {
				type = small_plane_airframe_0
				amount = 75
				producer = RUS
			}
		}
		else = {
			add_equipment_to_stockpile = {
				type = fighter_equipment_0
				amount = 75
				producer = RUS
			}
		}
		add_tech_bonus = {
			name = SER_Seek_New_Expertise
			bonus = 0.5
			uses = 1
			category = light_fighter
		}
	}

	option = { #French
		log = "[GetLogInfo]: event serbia_events.51 option serbia_events.51.b"
		name = serbia_events.51.b
		trigger = {
			country_exists = FRA
			NOT = { has_war_with = FRA }
		}
		if = {
			limit = { has_dlc_bba = yes }
			add_equipment_to_stockpile = {
				type = small_plane_airframe_0
				amount = 40
				producer = FRA
			}
		}
		else = {
			add_equipment_to_stockpile = {
				type = fighter_equipment_0
				amount = 40
				producer = FRA
			}
		}
		add_tech_bonus = {
			name = SER_Seek_New_Expertise
			bonus = 1
			uses = 1
			category = light_fighter
		}
	}
	option = { #none
		log = "[GetLogInfo]: event serbia_events.51 option serbia_events.51.c"
		name = serbia_events.51.c
		if = {
			limit = { has_dlc_bba = yes }
			add_equipment_to_stockpile = {
				type = small_plane_airframe_0
				amount = 20
				producer = SER
			}
		}
		else = {
			add_equipment_to_stockpile = {
				type = fighter_equipment_0
				amount = 20
				producer = SER
			}
		}
		add_tech_bonus = {
			name = SER_Seek_New_Expertise
			bonus = 0.5
			uses = 1
			category = light_fighter
		}
	}
}
country_event = { #Fighter-Bombers or Bombers
	id = serbia_events.52
	title = serbia_events.52.t
	desc = serbia_events.52.d

	is_triggered_only = yes

	option = { #Russia
		log = "[GetLogInfo]: event serbia_events.52 option serbia_events.52.a"
		name = serbia_events.52.a
		add_equipment_to_stockpile = {
			type = medium_plane_airframe_0
			amount = 20
			producer = RUS
		}
		add_tech_bonus = {
			name = SER_Fighter_Bomber_Acquisition
			bonus = 1
			uses = 1
			category = tactical_bomber
		}
	}
	option = { #French
		log = "[GetLogInfo]: event serbia_events.52 option serbia_events.52.b"
		name = serbia_events.52.b
		add_equipment_to_stockpile = {
			type = small_plane_cas_airframe_0
			amount = 50
			producer = FRA
		}
		add_tech_bonus = {
			name = SER_Fighter_Bomber_Acquisition
			bonus = 1
			uses = 1
			category = cas_bomber
		}
	}
}
country_event = { #Vidovdan
	id = serbia_events.53
	title = serbia_events.53.t
	desc = serbia_events.53.d
	picture = GFX_report_event_ser_vidovdan

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = serbia_events.53 days = 365 }
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.53 option serbia_events.53.a"
		name = serbia_events.53.a
		add_political_power = 20
	}
}

country_event = { #Construction of the Belgrade-Salonica Railway
	id = serbia_events.54
	title = serbia_events.54.t
	desc = serbia_events.54.d
	picture = GFX_report_event_FNG_railway_construction_3

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.54 option serbia_events.54.a"
		name = serbia_events.54.a
		989 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		731 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		add_opinion_modifier = {
			target = FROM
			modifier = KR_pleased
		}
	}
}

country_event = { #Serbia wants to buy the HMS Lion
	id = serbia_events.55
	title = serbia_events.55.t
	desc = serbia_events.55.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.55 option serbia_events.55.a"
		name = serbia_events.55.a # Yes
		ai_chance = { base = 100 }
		add_political_power = 25
		FROM = {
			country_event = { id = serbia_events.56 days = 2 }
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.55 option serbia_events.55.b"
		name = serbia_events.55.b # No, every ship is needed
		ai_chance = { base = 0 }
		FROM = {
			country_event = { id = serbia_events.57 days = 2 }
		}
	}
}

# Canada agrees to sell the Lion
country_event = {
	id = serbia_events.56
	title = serbia_events.56.t
	desc = serbia_events.56.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.56 option serbia_events.56.a"
		name = serbia_events.56.a # Great!
		add_opinion_modifier = {
			target = FROM
			modifier = KR_pleased
		}
	}
}

# Canada refuses to sell Lion
country_event = {
	id = serbia_events.57
	title = serbia_events.57.t
	desc = serbia_events.57.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.57 option serbia_events.57.a"
		name = serbia_events.57.a # We will remember this
		add_opinion_modifier = {
			target = FROM
			modifier = KR_disapproves_of_govt
		}
		add_political_power = 60
		remove_decision = SER_Purchase_HMS_Lion
	}
}
country_event = { # Final step
	id = serbia_events.58
	title = serbia_events.58.t
	desc = serbia_events.58.d
	picture = GFX_report_event_ser_Stojadinovic_power

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			end_coalition = yes
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.58 option serbia_events.58.a"
		name = serbia_events.58.a
		ai_chance = { base = 50 }
		hidden_effect = {
			set_party_name = {
				ideology = paternal_autocrat
				long_name = SER_sarez_party_long_consolidated
				name = SER_sarez_party
			}
			set_party_name = {
				ideology = authoritarian_democrat
				long_name = SER_sarez_party_long_consolidated
				name = SER_sarez_party
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = -0.25
			}
		}
		add_stability = 0.1
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.25
		}
		set_politics = {
			ruling_party = paternal_autocrat
			elections_allowed = no
		}
		hidden_effect = {
			add_country_leader_role = {
				character = SER_milan_stojadinovic
				country_leader = {
					desc = SER_milan_stojadinovic_leader_desc
					ideology = paternal_autocrat_subtype
					traits = { SER_vodja }
				}
				promote_leader = yes
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.58 option serbia_events.58.b"
		name = serbia_events.58.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
			}
		}
		hidden_effect = {
			set_party_name = {
				ideology = paternal_autocrat
				long_name = SER_sarez_party_long
				name = SER_sarez_party
			}
			set_party_name = {
				ideology = authoritarian_democrat
				long_name = SER_sarez_party_long
				name = SER_sarez_party
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = -0.25
			}
		}
		add_stability = 0.1
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.25
		}
		set_politics = {
			ruling_party = paternal_autocrat
			elections_allowed = no
		}
		add_country_leader_role = {
			character = SER_petar_ii
			country_leader = {
				desc = SER_petar_ii_leader_desc
				ideology = paternal_autocrat_subtype
			}
			promote_leader = yes
		}
		add_ideas = SER_Petar_II_stojadinovic_puppet
		activate_advisor = SER_milan_stojadinovic_sic
		if = {
			limit = {
				is_faction_leader = yes
				BUL = {
					is_subject = no
					is_ally_of_ROOT = yes
					has_country_leader = { character = BUL_alexander_stamboliyski }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = SER_loses_stambo_ally
			hidden_effect = {
				BUL = { country_event = serbia_events.76 }
			}
		}
		hidden_effect = {
			drop_cosmetic_tag = yes
		}
	}
	after = {
		hidden_effect = {
			set_party_name = {
				ideology = social_conservative
				long_name = SER_social_conservative_party_long
				name = SER_social_conservative_party
			}
			set_party_name = {
				ideology = market_liberal
				long_name = SER_sarez_breakaway_party_long
				name = SER_sarez_breakaway_party
			}
			set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
			add_to_coalition = yes
			promote_character = SER_milan_gavrilovic
		}
		SER_recalculate_konspiracija = yes
	}
}
country_event = { # People swayed
	id = serbia_events.59
	title = serbia_events.59.t
	desc = serbia_events.59.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.59 option serbia_events.59.a"
		name = serbia_events.59.a
		if = {
			limit = {
				check_variable = { SER_socialist_control = 3 }
			}
			activate_mission = SER_complete_the_revolution
		}
	}
}
country_event = { # Army controlled
	id = serbia_events.60
	title = serbia_events.60.t
	desc = serbia_events.60.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.60 option serbia_events.60.a"
		name = serbia_events.60.a
		if = {
			limit = {
				check_variable = { SER_socialist_control = 3 }
			}
			activate_mission = SER_complete_the_revolution
		}
	}
}
country_event = { # Parties integrated
	id = serbia_events.61
	title = serbia_events.61.t
	desc = serbia_events.61.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.61 option serbia_events.61.a"
		name = serbia_events.61.a
		if = {
			limit = {
				check_variable = { SER_socialist_control = 3 }
			}
			activate_mission = SER_complete_the_revolution
		}
	}
}
country_event = { # The Revolution Successful
	id = serbia_events.62
	title = serbia_events.62.t
	desc = serbia_events.62.d
	picture = GFX_report_event_generic_happy_crowd

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.62 option serbia_events.62.a"
		name = serbia_events.62.a
		add_manpower = -1000
		add_political_power = -50
		add_stability = -0.2
		hidden_effect = {
			set_party_name = {
				ideology = national_populist
				long_name = SER_national_populist_party_puppet_long
				name = SER_national_populist_party_puppet
			}
			SER_collective_leadership = { retire = yes }
			end_coalition = yes
			set_politics = {
				ruling_party = radical_socialist
				elections_allowed = no
			}
		}
		if = {
			limit = { has_character = SER_dusan_simovic }
			retire_character = SER_dusan_simovic
		}
		if = {
			limit = { has_character = SER_milan_nedic }
			retire_character = SER_milan_nedic
		}
		if = {
			limit = { has_character = SER_milutin_nedic }
			retire_character = SER_milutin_nedic
		}
		if = {
			limit = { has_character = SER_bogoljub_ilic }
			retire_character = SER_bogoljub_ilic
		}
		if = {
			limit = { has_character = SER_dragoljub_mihailovic }
			retire_character = SER_dragoljub_mihailovic
		}
		remove_ideas = SER_konspiracija_idea
		add_ideas = SER_revolution_purged_army
		if = {
			limit = { NOT = { has_completed_focus = SER_Third_Revolution } }
			complete_national_focus = SER_Third_Revolution
		}
		mark_focus_tree_layout_dirty = yes
	}
}
country_event = { # Collapse of the SRP
	id = serbia_events.63
	title = serbia_events.63.t
	desc = serbia_events.63.d
	picture = GFX_report_event_generic_happy_crowd

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.63 option serbia_events.63.a"
		name = serbia_events.63.a
		add_stability = -0.1
		add_popularity = {
			ideology = radical_socialist
			popularity = -0.3
		}
		add_popularity = {
			ideology = national_populist
			popularity = 0.15
		}
		set_politics = {
			ruling_party = social_democrat
			elections_allowed = yes
		}
		hidden_effect = {
			end_coalition = yes
			set_temp_variable = { coalition_partner_var = token:radical_socialist }
			add_to_coalition = yes
			add_country_leader_role = {
				character = SER_trifun_kaclerovic
				country_leader = {
					desc = SER_trifun_kaclerovic_leader_desc
					ideology = social_democrat_subtype
				}
				promote_leader = yes
			}
			add_country_leader_role = {
				character = SER_vukasin_markovic
				country_leader = {
					desc = SER_vukasin_markovic_leader_desc
					ideology = radical_socialist_subtype
				}
				promote_leader = yes
			}
			set_cosmetic_tag = SER_republic
			clr_country_flag = SER_curbed_konspiracija_control_flag
			set_party_name = {
				ideology = social_democrat
				long_name = SER_social_democrat_party_long
				name = SER_social_democrat_party
			}
			set_party_name = {
				ideology = radical_socialist
				long_name = SER_radical_socialist_breakaway_party_long
				name = SER_radical_socialist_breakaway_party
			}
			set_party_name = {
				ideology = syndicalist
				long_name = SER_syndicalist_party_long
				name = SER_syndicalist_breakaway_party
			}
			set_party_name = {
				ideology = totalist
				long_name = SER_totalist_party_long
				name = SER_totalist_breakaway_party
			}
		}
		SER_recalculate_konspiracija = yes
	}
}
country_event = { # The radical monarchists
	id = serbia_events.64
	title = serbia_events.64.t
	desc = serbia_events.64.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.64 option serbia_events.64.a"
		name = serbia_events.64.a
		add_stability = -0.05

		promote_character = SER_dimitrije_ljotic
		set_party_name = {
			ideology = national_populist
			long_name = SER_radical_monarchist_party_long
			name = SER_radical_monarchist_party
		}
		hidden_effect = {
			SER_collective_leadership = { retire = yes }
			set_temp_variable = { coalition_partner_var = token:national_populist }
			add_to_coalition = yes
		}
	}
}
country_event = { # Dictatorship of 6 November
	id = serbia_events.65
	title = serbia_events.65.t
	desc = serbia_events.65.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_government = paternal_autocrat
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.65 option serbia_events.65.a"
		name = serbia_events.65.a
		if = {
			limit = {
				has_completed_focus = SER_anti_republican_crackdown
				has_completed_focus = SER_rehabilitate_officers
				has_completed_focus = SER_monarchist_coalition
			}
			add_stability = 0.1
		}
		else_if = {
			limit = {
				NOT = {
					AND = {
						has_completed_focus = SER_anti_republican_crackdown
						has_completed_focus = SER_rehabilitate_officers
						has_completed_focus = SER_monarchist_coalition
					}
				}
			}
			add_stability = -0.05
		}
		set_party_name = {
			ideology = paternal_autocrat
			long_name = SER_royal_paternal_autocrat_party_long
			name = SER_royal_paternal_autocrat_party
		}
		hidden_effect = {
			set_party_name = {
				ideology = authoritarian_democrat
				long_name = SER_royal_paternal_autocrat_party_long
				name = SER_royal_paternal_autocrat_party
			}
			set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
			add_to_coalition = yes
			country_event = { id = serbia_events.67 days = 90 random_days = 30 }
		}
		complete_national_focus = SER_November_Sixth_Dictatorship
		country_event = serbia_events.66
		set_variable = { SER_zivkovic_foci = 0 }
		set_variable = { SER_ljotic_foci = 0 }
	}
}
country_event = { # Serbian Radical Peasants' Democracy
	id = serbia_events.66
	title = serbia_events.66.t
	desc = serbia_events.66.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.66 option serbia_events.66.a"
		name = serbia_events.66.a
	}
}
country_event = { # Royalists flavor
	id = serbia_events.67
	title = serbia_events.67.t

	desc = {
		text = serbia_events.67.d1 # Z below L
		trigger = {
			has_country_flag = SER_ljotic_dominant
		}
	}
	desc = {
		text = serbia_events.67.d2
		trigger = {
			has_country_flag = SER_ljotic_dominant
		}
	}
	desc = {
		text = serbia_events.67.d3
		trigger = {
			has_country_flag = SER_ljotic_dominant
		}
	}
	desc = {
		text = serbia_events.67.d4 # L below Z
		trigger = {
			has_country_flag = SER_zivkovic_dominant
		}
	}
	desc = {
		text = serbia_events.67.d5
		trigger = {
			has_country_flag = SER_zivkovic_dominant
		}
	}
	desc = {
		text = serbia_events.67.d6
		trigger = {
			has_country_flag = SER_zivkovic_dominant
		}
	}
	desc = {
		text = serbia_events.67.d7 # Roughly equal
		trigger = {
			NOT = {
				has_country_flag = SER_zivkovic_dominant
				has_country_flag = SER_ljotic_dominant
			}
		}
	}

	picture = GFX_report_event_generic_diplomacy3

	trigger = {
		has_idea = SER_Petar_II_regency
	}

	is_triggered_only = yes

	immediate = {
		set_temp_variable = { SER_zivkovic_temp = SER_zivkovic_foci }
		add_to_temp_variable = { SER_zivkovic_temp = 1 }
		set_temp_variable = { SER_ljotic_temp = SER_ljotic_foci }
		add_to_temp_variable = { SER_ljotic_temp = 1 }
		if = {
			limit = {
				check_variable = { SER_ljotic_foci > SER_zivkovic_temp }
			}
			set_country_flag = { flag = SER_ljotic_dominant days = 20 value = 1 }
		}
		else_if = {
			limit = {
				check_variable = { SER_zivkovic_foci > SER_ljotic_temp }
			}
			set_country_flag = { flag = SER_zivkovic_dominant days = 20 value = 1 }
		}
		hidden_effect = {
			country_event = { id = serbia_events.67 days = 90 random_days = 30 }
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.67 option serbia_events.67.a"
		name = serbia_events.67.a
		trigger = {
			has_country_flag = SER_zivkovic_dominant
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.02
		}
		add_stability = 0.01
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.67 option serbia_events.67.b"
		name = serbia_events.67.b
		trigger = {
			has_country_flag = SER_ljotic_dominant
		}
		add_popularity = {
			ideology = national_populist
			popularity = 0.02
		}
		add_stability = 0.01
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.67 option serbia_events.67.c"
		name = serbia_events.67.c
		trigger = {
			NOT = {
				has_country_flag = SER_zivkovic_dominant
				has_country_flag = SER_ljotic_dominant
			}
		}
		add_stability = -0.02
	}
}
country_event = { # March Coup Proposal
	id = serbia_events.68
	title = serbia_events.68.t
	desc = serbia_events.68.d
	picture = GFX_report_event_yugoslavian_king_peter

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		is_subject = no
		has_government = paternal_autocrat
		has_idea = SER_Petar_II_regency
		has_country_flag = SER_petar_anime_protagonist
		check_variable = { SER_petar_score = 2 }
		OR = {
			check_variable = { SER_ljotic_foci = SER_zivkovic_foci }
			AND = {
				set_temp_variable = { SER_total_foci = SER_ljotic_foci }
				add_to_temp_variable = { SER_total_foci = 1 }
				check_variable = { SER_total_foci = SER_zivkovic_foci }
			}
			AND = {
				set_temp_variable = { SER_total_foci = SER_zivkovic_foci }
				add_to_temp_variable = { SER_total_foci = 1 }
				check_variable = { SER_total_foci = SER_ljotic_foci }
			}
		}
		SER_has_founded_yugoslavia = no
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.68 option serbia_events.68.a"
		name = serbia_events.68.a
		ai_chance = { base = 100 }
		set_party_name = {
			ideology = authoritarian_democrat
			long_name = SER_national_populist_party_puppet_long
			name = SER_national_populist_party_puppet
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.1
		}
		hidden_effect = {
			add_country_leader_role = {
				character = SER_petar_ii
				country_leader = {
					desc = SER_petar_ii_leader_desc
					ideology = authoritarian_democrat_subtype
					traits = { SER_peoples_sovereign }
				}
				promote_leader = yes
			}
			country_event = { id = serbia_events.69 days = 7 }
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.68 option serbia_events.68.b"
		name = serbia_events.68.b
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		clr_country_flag = SER_petar_anime_protagonist
	}
}
country_event = { # March Coup
	id = serbia_events.69
	title = serbia_events.69.t
	desc = serbia_events.69.d
	picture = GFX_report_event_ser_monarchy_restored

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		is_subject = no
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.69 option serbia_events.69.a"
		name = serbia_events.69.a
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
		set_politics = {
			ruling_party = authoritarian_democrat
			elections_allowed = no
		}
		set_party_name = {
			ideology = social_liberal
			long_name = SER_democratic_party_long
			name = SER_democratic_party
		}
		add_stability = -0.05
		remove_ideas = SER_Petar_II_regency
		complete_national_focus = SER_March_Conspiracy
		activate_advisor = SER_dusan_simovic_sic
		hidden_effect = {
			set_party_name = {
				ideology = social_conservative
				long_name = SER_market_liberal_party_long
				name = SER_market_liberal_party
			}
			add_country_leader_role = {
				character = SER_petar_ii
				country_leader = {
					desc = SER_petar_ii_leader_desc
					ideology = social_conservative_subtype
					traits = { SER_peoples_sovereign }
				}
				promote_leader = yes
			}
			add_country_leader_role = {
				character = SER_petar_ii
				country_leader = {
					desc = SER_petar_ii_leader_desc
					ideology = market_liberal_subtype
					traits = { SER_peoples_sovereign }
				}
				promote_leader = yes
			}
			add_country_leader_role = {
				character = SER_petar_ii
				country_leader = {
					desc = SER_petar_ii_leader_desc
					ideology = social_liberal_subtype
					traits = { SER_peoples_sovereign }
				}
				promote_leader = yes
			}
			end_coalition = yes
			#SER_remove_royalist_ideas = yes
			country_event = { id = serbia_events.70 days = 10 }
		}
		mark_focus_tree_layout_dirty = yes
	}
}
country_event = { #Forming a government
	id = serbia_events.70
	title = serbia_events.70.t
	desc = serbia_events.70.d
	picture = GFX_report_event_ser_monarchy_restored

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			end_coalition = yes
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.70 option serbia_events.70.a"
		name = serbia_events.70.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
			}
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.15
		}
		add_stability = 0.1
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_liberal
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		activate_advisor = SER_mihailo_ilic_sic
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.70 option serbia_events.70.b"
		name = serbia_events.70.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
			}
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.15
		}
		add_stability = 0.1
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_conservative
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		activate_advisor = SER_nikola_uzunovic_sic
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
		}
	}
}
country_event = { #Kingdom Elections
	id = serbia_events.71
	title = serbia_events.71.t
	desc = serbia_events.71.d
	picture = GFX_report_event_ser_election

	is_triggered_only = yes

	trigger = {
		has_country_flag = SER_has_completed_1936_elc
		has_elected_government = yes
		has_country_leader = { character = SER_petar_ii }
		SER_has_founded_yugoslavia = no
	}

	immediate = {
		hidden_effect = {
			end_coalition = yes
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.71 option serbia_events.71.a"
		name = serbia_events.71.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.2
				has_government = social_conservative
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
			}
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		set_politics = {
			ruling_party = social_liberal
			election_frequency = 48
			elections_allowed = yes
		}
		activate_advisor = SER_mihailo_ilic_sic
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.71 option serbia_events.71.b"
		name = serbia_events.71.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.2
				has_government = social_liberal
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
			}
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.05
		}
		set_politics = {
			ruling_party = social_conservative
			election_frequency = 48
			elections_allowed = yes
		}
		activate_advisor = SER_nikola_uzunovic_sic
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
		}
	}
}
country_event = { # King Peter reaches maturity
	id = serbia_events.72
	title = serbia_events.72.t
	desc = serbia_events.72.d
	picture = GFX_report_event_yugoslavian_king_peter

	is_triggered_only = yes
	trigger = {
		has_idea = SER_Petar_II_regency
		has_government = paternal_autocrat
		is_subject = no
	}
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			end_coalition = yes
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.72 option serbia_events.72.a"
		name = serbia_events.72.a
		trigger = {
			check_variable = { SER_zivkovic_foci < SER_ljotic_foci }
		}
		add_popularity = {
			ideology = national_populist
			popularity = 0.1
		}
		add_stability = 0.05
		set_politics = {
			ruling_party = national_populist
			elections_allowed = no
		}
		remove_ideas = SER_Petar_II_regency
		if = {
			limit = { has_completed_focus = SER_ljotic_constitution }
			add_country_leader_role = {
				character = SER_petar_ii
				country_leader = {
					desc = SER_petar_ii_leader_desc
					ideology = national_populist_subtype
					traits = { SER_idealised_sovereign }
				}
				promote_leader = yes
			}
			hidden_effect = {
				add_country_leader_role = {
					character = SER_petar_ii
					country_leader = {
						desc = SER_petar_ii_leader_desc
						ideology = paternal_autocrat_subtype
						traits = { SER_idealised_sovereign }
					}
					promote_leader = yes
				}
				add_country_leader_role = {
					character = SER_petar_ii
					country_leader = {
						desc = SER_petar_ii_leader_desc
						ideology = authoritarian_democrat_subtype
						traits = { SER_idealised_sovereign }
					}
					promote_leader = yes
				}
			}
		}
		else = {
			add_country_leader_role = {
				character = SER_petar_ii
				country_leader = {
					desc = SER_petar_ii_leader_desc
					ideology = national_populist_subtype
				}
				promote_leader = yes
			}
			hidden_effect = {
				add_country_leader_role = {
					character = SER_petar_ii
					country_leader = {
						desc = SER_petar_ii_leader_desc
						ideology = paternal_autocrat_subtype
					}
					promote_leader = yes
				}
				add_country_leader_role = {
					character = SER_petar_ii
					country_leader = {
						desc = SER_petar_ii_leader_desc
						ideology = authoritarian_democrat_subtype
					}
					promote_leader = yes
				}
			}
		}
		activate_advisor = SER_dimitrije_ljotic_sic
		hidden_effect = {
			if = {
				limit = { SER_has_founded_yugoslavia = yes }
				if = {
					limit = { has_completed_focus = SER_YUG_anti_partisanship }
					set_party_name = {
						ideology = authoritarian_democrat
						name = SER_YUG_new_royal_paternal_autocrat_party
						long_name = SER_YUG_new_royal_paternal_autocrat_party_long
					}
					set_party_name = {
						ideology = paternal_autocrat
						name = SER_YUG_new_royal_paternal_autocrat_party
						long_name = SER_YUG_new_royal_paternal_autocrat_party_long
					}
					set_party_name = {
						ideology = national_populist
						name = SER_YUG_new_royal_paternal_autocrat_party
						long_name = SER_YUG_new_royal_paternal_autocrat_party_long
					}
				}
				else = {
					set_party_name = {
						ideology = authoritarian_democrat
						name = SER_YUG_royal_paternal_autocrat_party
						long_name = SER_YUG_royal_paternal_autocrat_party_long
					}
					set_party_name = {
						ideology = paternal_autocrat
						name = SER_YUG_royal_paternal_autocrat_party
						long_name = SER_YUG_royal_paternal_autocrat_party_long
					}
					set_party_name = {
						ideology = national_populist
						name = SER_YUG_royal_paternal_autocrat_party
						long_name = SER_YUG_royal_paternal_autocrat_party_long
					}
				}
			}
			else = {
				set_party_name = {
					ideology = national_populist
					name = SER_royal_paternal_autocrat_party
					long_name = SER_royal_paternal_autocrat_party_long
				}
				set_party_name = {
					ideology = paternal_autocrat
					name = SER_royal_paternal_autocrat_party
					long_name = SER_royal_paternal_autocrat_party_long
				}
				set_party_name = {
					ideology = authoritarian_democrat
					name = SER_royal_paternal_autocrat_party
					long_name = SER_royal_paternal_autocrat_party_long
				}
			}
			set_temp_variable = { coalition_partner_var = token:paternal_autocrat }
			add_to_coalition = yes
			set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
			add_to_coalition = yes
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.72 option serbia_events.72.b"
		name = serbia_events.72.b
		trigger = {
			check_variable = {
				var = SER_zivkovic_foci
				value = SER_ljotic_foci
				compare = greater_than_or_equals
			}
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.1
		}
		add_stability = 0.05
		remove_ideas = SER_Petar_II_regency
		if = {
			limit = { has_completed_focus = SER_foster_elite_cooperation }
			add_country_leader_role = {
				character = SER_petar_ii
				country_leader = {
					desc = SER_petar_ii_leader_desc
					ideology = paternal_autocrat_subtype
					traits = { SER_connected_with_the_elite }
				}
				promote_leader = yes
			}
			hidden_effect = {
				add_country_leader_role = {
					character = SER_petar_ii
					country_leader = {
						desc = SER_petar_ii_leader_desc
						ideology = national_populist_subtype
						traits = { SER_connected_with_the_elite }
					}
					promote_leader = yes
				}
				add_country_leader_role = {
					character = SER_petar_ii
					country_leader = {
						desc = SER_petar_ii_leader_desc
						ideology = authoritarian_democrat_subtype
						traits = { SER_connected_with_the_elite }
					}
					promote_leader = yes
				}
			}
		}
		else = {
			add_country_leader_role = {
				character = SER_petar_ii
				country_leader = {
					desc = SER_petar_ii_leader_desc
					ideology = paternal_autocrat_subtype
				}
				promote_leader = yes
			}
			hidden_effect = {
				add_country_leader_role = {
					character = SER_petar_ii
					country_leader = {
						desc = SER_petar_ii_leader_desc
						ideology = national_populist_subtype
					}
					promote_leader = yes
				}
				add_country_leader_role = {
					character = SER_petar_ii
					country_leader = {
						desc = SER_petar_ii_leader_desc
						ideology = authoritarian_democrat_subtype
					}
					promote_leader = yes
				}
			}
		}
		activate_advisor = SER_petar_zivkovic_sic
		hidden_effect = {
			if = {
				limit = { SER_has_founded_yugoslavia = yes }
				set_party_name = {
					ideology = authoritarian_democrat
					long_name = SER_YUG_royal_paternal_autocrat_party_long
					name = SER_YUG_royal_paternal_autocrat_party
				}
				set_party_name = {
					ideology = paternal_autocrat
					long_name = SER_YUG_royal_paternal_autocrat_party_long
					name = SER_YUG_royal_paternal_autocrat_party
				}
				set_party_name = {
					ideology = national_populist
					long_name = SER_YUG_royal_paternal_autocrat_party_long
					name = SER_YUG_royal_paternal_autocrat_party
				}
			}
			else = {
				set_party_name = {
					ideology = national_populist
					long_name = SER_royal_paternal_autocrat_party_long
					name = SER_royal_paternal_autocrat_party
				}
				set_party_name = {
					ideology = paternal_autocrat
					long_name = SER_royal_paternal_autocrat_party_long
					name = SER_royal_paternal_autocrat_party
				}
				set_party_name = {
					ideology = authoritarian_democrat
					long_name = SER_royal_paternal_autocrat_party_long
					name = SER_royal_paternal_autocrat_party
				}
			}
			set_temp_variable = { coalition_partner_var = token:national_populist }
			add_to_coalition = yes
			set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
			add_to_coalition = yes
		}
	}
}
country_event = { # Nedić Brothers Coup
	id = serbia_events.73
	title = serbia_events.73.t
	desc = serbia_events.73.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.73 option serbia_events.73.a"
		name = serbia_events.73.a
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.25
		}
		set_party_name = {
			ideology = paternal_autocrat
			long_name = SER_national_populist_party_puppet_long
			name = SER_national_populist_party_puppet
		}
		add_country_leader_role = {
			character = SER_milan_nedic
			country_leader = {
				desc = SER_milan_nedic_commander_desc
				ideology = paternal_autocrat_subtype
			}
			promote_leader = yes
		}
		set_politics = {
			ruling_party = paternal_autocrat
			elections_allowed = no
		}
		activate_advisor = SER_bogoljub_ilic_sic
		set_temp_variable = { coalition_partner_var = token:national_populist }
		add_to_coalition = yes
		add_stability = -0.25
		remove_ideas = SER_konspiracija_idea
		remove_ideas = SER_the_dream_of_yugoslavia
		remove_dynamic_modifier = { modifier = YUG_serbia_dynamic_modifier }
		remove_dynamic_modifier = { modifier = YUG_croatia_dynamic_modifier }
		remove_dynamic_modifier = { modifier = YUG_bosnia_dynamic_modifier }
		remove_dynamic_modifier = { modifier = YUG_slovenia_dynamic_modifier }
		remove_dynamic_modifier = { modifier = YUG_other_dynamic_modifier }
		SER_disable_yugoslavia_integration = yes
		every_core_state = {
			limit = {
				OR = {
					is_core_of = SLV
					is_core_of = CRO
					is_core_of = BOS
				}
				NOT = { is_core_of = MNT }
				NOT = { state = 45 } #Vojvodina
				NOT = { state = 106 } #Macedonia
				NOT = { state = 794 } #Syrmia
				NOT = { state = 841 } #Kotor
				NOT = { state = 875 } #West Banat
			}
			remove_core_of = ROOT
		}
		hidden_effect = {
			remove_mission = YUG_rounds_system_mission
			YUG_reset_yugoslavia_missions = yes
			set_party_name = {
				ideology = national_populist
				long_name = SER_national_populist_party_puppet_long
				name = SER_national_populist_party_puppet
			}
			SER_collective_leadership = { retire = yes }
			add_country_leader_role = {
				character = SER_milan_nedic
				country_leader = {
					desc = SER_milan_nedic_commander_desc
					ideology = national_populist_subtype
				}
				promote_leader = yes
			}
			end_coalition = yes
			drop_cosmetic_tag = yes
			SER_remove_revolut_socialist_ideas = yes
			SER_remove_radical_ideas = yes
			SER_remove_republican_ideas = yes
			remove_ideas = SER_puppet_show
			clr_country_flag = YUG_usy_formed
			clr_country_flag = YUG_three_named_nation_formed
			clr_country_flag = YUG_balkan_socialist_federation_formed
			clr_country_flag = YUG_integral_yugoslavia_formed
			if = {
				limit = { has_character = SER_konstantin_popovic }
				retire_character = SER_konstantin_popovic
			}
			if = {
				limit = { NOT = { has_character = SER_milutin_nedic } }
				SER_milutin_nedic = { set_nationality = ROOT }
			}
			country_event = { id = serbia_events.74 days = 7 }
		}
		mark_focus_tree_layout_dirty = yes
	}
}
country_event = { # Rebellions in the North
	id = serbia_events.74
	immediate = {
		hidden_effect = {
			YUG_spawn_slovenia_rebellion = yes
			YUG_spawn_croatia_rebellion = yes
			YUG_spawn_bosnia_rebellion = yes
		}
	}
	title = serbia_events.74.t
	desc = serbia_events.74.d
	picture = GFX_report_event_ser_slovene_rebellion

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.74 option serbia_events.74.a"
		name = serbia_events.74.a
		clr_global_flag = SER_keeping_the_pact
		if = {
			limit = { tag = BPL }
			dismantle_faction = yes
		}
		else_if = {
			limit = { is_in_faction = yes }
			leave_faction = yes
		}
		effect_tooltip = {
			declare_war_on = {
				target = SLV
				type = annex_everything
			}
			declare_war_on = {
				target = CRO
				type = annex_everything
			}
			declare_war_on = {
				target = BOS
				type = annex_everything
			}
		}
		hidden_effect = {
			add_state_claim = 104
			add_state_claim = 163
			add_state_claim = 794
			country_event = { id = serbia_events.75 days = 7 }
			division_template = {
				name = "Srpsko domobranstvo"
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
				}
			}
			104 = {
				create_unit = {
					division = "name = \"Prečani Serbian Home Guard\" division_template = \"Srpsko domobranstvo\" start_experience_factor = 0.1"
					allow_spawning_on_enemy_provs = yes
					owner = SER
					prioritize_location = 6983
				}
			}
		}
	}
}
country_event = { # Socialist Serbia rises
	id = serbia_events.75
	immediate = {
		hidden_effect = {
			YUG_spawn_socialist_rebellion = yes
			every_subject_country = {
				ROOT = {
					set_autonomy = {
						target = PREV
						autonomy_state = autonomy_free
					}
				}
			}
		}
	}
	title = serbia_events.75.t
	desc = serbia_events.75.d
	picture = GFX_report_event_ser_left_rebellion

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.75 option serbia_events.75.a"
		name = serbia_events.75.a
		effect_tooltip = {
			transfer_units_fraction = {
				target = event_target:ASOS_uprising
				target_organization = 1
				source_organization = 1
				size = 0.3
				navy_ratio = 0
				keep_unit_leaders_trigger = { always = yes }
			}
			declare_war_on = {
				target = event_target:ASOS_uprising
				type = annex_everything
			}
		}
	}
}
country_event = { # Stojadinovic tries to restore monarchy, and Stambo leaves the faction
	id = serbia_events.76
	title = serbia_events.76.t
	desc = serbia_events.76.d
	picture = GFX_report_event_ser_Stojadinovic_power

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		SER = { is_faction_leader = yes }
		is_subject = no
		is_ally_with = SER
		has_country_leader = { character = BUL_alexander_stamboliyski }
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.76 option serbia_events.76.a"
		name = serbia_events.76.a
		ai_chance = { base = 100 }
		add_political_power = 25
		leave_faction = yes
		separate_peace_all_wars = yes
	}
	option = {
		log = "[GetLogInfo]: event serbia_events.76 option serbia_events.76.b"
		name = serbia_events.76.b
		ai_chance = { base = 0 }
		add_political_power = -50
	}
}
country_event = { #event for Serbia, Bulgaria is defeated
	id = serbia_events.77
	title = serbia_events.77.t
	desc = serbia_events.77.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		OR = {
			NOT = { country_exists = BUL }
			has_subject = BUL
			BUL = { has_country_flag = BUL_balkan_peace_loss }
		}
		OR = {
			SER_has_scarred_nation = yes
			has_active_mission = SER_prove_to_the_people
			has_active_mission = SER_defang_the_army
			has_active_mission = SER_merge_the_coalition_parties
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_events.77 option serbia_events.77.a"
		name = serbia_events.77.a
		if = {
			limit = { SER_has_scarred_nation = yes }
			SER_reduce_scars = yes
		}
		if = {
			limit = { has_active_mission = SER_prove_to_the_people }
			add_days_mission_timeout = {
				mission = SER_prove_to_the_people
				days = 90
			}
		}
		if = {
			limit = { has_active_mission = SER_defang_the_army }
			add_days_mission_timeout = {
				mission = SER_defang_the_army
				days = 90
			}
		}
		if = {
			limit = { has_active_mission = SER_merge_the_coalition_parties }
			add_days_mission_timeout = {
				mission = SER_merge_the_coalition_parties
				days = 90
			}
		}
	}
}

# hidden event to spawn the Chetnik divisions (donotlog)
country_event = {
	id = serbia_events.998
	hidden = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.998 option 1"
		SER_spawn_drina_divisions = yes
	}
}

# hidden event to clear the Congress arrays
country_event = {
	id = serbia_events.999
	hidden = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_events.999 option 1"
		clr_country_flag = SER_war_against_austria
		clr_country_flag = SER_diplomacy_with_austria
		clear_array = SER.SER_attending_congress
		clear_array = SER.SER_will_attack_austria
		every_other_country = {
			limit = { has_country_flag = SER_will_attack_austria }
			clr_country_flag = SER_will_attack_austria
		}
	}
}

#############
# Events for Yugoslavia mechanics
#############

country_event = { # Rebellions in the North
	id = yugoslavia_mechanics_events.1
	title = yugoslavia_mechanics_events.1.t
	desc = yugoslavia_mechanics_events.1.d
	picture = GFX_report_event_ser_croat_rebellion

	trigger = {
		109 = { is_owned_and_controlled_by = ROOT } #Central Croatia
		NOT = { country_exists = CRO }
		has_capitulated = no
	}

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			YUG_spawn_croatia_rebellion = yes
			add_timed_idea = {
				idea = has_scripted_peace
				days = 30
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event yugoslavia_mechanics_events.1 option yugoslavia_mechanics_events.1.a"
		name = yugoslavia_mechanics_events.1.a
		effect_tooltip = {
			declare_war_on = {
				target = CRO
				type = annex_everything
			}
		}
		set_temp_variable = { checked_state = 2 } # Croatia
		set_temp_variable = { ethnic_situation = 5 }
		custom_effect_tooltip = YUG_croatia_improve_relations_tt
		YUG_update_ethnic_situation = yes
	}
}
country_event = { # Rebellions in the North
	id = yugoslavia_mechanics_events.2
	title = yugoslavia_mechanics_events.2.t
	desc = yugoslavia_mechanics_events.2.d
	picture = GFX_report_event_ser_bosnian_rebellion

	trigger = {
		104 = { is_owned_and_controlled_by = ROOT } #Bosnia
		NOT = { country_exists = BOS }
		has_capitulated = no
	}

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			YUG_spawn_bosnia_rebellion = yes
		}
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_mechanics_events.2 option yugoslavia_mechanics_events.2.a"
		name = yugoslavia_mechanics_events.2.a
		effect_tooltip = {
			declare_war_on = {
				target = BOS
				type = annex_everything
			}
		}
		set_temp_variable = { checked_state = 3 } # Bosnia
		set_temp_variable = { ethnic_situation = 5 }
		custom_effect_tooltip = YUG_bosnia_improve_relations_tt
		YUG_update_ethnic_situation = yes
	}
}
country_event = { # Rebellions in the North
	id = yugoslavia_mechanics_events.3
	title = yugoslavia_mechanics_events.3.t
	desc = yugoslavia_mechanics_events.3.d
	picture = GFX_report_event_ser_slovene_rebellion

	trigger = {
		102 = { is_owned_and_controlled_by = ROOT } #Carniola
		NOT = { country_exists = SLV }
		has_capitulated = no
	}

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			YUG_spawn_slovenia_rebellion = yes
		}
	}

	option = {
		log = "[GetLogInfo]: event yugoslavia_mechanics_events.3 option yugoslavia_mechanics_events.3.a"
		name = yugoslavia_mechanics_events.3.a
		effect_tooltip = {
			declare_war_on = {
				target = SLV
				type = annex_everything
			}
		}
		set_temp_variable = { checked_state = 4 } # Slovenia
		set_temp_variable = { ethnic_situation = 5 }
		custom_effect_tooltip = YUG_slovenia_improve_relations_tt
		YUG_update_ethnic_situation = yes
	}
}
country_event = { # Random event pulse
	id = yugoslavia_mechanics_events.4

	is_triggered_only = yes
	hidden = yes

	trigger = {
		SER_has_founded_yugoslavia = yes
		NOT = {
			has_completed_focus = SER_YUG_brotherhood_and_unity
		}
	}

	option = {
		log = "[GetLogInfo]: event yugoslavia_mechanics_events.4 option 1"
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				has_country_flag = YUG_flavor_event_1_fired
			}
		}
		set_country_flag = { flag = YUG_flavor_event_1 days = 7 value = 1 }
		set_country_flag = { flag = YUG_flavor_event_1_fired days = 271 value = 1 }
		country_event = yugoslavia_events.16
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_mechanics_events.4 option 2"
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				has_country_flag = YUG_flavor_event_2_fired
			}
		}
		set_country_flag = { flag = YUG_flavor_event_2 days = 7 value = 1 }
		set_country_flag = { flag = YUG_flavor_event_2_fired days = 271 value = 1 }
		country_event = yugoslavia_events.16
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_mechanics_events.4 option 3"
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				has_country_flag = YUG_flavor_event_3_fired
			}
		}
		set_country_flag = { flag = YUG_flavor_event_3 days = 7 value = 1 }
		set_country_flag = { flag = YUG_flavor_event_3_fired days = 271 value = 1 }
		country_event = yugoslavia_events.16
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_mechanics_events.4 option 4"
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				has_country_flag = YUG_flavor_event_4_fired
			}
		}
		set_country_flag = { flag = YUG_flavor_event_4 days = 7 value = 1 }
		set_country_flag = { flag = YUG_flavor_event_4_fired days = 271 value = 1 }
		country_event = yugoslavia_events.16
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_mechanics_events.4 option 5"
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				has_country_flag = YUG_flavor_event_5_fired
			}
		}
		set_country_flag = { flag = YUG_flavor_event_5 days = 7 value = 1 }
		set_country_flag = { flag = YUG_flavor_event_5_fired days = 271 value = 1 }
		country_event = yugoslavia_events.16
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_mechanics_events.4 option 6"
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				has_country_flag = YUG_flavor_event_6_fired
			}
		}
		set_country_flag = { flag = YUG_flavor_event_6 days = 7 value = 1 }
		set_country_flag = { flag = YUG_flavor_event_6_fired days = 271 value = 1 }
		country_event = yugoslavia_events.16
	}
}

country_event = {
	id = yugoslavia_mechanics_events.6
	title = yugoslavia_mechanics_events.6.t
	desc = yugoslavia_mechanics_events.6.d
	picture = GFX_report_event_yugoslavian_split

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_mechanics_events.6 option yugoslavia_mechanics_events.6.a"
		name = yugoslavia_mechanics_events.6.a
	}
}
country_event = {
	id = yugoslavia_mechanics_events.7
	title = yugoslavia_mechanics_events.7.t
	desc = yugoslavia_mechanics_events.7.d
	picture = GFX_report_event_yugoslavian_split

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_mechanics_events.7 option yugoslavia_mechanics_events.7.a"
		name = yugoslavia_mechanics_events.7.a
	}
}

###########################
# Puppet Serbia Events
###########################

country_event = { #Puppet Introduction
	id = serbia_puppet_events.1
	title = serbia_puppet_events.1.t
	desc = serbia_puppet_events.1.d
	picture = GFX_report_event_generic_diplomacy3
	trigger = {
		tag = SER
		is_subject_of = BUL
	}
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.1 option serbia_puppet_events.1.a"
		name = serbia_puppet_events.1.a
		complete_national_focus = SER_under_bulgarian_hegemony
	}
}
country_event = { #start of reforms
	id = serbia_puppet_events.2
	title = serbia_puppet_events.2.t
	desc = serbia_puppet_events.2.d
	picture = GFX_report_event_generic_diplomacy2

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.2 option serbia_puppet_events.2.a"
		name = serbia_puppet_events.2.a
		set_variable = { ser_liberal = 1 }
		set_variable = { ser_autho = 0 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.2 option serbia_puppet_events.2.b"
		name = serbia_puppet_events.2.b
		set_variable = { ser_autho = 1 }
		set_variable = { ser_liberal = 0 }
	}
	after = {
		hidden_effect = {
			country_event = { id = serbia_puppet_events.3 days = 7 }
		}
	}
}
country_event = {
	id = serbia_puppet_events.3
	title = serbia_puppet_events.3.t
	desc = serbia_puppet_events.3.d
	picture = GFX_report_event_generic_diplomacy2

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.3 option serbia_puppet_events.3.a"
		name = serbia_puppet_events.3.a
		add_to_variable = { ser_liberal = 1 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.3 option serbia_puppet_events.3.b"
		name = serbia_puppet_events.3.b
		add_to_variable = { ser_autho = 1 }
	}
	after = {
		hidden_effect = {
			country_event = { id = serbia_puppet_events.4 days = 7 }
		}
	}
}
country_event = {
	id = serbia_puppet_events.4
	title = serbia_puppet_events.4.t
	desc = serbia_puppet_events.4.d
	picture = GFX_report_event_generic_conference2

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.4 option serbia_puppet_events.4.a"
		name = serbia_puppet_events.4.a
		add_to_variable = { ser_liberal = 1 }
		hidden_effect = {
			if = {
				limit = {
					check_variable = { ser_liberal > ser_autho }
				}
				country_event = { id = serbia_puppet_events.5 days = 7 }
			}
			else = {
				country_event = { id = serbia_puppet_events.6 days = 7 }
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.4 option serbia_puppet_events.4.b"
		name = serbia_puppet_events.4.b
		add_to_variable = { ser_autho = 1 }
		hidden_effect = {
			if = {
				limit = {
					check_variable = { ser_liberal < ser_autho }
				}
				country_event = { id = serbia_puppet_events.6 days = 7 }
			}
			else = {
				country_event = { id = serbia_puppet_events.5 days = 7 }
			}
		}
	}
}
country_event = { #liberal reforms
	id = serbia_puppet_events.5
	title = serbia_puppet_events.5.t
	desc = serbia_puppet_events.5.d
	fire_only_once = yes
	is_triggered_only = yes
	picture = GFX_report_event_generic_happy_crowd

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.5 option serbia_puppet_events.5.a"
		name = serbia_puppet_events.5.a
		swap_ideas = {
			remove_idea = SER_progressive_reforms_base
			add_idea = SER_progressive_reforms_liberal
		}
	}
}
country_event = { #authoritarian reforms
	id = serbia_puppet_events.6
	title = serbia_puppet_events.6.t
	desc = serbia_puppet_events.6.d
	fire_only_once = yes
	is_triggered_only = yes
	picture = GFX_report_event_generic_arrests

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.6 option serbia_puppet_events.6.a"
		name = serbia_puppet_events.6.a
		swap_ideas = {
			remove_idea = SER_progressive_reforms_base
			add_idea = SER_progressive_reforms_authoritarian
		}
	}
}
country_event = { ### leader meet independantist discretely
	id = serbia_puppet_events.7
	title = serbia_puppet_events.7.t
	desc = serbia_puppet_events.7.d
	picture = GFX_report_event_generic_diplomacy3
	is_triggered_only = yes
	fire_only_once = yes

	option = { ###meet him
		log = "[GetLogInfo]: event serbia_puppet_events.7 option serbia_puppet_events.7.a"
		name = serbia_puppet_events.7.a
		ai_chance = { base = 75 }
		###discretion of the independance movement, if variable fall to 1, bulgaria annex SER, to 3 SER declares war. If SER reaches 8-9-10 they got a bonus of surprise.
		set_variable = { ser_stealth = 5 }
		hidden_effect = {
			country_event = { id = serbia_puppet_events.8 days = 7 }
		}
	}
	option = { ###no way, arrest him
		log = "[GetLogInfo]: event serbia_puppet_events.7 option serbia_puppet_events.7.b"
		name = serbia_puppet_events.7.b
		ai_chance = { base = 25 }
		add_political_power = 20
	}
}
country_event = { ### Involve members of the government
	id = serbia_puppet_events.8
	title = serbia_puppet_events.8.t
	desc = serbia_puppet_events.8.d
	picture = GFX_report_event_generic_diplomacy3
	is_triggered_only = yes
	fire_only_once = yes

	option = { ### no way, no confidence
		log = "[GetLogInfo]: event serbia_puppet_events.8 option serbia_puppet_events.8.a"
		name = serbia_puppet_events.8.a
		custom_effect_tooltip = SER_NCR_gains_stealth
		add_to_variable = { ser_stealth = 1 }
	}
	option = { ### maybe we can gain some support
		log = "[GetLogInfo]: event serbia_puppet_events.8 option serbia_puppet_events.8.b"
		name = serbia_puppet_events.8.b
		custom_effect_tooltip = SER_NCR_loses_stealth
		add_to_variable = { ser_stealth = -1 }
		add_political_power = 100
	}
	after = {
		hidden_effect = {
			country_event = { id = serbia_puppet_events.9 days = 7 }
		}
	}
}
country_event = { ### Involve generals ?
	id = serbia_puppet_events.9
	title = serbia_puppet_events.9.t
	desc = serbia_puppet_events.9.d
	picture = GFX_report_event_ROM_generals
	is_triggered_only = yes
	fire_only_once = yes

	option = { ### no way, no confidence
		log = "[GetLogInfo]: event serbia_puppet_events.9 option serbia_puppet_events.9.a"
		name = serbia_puppet_events.9.a
		ai_chance = { base = 60 }
		custom_effect_tooltip = SER_NCR_gains_stealth
		add_to_variable = { ser_stealth = 1 }
	}
	option = { ### maybe we can gain some support
		log = "[GetLogInfo]: event serbia_puppet_events.9 option serbia_puppet_events.9.b"
		name = serbia_puppet_events.9.b
		ai_chance = { base = 40 }
		custom_effect_tooltip = SER_NCR_loses_stealth
		add_to_variable = { ser_stealth = -1 }
		add_war_support = 0.1
		add_command_power = 100
	}
	after = {
		hidden_effect = {
			country_event = { id = serbia_puppet_events.10 days = 7 }
		}
	}
}
country_event = { ### Find military equipment
	id = serbia_puppet_events.10
	title = serbia_puppet_events.10.t
	desc = serbia_puppet_events.10.d
	picture = GFX_report_event_CHI_machinegun_fighting
	is_triggered_only = yes
	fire_only_once = yes

	option = { ### too risky
		log = "[GetLogInfo]: event serbia_puppet_events.10 option serbia_puppet_events.10.a"
		name = serbia_puppet_events.10.a
		ai_chance = { base = 30 }
		custom_effect_tooltip = SER_NCR_gains_stealth
		add_to_variable = { ser_stealth = 1 }
	}
	option = { ### it's necessary
		log = "[GetLogInfo]: event serbia_puppet_events.10 option serbia_puppet_events.10.b"
		name = serbia_puppet_events.10.b
		ai_chance = { base = 70 }
		custom_effect_tooltip = SER_NCR_greatly_loses_stealth
		add_to_variable = { ser_stealth = -2 }
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 2000
			producer = AUS
		}
	}
	after = {
		hidden_effect = {
			country_event = { id = serbia_puppet_events.11 days = 7 }
		}
	}
}
country_event = { ### Find men
	id = serbia_puppet_events.11
	title = serbia_puppet_events.11.t
	desc = serbia_puppet_events.11.d
	picture = GFX_report_event_POR_demand_accept
	is_triggered_only = yes
	fire_only_once = yes

	option = { ### too risky
		log = "[GetLogInfo]: event serbia_puppet_events.11 option serbia_puppet_events.11.a"
		name = serbia_puppet_events.11.a
		ai_chance = { base = 30 }
		custom_effect_tooltip = SER_NCR_gains_stealth
		add_to_variable = { ser_stealth = 1 }
	}
	option = { ### it's necessary
		log = "[GetLogInfo]: event serbia_puppet_events.11 option serbia_puppet_events.11.b"
		name = serbia_puppet_events.11.b
		ai_chance = { base = 70 }
		custom_effect_tooltip = SER_NCR_greatly_loses_stealth
		add_to_variable = { ser_stealth = -2 }
		add_manpower = 4000
	}
	after = {
		hidden_effect = {
			country_event = { id = serbia_puppet_events.18 days = 7 }
		}
	}
}
country_event = { ### Hiding guns in Churches ?
	id = serbia_puppet_events.18
	title = serbia_puppet_events.18.t
	desc = serbia_puppet_events.18.d
	picture = GFX_report_event_generic_church
	is_triggered_only = yes
	fire_only_once = yes

	option = { ### dewit
		log = "[GetLogInfo]: event serbia_puppet_events.18 option serbia_puppet_events.18.a"
		name = serbia_puppet_events.18.a
		ai_chance = { base = 60 }
		custom_effect_tooltip = SER_NCR_greatly_gains_stealth
		add_to_variable = { ser_stealth = 2 }
		add_political_power = -100
	}
	option = { ### don't touch to churches
		log = "[GetLogInfo]: event serbia_puppet_events.18 option serbia_puppet_events.18.b"
		name = serbia_puppet_events.18.b
		ai_chance = { base = 40 }
		custom_effect_tooltip = SER_NCR_loses_stealth
		add_to_variable = { ser_stealth = -1 }
	}
	after = {
		hidden_effect = {
			country_event = { id = serbia_puppet_events.12 days = 7 }
		}
	}
}
country_event = { ### recruit mercenaries ?
	id = serbia_puppet_events.12
	title = serbia_puppet_events.12.t
	desc = serbia_puppet_events.12.d
	picture = GFX_report_event_USA_desert_battle
	is_triggered_only = yes
	fire_only_once = yes

	option = { ### too risky
		log = "[GetLogInfo]: event serbia_puppet_events.12 option serbia_puppet_events.12.a"
		name = serbia_puppet_events.12.a
		ai_chance = { base = 60 }
		custom_effect_tooltip = SER_NCR_gains_stealth
		add_to_variable = { ser_stealth = 1 }
	}
	option = { ### we need them
		log = "[GetLogInfo]: event serbia_puppet_events.12 option serbia_puppet_events.12.b"
		name = serbia_puppet_events.12.b
		ai_chance = { base = 40 }
		custom_effect_tooltip = SER_NCR_greatly_loses_stealth
		add_to_variable = { ser_stealth = -3 }
		107 = {
			create_unit = {
				division = "division_template = \"Pesadijska Divizija\" start_experience_factor = 0.9"
				owner = ROOT
				count = 3
			}
		}
	}
	after = {
		hidden_effect = {
			country_event = { id = serbia_puppet_events.13 days = 7 }
		}
	}
}
country_event = {
	id = serbia_puppet_events.13
	title = serbia_puppet_events.13.t
	desc = serbia_puppet_events.13.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.13 option serbia_puppet_events.13.a"
		name = serbia_puppet_events.13.a
		hidden_effect = {
			if = {
				limit = {
					check_variable = { ser_stealth > 7 }
				}
				country_event = { id = serbia_puppet_events.14 days = 7 }
			}
			else_if = {
				limit = {
					check_variable = { ser_stealth < 4 }
					check_variable = { ser_stealth > 1 }
				}
				country_event = { id = serbia_puppet_events.15 days = 7 }
			}
			else_if = {
				limit = {
					check_variable = { ser_stealth < 2 }
				}
				country_event = { id = serbia_puppet_events.16 days = 7 }
			}
			else_if = {
				limit = {
					check_variable = { ser_stealth > 3 }
					check_variable = { ser_stealth < 8 }
				}
				country_event = { id = serbia_puppet_events.17 days = 7 }
			}
			BUL = {
				country_event = { id = bulgaria_events.67 days = 1 }
			}
		}
	}
}
country_event = { #
	id = serbia_puppet_events.14
	title = serbia_puppet_events.14.t
	desc = serbia_puppet_events.14.d
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.14 option serbia_puppet_events.14.a"
		name = serbia_puppet_events.14.a
		hidden_effect = {
			BUL = { country_event = bulgaria_events.68 }
		}
		add_ideas = SER_surprise_attack
		leave_faction = yes
		BUL = {
			end_puppet = SER
			create_wargoal = {
				type = puppet_wargoal_focus
				target = SER
			}
		}
	}
}
country_event = { #conspiration failed
	id = serbia_puppet_events.15
	title = serbia_puppet_events.15.t
	desc = serbia_puppet_events.15.d
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.15 option serbia_puppet_events.15.a"
		name = serbia_puppet_events.15.a
		add_political_power = -100
	}
}
country_event = { #
	id = serbia_puppet_events.16
	title = serbia_puppet_events.16.t
	desc = serbia_puppet_events.16.d
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.16 option serbia_puppet_events.16.a"
		name = serbia_puppet_events.16.a
		hidden_effect = {
			BUL = {
				country_event = { id = bulgaria_events.68 hours = 1 }
			}
		}
		leave_faction = yes
		BUL = {
			end_puppet = SER
			declare_war_on = {
				target = SER
				type = annex_everything
			}
		}
	}
}
country_event = { #
	id = serbia_puppet_events.17
	title = serbia_puppet_events.17.t
	desc = serbia_puppet_events.17.d
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.17 option serbia_puppet_events.17.a"
		name = serbia_puppet_events.17.a
		hidden_effect = {
			BUL = {
				country_event = { id = bulgaria_events.68 hours = 1 }
			}
		}
		leave_faction = yes
		BUL = {
			end_puppet = SER
			create_wargoal = {
				type = puppet_wargoal_focus
				target = SER
			}
		}
	}
}

#Option for Serbia's Occupier to Release a Monarchy or a Republic
country_event = { #The Serbian Monarchy
	id = serbia_puppet_events.100
	title = serbia_puppet_events.100.t
	desc = serbia_puppet_events.100.d
	picture = GFX_report_event_yugoslavian_king_peter

	is_triggered_only = yes #Triggered by events annexation_events.1072.a, annexation_events.1072.b

	trigger = {
		has_socialist_government = no
	}

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.100 option serbia_puppet_events.100.a"
		name = serbia_puppet_events.100.a #Serbia shall become a Republic.
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				is_monarchy = yes
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.100 option serbia_puppet_events.100.b"
		name = serbia_puppet_events.100.b #Serbia shall become a Monarchy.
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				is_monarchy = no
			}
		}
		if = {
			limit = { date > 1941.09.06 }
			SER = {
				SER_puppet_crown_petar_effect = yes
			}
		}
		else = {
			SER = { add_ideas = SER_Petar_II_regency }
			if = {
				limit = { date < 1936.09.06 }
				#Will need 6 years to guarantee Peter will be 18.
				country_event = { id = serbia_puppet_events.101 days = 2190 } #Coronation of King Petar of Serbia
			}
			else_if = {
				limit = { date < 1937.09.06 }
				#Will need 5 years to guarantee Peter will be 18.
				country_event = { id = serbia_puppet_events.101 days = 1825 } #Coronation of King Petar of Serbia
			}
			else_if = {
				limit = { date < 1938.09.06 }
				#Will need 4 years to guarantee Peter will be 18.
				country_event = { id = serbia_puppet_events.101 days = 1460 } #Coronation of King Petar of Serbia
			}
			else_if = {
				limit = { date < 1939.09.06 }
				#Will need 3 years to guarantee Peter will be 18.
				country_event = { id = serbia_puppet_events.101 days = 1095 } #Coronation of King Petar of Serbia
			}
			else_if = {
				limit = { date < 1940.09.06 }
				#Will need 2 years to guarantee Peter will be 18.
				country_event = { id = serbia_puppet_events.101 days = 730 } #Coronation of King Petar of Serbia
			}
			else_if = {
				limit = { date < 1941.09.06 }
				#Will need 1 year to guarantee Peter will be 18.
				country_event = { id = serbia_puppet_events.101 days = 365 } #Coronation of King Petar of Serbia
			}
		}
	}
}

country_event = { #Coronation of King Petar of Serbia
	id = serbia_puppet_events.101
	title = serbia_puppet_events.101.t
	desc = serbia_puppet_events.101.d
	picture = GFX_report_event_yugoslavian_king_peter

	is_triggered_only = yes #Triggered by EVENT serbia_puppet_events.100

	trigger = {
		SER = {
			is_subject_of = ROOT
			has_idea = SER_Petar_II_regency
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_puppet_events.101 option serbia_puppet_events.101.a"
		name = serbia_puppet_events.101.a #May he rule well.

		SER = {
			hidden_effect = { remove_ideas = SER_Petar_II_regency }
			SER_puppet_crown_petar_effect = yes
		}
	}
}

#####################
# Flavor (interactions etc.)
#####################

country_event = { # The Belgrade Pact
	id = serbia_flavour_events.1
	title = serbia_flavour_events.1.t
	desc = serbia_flavour_events.1.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.1 option serbia_flavour_events.1.a"
		name = serbia_flavour_events.1.a
		add_war_support = 0.05
	}
}
country_event = { # The Return of the Karadordevics
	id = serbia_flavour_events.2
	title = serbia_flavour_events.2.t
	desc = serbia_flavour_events.2.d
	picture = GFX_report_event_yugoslavian_king_peter

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.2 option serbia_flavour_events.2.a"
		name = serbia_flavour_events.2.a
		add_popularity = {
			ideology = radical_socialist
			popularity = -0.01
		}
		add_popularity = {
			ideology = social_democrat
			popularity = -0.01
		}
		add_popularity = {
			ideology = social_liberal
			popularity = -0.01
		}
	}
}
country_event = { # Ljotic in the Skupstina
	id = serbia_flavour_events.3
	title = serbia_flavour_events.3.t
	desc = serbia_flavour_events.3.d
	picture = GFX_report_event_BUL_assembly

	trigger = {
		NOT = { has_government = paternal_autocrat }
	}

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.3 option serbia_flavour_events.3.a"
		name = serbia_flavour_events.3.a
		add_stability = -0.01
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.02
		}
	}
}
country_event = { # Assassination
	id = serbia_flavour_events.4
	title = serbia_flavour_events.4.t
	desc = serbia_flavour_events.4.d
	picture = GFX_report_event_POL_assassination

	trigger = {
		NOT = { has_government = paternal_autocrat }
	}

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.4 option serbia_flavour_events.4.a"
		name = serbia_flavour_events.4.a
		add_stability = -0.05
		add_popularity = {
			ideology = national_populist
			popularity = -0.01
		}
		hidden_effect = {
			country_event = { id = serbia_flavour_events.5 days = 30 random_days = 14 }
		}
	}
}
country_event = { # Counter-assassination
	id = serbia_flavour_events.5
	title = serbia_flavour_events.5.t
	desc = serbia_flavour_events.5.d
	picture = GFX_report_event_POL_assassination

	trigger = {
		NOT = { has_government = paternal_autocrat }
	}

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.5 option serbia_flavour_events.5.a"
		name = serbia_flavour_events.5.a
		add_stability = -0.02
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -0.01
		}
	}
}

country_event = { # Fourth Balkan War system event (donotlog)
	id = serbia_flavour_events.60
	hidden = yes

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		BUL = {
			is_subject = no
			has_war_with = BPL
		}
		BPL = { is_faction_leader = yes }
	}

	option = {
		for_each_scope_loop = {
			array = BPL.faction_members
			country_event = serbia_flavour_events.6
		}
	}
}

country_event = { # The Fourth Balkan War
	id = serbia_flavour_events.6
	title = serbia_flavour_events.6.t
	desc = serbia_flavour_events.6.d
	picture = GFX_report_event_BUL_crowd

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.6 option serbia_flavour_events.6.a"
		name = serbia_flavour_events.6.a
		add_war_support = 0.05
		add_manpower = 5000
		hidden_effect = {
			if = {
				limit = { tag = SER }
				country_event = { id = serbia_flavour_events.11 days = 3 }
			}
		}
	}
}
country_event = { # Avantgarde continues
	id = serbia_flavour_events.7
	title = serbia_flavour_events.7.t
	desc = serbia_flavour_events.7.d
	picture = GFX_report_event_generic_books

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.7 option serbia_flavour_events.7.a"
		name = serbia_flavour_events.7.a
		add_popularity = {
			ideology = syndicalist
			popularity = 0.01
		}
		custom_effect_tooltip = SER_socialists_gain
		add_to_variable = { SER_socialist_strength = 5 }
	}
}
country_event = { # AURORA BOREALIS?!
	id = serbia_flavour_events.8
	title = serbia_flavour_events.8.t
	desc = serbia_flavour_events.8.d
	picture = GFX_report_event_BUL_crowd

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.8 option serbia_flavour_events.8.a"
		name = serbia_flavour_events.8.a
		add_stability = -0.01
	}
}
country_event = { # First and second Serbian revolutions
	id = serbia_flavour_events.9
	title = serbia_flavour_events.9.t
	desc = serbia_flavour_events.9.d
	picture = GFX_report_event_generic_strike

	is_triggered_only = yes
	trigger = {
		OR = {
			has_government = radical_socialist
			has_soclib_or_socdem_government = yes
		}
	}
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.9 option serbia_flavour_events.9.a"
		name = serbia_flavour_events.9.a
		if = {
			limit = {
				has_government = radical_socialist
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = 0.02
			}
		}
		else_if = {
			limit = {
				has_government = social_democrat
			}
			add_popularity = {
				ideology = social_democrat
				popularity = 0.02
			}
		}
		else = {
			add_popularity = {
				ideology = social_liberal
				popularity = 0.02
			}
		}
		add_stability = 0.01
	}
}
country_event = { # First and second Serbian revolutions (Radicals)
	id = serbia_flavour_events.999
	title = serbia_flavour_events.9.t
	desc = serbia_flavour_events.9.d
	picture = GFX_report_event_generic_strike

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.999 option serbia_flavour_events.9.a"
		name = serbia_flavour_events.9.a
		add_popularity = {
			ideology = market_liberal
			popularity = 0.02
		}
		add_stability = 0.01
	}
}
country_event = { # Dinaric Race
	id = serbia_flavour_events.10
	title = serbia_flavour_events.10.t
	desc = serbia_flavour_events.10.d
	picture = GFX_report_event_generic_books

	is_triggered_only = yes
	trigger = {
		owns_state = 767
	}
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.10 option serbia_flavour_events.10.a"
		name = serbia_flavour_events.10.a
		add_war_support = 0.03
	}
}
country_event = { # Bojovic comes to help
	id = serbia_flavour_events.11
	title = serbia_flavour_events.11.t
	desc = serbia_flavour_events.11.d
	picture = GFX_report_event_BUL_oldguard

	is_triggered_only = yes
	trigger = {
		has_socialist_government = no
	}
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.11 option serbia_flavour_events.11.a"
		name = serbia_flavour_events.11.a
		ai_chance = { base = 50 }
		SER_petar_bojovic = { custom_effect_tooltip = character_becomes_a_general }
		hidden_effect = {
			SER_petar_bojovic = { set_nationality = ROOT }
			if = {
				limit = { has_idea = SER_Petar_II_regency }
				SER_petar_bojovic = { unit_leader_event = serbia_flavour_events.12 }
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.11 option serbia_flavour_events.11.b"
		name = serbia_flavour_events.11.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		add_war_support = 0.05
		add_manpower = 5000
	}
}
unit_leader_event = { # Bojovic's letter to Peter
	id = serbia_flavour_events.12
	title = serbia_flavour_events.12.t
	desc = serbia_flavour_events.12.d

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.12 option serbia_flavour_events.12.a"
		name = serbia_flavour_events.12.a
		add_stability = 0.01
		set_country_flag = SER_petar_anime_protagonist
	}
}
country_event = { # The perfidious Anglo
	id = serbia_flavour_events.13
	title = serbia_flavour_events.13.t
	desc = serbia_flavour_events.13.d
	picture = GFX_report_event_WIF_Edward_Visit

	trigger = {
		owns_state = 106
		is_in_faction = no
		has_country_leader = { character = SER_dragomir_vasic }
		surrender_progress < 0.20
	}

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.13 option serbia_flavour_events.13.a"
		name = serbia_flavour_events.13.a
		add_political_power = 25
	}
}
country_event = { # Vasic's last speech
	id = serbia_flavour_events.14
	title = serbia_flavour_events.14.t
	desc = serbia_flavour_events.14.d
	picture = GFX_report_event_AST_curtinspeech

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.14 option serbia_flavour_events.14.a"
		name = serbia_flavour_events.14.a
		add_popularity = {
			ideology = social_liberal
			popularity = 0.02
		}
		add_stability = 0.01
	}
}
country_event = { # Prince Paul visits
	id = serbia_flavour_events.15
	title = serbia_flavour_events.15.t
	desc = serbia_flavour_events.15.d
	picture = GFX_report_event_yugoslavian_king_peter

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		has_idea = SER_Petar_II_regency
		has_country_flag = SER_petar_anime_protagonist
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.15 option serbia_flavour_events.15.a"
		name = serbia_flavour_events.15.a
		ai_chance = { base = 50 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.15 option serbia_flavour_events.15.b"
		name = serbia_flavour_events.15.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		add_to_variable = { SER_petar_score = 1 }
	}
}
country_event = { # Uncle Carol
	id = serbia_flavour_events.16
	title = serbia_flavour_events.16.t
	desc = serbia_flavour_events.16.d
	picture = GFX_report_event_ROM_postcard_palace

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		has_idea = SER_Petar_II_regency
		is_in_faction_with = ROM
		ROM = { has_country_leader = { character = ROM_carol_hohenzollern_sigmaringen } }
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.16 option serbia_flavour_events.16.a"
		name = serbia_flavour_events.16.a
		add_stability = 0.01
	}
}
country_event = { # Lapčević criticizes war policy
	id = serbia_flavour_events.17
	title = serbia_flavour_events.17.t
	desc = serbia_flavour_events.17.d
	picture = GFX_report_event_AST_curtinspeech

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		OR = {
			has_elected_government = yes
			has_government = radical_socialist
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.17 option serbia_flavour_events.17.a"
		name = serbia_flavour_events.17.a
		SER_increase_scars = yes
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.17 option serbia_flavour_events.17.b"
		name = serbia_flavour_events.17.b
		add_stability = -0.1
		add_popularity = {
			ideology = national_populist
			popularity = 0.03
		}
	}
}
country_event = { # Countryside tours
	id = serbia_flavour_events.18
	title = serbia_flavour_events.18.t
	desc = serbia_flavour_events.18.d
	picture = GFX_report_event_yugoslavian_king_peter

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		has_idea = SER_Petar_II_regency
		has_country_flag = SER_petar_anime_protagonist
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.18 option serbia_flavour_events.18.a"
		name = serbia_flavour_events.18.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		add_stability = -0.03
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.18 option serbia_flavour_events.18.b"
		name = serbia_flavour_events.18.b
		ai_chance = { base = 50 }
		add_political_power = -50
		add_to_variable = { SER_petar_score = 1 }
	}
}
country_event = { # Failed assassination attempt
	id = serbia_flavour_events.19
	title = serbia_flavour_events.19.t
	desc = serbia_flavour_events.19.d
	picture = GFX_report_event_yugoslavian_king_peter

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		has_idea = SER_Petar_II_regency
		has_country_flag = SER_petar_anime_protagonist
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.19 option serbia_flavour_events.19.a"
		name = serbia_flavour_events.19.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.19 option serbia_flavour_events.19.b"
		name = serbia_flavour_events.19.b
		ai_chance = { base = 50 }
		add_political_power = -50
		add_to_variable = { SER_petar_score = 1 }
		hidden_effect = {
			if = {
				limit = {
					check_variable = { SER_petar_score = 3 }
				}
				country_event = { id = serbia_events.46 days = 5 }
			}
		}
	}
}
country_event = { # Ljotic and Stojadinovic mad at one another
	id = serbia_flavour_events.20
	title = serbia_flavour_events.20.t
	desc = serbia_flavour_events.20.d
	picture = GFX_report_event_SAF_parliament_3

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.20 option serbia_flavour_events.20.a"
		name = serbia_flavour_events.20.a
		add_political_power = -25
		add_stability = -0.01
	}
}
country_event = { # Last dying breath
	id = serbia_flavour_events.21
	title = serbia_flavour_events.21.t
	desc = serbia_flavour_events.21.d
	picture = GFX_report_event_GER_march

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.21 option serbia_flavour_events.21.a"
		name = serbia_flavour_events.21.a
		add_political_power = 25
		add_war_support = 0.01
	}
}
country_event = { # Second Toplica Uprising
	id = serbia_flavour_events.22
	title = serbia_flavour_events.22.t
	desc = serbia_flavour_events.22.d
	picture = GFX_report_event_POL_rebels

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.22 option serbia_flavour_events.22.a"
		name = serbia_flavour_events.22.a
		trigger = {
			tag = SER
		}
		add_war_support = 0.02
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.22 option serbia_flavour_events.22.b"
		name = serbia_flavour_events.22.b
		trigger = {
			tag = BUL
		}
		767 = {
			add_compliance = -10
		}
		add_stability = -0.02
	}
}
country_event = { # Konspiracija warning
	id = serbia_flavour_events.23
	immediate = {
		set_country_flag = SER_konspiracija_warning
	}
	title = serbia_flavour_events.23.t
	desc = serbia_flavour_events.23.d
	picture = GFX_report_event_GER_march

	trigger = {
		NOT = {
			has_country_flag = SER_konspiracija_warning
		}
	}

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.23 option serbia_flavour_events.23.a"
		name = serbia_flavour_events.23.a
		custom_effect_tooltip = SER_konspiracija_warning_tt
	}
}
country_event = { # Mustafa Golubić
	id = serbia_flavour_events.24
	title = serbia_flavour_events.24.t
	desc = serbia_flavour_events.24.d
	picture = GFX_report_event_GER_march

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_socialist_government = yes
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.24 option serbia_flavour_events.24.a"
		name = serbia_flavour_events.24.a
		add_political_power = 50
		add_popularity = {
			ideology = national_populist
			popularity = -0.03
		}
		SER_recalculate_konspiracija = yes
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.24 option serbia_flavour_events.24.b1"
		name = serbia_flavour_events.24.b1
		trigger = {
			NOT = {
				owns_state = 767
			}
		}
		effect_tooltip = {
			BUL = {
				add_timed_idea = {
					idea = SER_golubic_assassinations
					days = 365
				}
			}
		}
		hidden_effect = {
			BUL = {
				country_event = serbia_flavour_events.25
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.24 option serbia_flavour_events.24.b2"
		name = serbia_flavour_events.24.b2
		trigger = {
			owns_state = 767
			NOT = {
				owns_state = 45
			}
		}
		effect_tooltip = {
			AUS = {
				add_timed_idea = {
					idea = SER_golubic_assassinations
					days = 365
				}
			}
		}
		hidden_effect = {
			AUS = {
				country_event = serbia_flavour_events.25
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.24 option serbia_flavour_events.24.c"
		name = serbia_flavour_events.24.c
		trigger = {
			has_war_with = MAC
		}
		106 = {
			add_resistance = -15
			add_resistance_target = {
				amount = -10
				occupier = SER
				days = 60
				tooltip = SER_IMRO_decrease_rt_tt
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.24 option serbia_flavour_events.24.e"
		name = serbia_flavour_events.24.e
		add_stability = 0.05
	}
}
country_event = { # Golubić
	id = serbia_flavour_events.25
	title = serbia_flavour_events.25.t
	desc = serbia_flavour_events.25.d
	picture = GFX_report_event_GER_march

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.25 option serbia_flavour_events.25.a"
		name = serbia_flavour_events.25.a
		add_timed_idea = {
			idea = SER_golubic_assassinations
			days = 365
		}
	}
}
country_event = { # Stefan Dušan
	id = serbia_flavour_events.26
	title = serbia_flavour_events.26.t
	desc = serbia_flavour_events.26.d
	picture = GFX_report_event_GER_march

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.26 option serbia_flavour_events.26.a"
		name = serbia_flavour_events.26.a
		add_stability = 0.1
		add_war_support = 0.1
		set_country_flag = coronation_in_constantinople
	}
}
country_event = { # Royal Palace
	id = serbia_flavour_events.27
	title = serbia_flavour_events.27.t
	desc = serbia_flavour_events.27.d
	picture = GFX_report_event_BUL_palace

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		has_completed_focus = SER_November_Sixth_Dictatorship
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.27 option serbia_flavour_events.27.a"
		name = serbia_flavour_events.27.a
		add_stability = 0.02
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.27 option serbia_flavour_events.27.b"
		name = serbia_flavour_events.27.b
		add_political_power = 25
	}
}
country_event = { # Legacy of the Colonization Decree
	id = serbia_flavour_events.28
	title = serbia_flavour_events.28.t
	desc = serbia_flavour_events.28.d
	picture = GFX_report_event_generic_farming

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		owns_state = 765
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.28 option serbia_flavour_events.28.a"
		name = serbia_flavour_events.28.a
		trigger = {
			OR = {
				has_authoritarian_government = yes
				has_soccon_or_marlib_government = yes
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.28 option serbia_flavour_events.28.b"
		name = serbia_flavour_events.28.b
		trigger = {
			NOT = {
				has_authoritarian_government = yes
				has_soccon_or_marlib_government = yes
			}
		}
	}
	after = {
		765 = {
			damage_building = {
				type = infrastructure
				damage = 1.0
			}
		}
		add_popularity = {
			ideology = national_populist
			popularity = 0.03
		}
		SER_recalculate_konspiracija = yes
	}
}
country_event = { # SKK patronage
	id = serbia_flavour_events.29
	title = serbia_flavour_events.29.t
	desc = serbia_flavour_events.29.d
	picture = GFX_report_event_BUL_palace

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		has_idea = SER_konspiracija_idea
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.29 option serbia_flavour_events.29.a"
		name = serbia_flavour_events.29.a
		add_popularity = {
			ideology = national_populist
			popularity = 0.02
		}
		SER_recalculate_konspiracija = yes
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.29 option serbia_flavour_events.29.b"
		name = serbia_flavour_events.29.b
		add_political_power = -50
		add_stability = -0.08
	}
}
country_event = { # Army requests removal of minister
	id = serbia_flavour_events.30
	title = serbia_flavour_events.30.t
	desc = serbia_flavour_events.30.d
	picture = GFX_report_event_BUL_palace

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		has_idea = SER_konspiracija_idea
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.30 option serbia_flavour_events.30.a"
		name = serbia_flavour_events.30.a
		add_popularity = {
			ideology = national_populist
			popularity = 0.02
		}
		SER_recalculate_konspiracija = yes
		add_political_power = 50
		activate_advisor = SER_milan_acimovic_advisor
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.30 option serbia_flavour_events.30.b"
		name = serbia_flavour_events.30.b
		set_temp_variable = { ideology_change_var = -7 }
		change_ruling_party_popularity = yes
		add_political_power = -25
	}
}
country_event = { # Bojovic leaves
	id = serbia_flavour_events.31
	title = serbia_flavour_events.31.t
	desc = serbia_flavour_events.31.d
	picture = GFX_report_event_BUL_oldguard

	fire_only_once = yes

	trigger = {
		tag = SER
		has_character = SER_petar_bojovic
		has_war = no
	}

	mean_time_to_happen = {
		months = 6
		modifier = {
			factor = 0.1
			date > 1940.1.1
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.31 option serbia_flavour_events.31.a"
		name = serbia_flavour_events.31.a # He served his country well
		retire_character = SER_petar_bojovic
	}
}

news_event = { # Republicans Win Serbian Elections
	id = serbia_flavour_events.32
	immediate = { log = "[GetLogInfo]: event serbia_flavour_events.32" }
	title = serbia_flavour_events.32.t
	picture = GFX_news_event_SER_republicans
	desc = {
		text = serbia_flavour_events.32.d.majority
		trigger = {
			SER = {
				SER_rep_no_coalition = yes
			}
		}
	}
	desc = {
		text = serbia_flavour_events.32.d.status_quo
		trigger = {
			SER = {
				SER_rep_no_coalition = no
				SER_repsoc_coalition = yes
			}
		}
	}
	desc = {
		text = serbia_flavour_events.32.d.popular_front
		trigger = {
			SER = {
				SER_leftfront_coalition = yes
			}
		}
	}
	desc = {
		text = serbia_flavour_events.32.d.grand_coalition
		trigger = {
			SER = {
				has_country_flag = SER_reprad_coalition_flag
			}
		}
	}

	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	major = yes
	show_major = {
		NOT = { tag = FROM }
		regional_europe_news = yes
	}

	option = {
		name = serbia_flavour_events.32.a
		trigger = {
			NOT = {
				tag = SER
				tag = ROM
				tag = GRE
				tag = BUL
				tag = ALB
				tag = AUS
				is_subject_of = AUS
			}
		}
	}
	option = {
		name = serbia_flavour_events.32.b
		trigger = {
			tag = SER
		}
	}
	option = {
		name = serbia_flavour_events.32.c
		trigger = {
			OR = {
				tag = ROM
				tag = GRE
			}
		}
	}
	option = {
		name = serbia_flavour_events.32.e
		trigger = {
			OR = {
				tag = BUL
				tag = ALB
			}
		}
	}
	option = {
		name = serbia_flavour_events.32.f
		trigger = {
			OR = {
				tag = AUS
				is_subject_of = AUS
			}
		}
	}
}

news_event = { # Radicals Win Serbian Elections
	id = serbia_flavour_events.33
	immediate = { log = "[GetLogInfo]: event serbia_flavour_events.33" }
	title = serbia_flavour_events.33.t
	picture = GFX_news_event_SER_radicals
	desc = {
		text = serbia_flavour_events.33.d.majority
		trigger = {
			SER = {
				SER_rad_no_coalition = yes
			}
		}
	}
	desc = {
		text = serbia_flavour_events.33.d.great_union
		trigger = {
			SER = {
				SER_rad_no_coalition = no
				SER_radagr_coalition = yes
			}
		}
	}
	desc = {
		text = serbia_flavour_events.33.d.grand_coalition
		trigger = {
			SER = {
				has_country_flag = SER_reprad_coalition_flag
			}
		}
	}

	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	major = yes
	show_major = {
		NOT = { tag = FROM }
		regional_europe_news = yes
	}

	option = {
		name = serbia_flavour_events.33.a
		trigger = {
			NOT = {
				tag = SER
				tag = ROM
				tag = GRE
				tag = BUL
				tag = ALB
				tag = AUS
				is_subject_of = AUS
			}
		}
	}
	option = {
		name = serbia_flavour_events.33.b
		trigger = {
			tag = SER
		}
	}
	option = {
		name = serbia_flavour_events.33.c
		trigger = {
			OR = {
				tag = ROM
				tag = GRE
			}
		}
	}
	option = {
		name = serbia_flavour_events.33.e
		trigger = {
			OR = {
				tag = BUL
				tag = ALB
			}
		}
	}
	option = {
		name = serbia_flavour_events.33.f
		trigger = {
			OR = {
				tag = AUS
				is_subject_of = AUS
			}
		}
	}
}

news_event = { # Socialists Win Serbian Elections
	id = serbia_flavour_events.34
	immediate = { log = "[GetLogInfo]: event serbia_flavour_events.34" }
	title = serbia_flavour_events.34.t
	picture = GFX_news_event_SER_socialists
	desc = {
		text = serbia_flavour_events.34.d.soc_coalition
		trigger = {
			SER = {
				SER_jointsoc_coalition = yes
			}
		}
	}
	desc = {
		text = serbia_flavour_events.34.d.popular_front
		trigger = {
			SER = {
				SER_leftfront_coalition = yes
			}
		}
	}

	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	major = yes
	show_major = {
		NOT = { tag = FROM }
		regional_europe_news = yes
	}

	option = {
		name = serbia_flavour_events.34.a
		trigger = {
			NOT = {
				tag = SER
				tag = ROM
				tag = GRE
				tag = BUL
				tag = ALB
				tag = AUS
				is_subject_of = AUS
				has_socialist_government = yes
			}
		}
	}
	option = {
		name = serbia_flavour_events.34.b
		trigger = {
			tag = SER
		}
	}
	option = {
		name = serbia_flavour_events.34.c
		trigger = {
			OR = {
				tag = ROM
				tag = GRE
			}
		}
	}
	option = {
		name = serbia_flavour_events.34.e
		trigger = {
			OR = {
				tag = BUL
				tag = ALB
			}
		}
	}
	option = {
		name = serbia_flavour_events.34.f
		trigger = {
			OR = {
				tag = AUS
				is_subject_of = AUS
			}
		}
	}
	option = {
		name = serbia_flavour_events.34.g
		trigger = {
			has_socialist_government = yes
			NOT = {
				tag = SER
				tag = GRE
			}
		}
	}
}

news_event = { # Royalist Coup in Serbia!
	id = serbia_flavour_events.35
	immediate = { log = "[GetLogInfo]: event serbia_flavour_events.35" }
	title = serbia_flavour_events.35.t
	desc = serbia_flavour_events.35.d
	picture = GFX_news_event_SER_white_hand

	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	major = yes
	show_major = {
		NOT = { tag = FROM }
		regional_europe_news = yes
	}

	option = {
		name = serbia_flavour_events.35.a
		trigger = {
			NOT = {
				tag = SER
				tag = ROM
				tag = GRE
				tag = BUL
				tag = ALB
				tag = AUS
				tag = CAN
				is_subject_of = AUS
			}
		}
	}
	option = {
		name = serbia_flavour_events.35.b
		trigger = {
			tag = SER
		}
	}
	option = {
		name = serbia_flavour_events.35.c
		trigger = {
			OR = {
				tag = ROM
				tag = GRE
			}
		}
	}
	option = {
		name = serbia_flavour_events.35.e
		trigger = {
			OR = {
				tag = BUL
				tag = ALB
			}
		}
	}
	option = {
		name = serbia_flavour_events.35.f
		trigger = {
			OR = {
				tag = AUS
				is_subject_of = AUS
			}
		}
	}
	option = {
		name = serbia_flavour_events.35.g
		trigger = {
			tag = CAN
		}
	}
}
country_event = { # Petar wants to return
	id = serbia_flavour_events.36
	title = serbia_flavour_events.36.t
	desc = serbia_flavour_events.36.d
	picture = GFX_report_event_yugoslavian_king_peter

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		NOT = {
			OR = {
				has_socialist_government = yes
				has_country_leader = { character = SER_petar_ii }
				has_country_leader = { character = SER_petar_zivkovic }
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.36 option serbia_flavour_events.36.a"
		name = serbia_flavour_events.36.a
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.03
		}
		add_stability = 0.02
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.36 option serbia_flavour_events.36.b"
		name = serbia_flavour_events.36.b
	}
}
country_event = { # The Fifth Balkan War
	id = serbia_flavour_events.37
	title = serbia_flavour_events.37.t
	desc = serbia_flavour_events.37.d
	picture = GFX_report_event_generic_bombers

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.37 option serbia_flavour_events.37.a"
		name = serbia_flavour_events.37.a
		if = {
			limit = {
				SER_has_scarred_nation = yes
			}
			SER_reduce_scars = yes
		}
		else = {
			add_war_support = 0.05
		}
	}
}
country_event = { # Montenegrin Federalists
	id = serbia_flavour_events.38
	title = serbia_flavour_events.38.t

	is_triggered_only = yes

	desc = serbia_flavour_events.38.d
	picture = GFX_report_event_generic_rally

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.38 option serbia_flavour_events.38.a"
		name = serbia_flavour_events.38.a
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		add_stability = -0.05
		add_war_support = -0.05
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.38 option serbia_flavour_events.38.b"
		name = serbia_flavour_events.38.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_RADSOC }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_PATAUT }
					has_game_rule = { rule = SER_path option = SER_PATH_NATPOP }
					has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
				}
			}
		}
		custom_effect_tooltip = SER_republicans_gain
		add_to_variable = { SER_republican_strength = 10 }
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.38 option serbia_flavour_events.38.c"
		name = serbia_flavour_events.38.c
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
				}
			}
		}
		custom_effect_tooltip = SER_socialists_gain
		add_to_variable = { SER_socialist_strength = 10 }
		hidden_effect = {
			country_event = { id = serbia_events.12 days = 14 random_days = 7 }
		}
	}
}
country_event = { # Who will be the Serbian Savinkov?
	id = serbia_flavour_events.39
	title = serbia_flavour_events.39.t
	desc = serbia_flavour_events.39.d
	picture = GFX_report_event_RUS_Boris_Savinkov

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		RUS = {
			has_government = national_populist
			exists = yes
			is_subject = no
		}
		has_dictatorship_government = no
	}

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.39 option serbia_flavour_events.39.a"
		name = serbia_flavour_events.39.a
		add_popularity = {
			ideology = national_populist
			popularity = 0.02
		}
	}
}

country_event = {
	id = serbia_flavour_events.40
	title = serbia_flavour_events.40.t
	desc = serbia_flavour_events.40.d
	picture = GFX_report_event_ser_heir

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.40 option serbia_flavour_events.40.a"
		name = serbia_flavour_events.40.a
		trigger = {
			NOT = {
				has_completed_focus = SER_March_Conspiracy
			}
		}
		custom_effect_tooltip = SER_pavle_heir_name_tt
		add_stability = 0.02
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.40 option serbia_flavour_events.40.b"
		name = serbia_flavour_events.40.b
		add_stability = 0.02
		custom_effect_tooltip = SER_petar_heir_name_tt
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.40 option serbia_flavour_events.40.c"
		name = serbia_flavour_events.40.c
		trigger = {
			NOT = {
				has_country_flag = coronation_in_constantinople
			}
		}
		custom_effect_tooltip = SER_mihajlo_heir_name_tt
		add_stability = 0.02
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.40 option serbia_flavour_events.40.e"
		name = serbia_flavour_events.40.e
		custom_effect_tooltip = SER_aleksandar_heir_name_tt
		add_stability = 0.02
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.40 option serbia_flavour_events.40.f"
		name = serbia_flavour_events.40.f
		trigger = { has_completed_focus = SER_March_Conspiracy }
		custom_effect_tooltip = SER_albert_heir_name_tt
		add_stability = 0.03
	}
	option = {
		log = "[GetLogInfo]: event serbia_flavour_events.40 option serbia_flavour_events.40.g"
		name = serbia_flavour_events.40.g
		trigger = { has_country_flag = coronation_in_constantinople }
		custom_effect_tooltip = SER_dusan_heir_name_tt
		add_stability = 0.05
	}
}

# Serbia crowns the king
news_event = {
	id = serbia_flavour_events.41
	immediate = { log = "[GetLogInfo]: event serbia_flavour_events.41" }
	title = serbia_flavour_events.41.t
	desc = serbia_flavour_events.41.d
	picture = GFX_news_event_ITA_kingdom

	major = yes
	fire_for_sender = no
	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		OR = {
			regional_europe_news = yes
			is_neighbor_of = SER
		}
	}

	option = {
		name = serbia_flavour_events.41.a

		trigger = {
			NOT = {
				tag = AUS
				tag = BUL
			}
		}
	}

	option = {
		name = serbia_flavour_events.41.b

		trigger = {
			OR = {
				tag = AUS
				tag = BUL
			}
		}
	}
}

# Yugoslavia formed
news_event = {
	id = serbia_flavour_events.42
	immediate = { log = "[GetLogInfo]: event serbia_flavour_events.42" }
	title = serbia_flavour_events.42.t
	desc = serbia_flavour_events.42.d
	picture = GFX_news_event_ITA_big_crowd

	major = yes
	fire_for_sender = no
	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		regional_europe_news = yes
	}

	option = {
		name = serbia_flavour_events.42.a
	}
}

######################
# Yugoslavia Events
######################

country_event = { #Yugoslavia Elections
	id = yugoslavia_events.1
	title = yugoslavia_events.1.t
	desc = yugoslavia_events.1.d
	picture = GFX_report_event_ser_election

	is_triggered_only = yes

	trigger = {
		has_country_flag = SER_has_completed_1936_elc
		has_democratic_government = yes
		SER_has_founded_yugoslavia = yes
	}

	immediate = {
		hidden_effect = {
			end_coalition = yes
			if = {
				limit = { has_character = SER_temporary_national_representation }
				retire_character = SER_temporary_national_representation
				if = {
					limit = { NOT = { has_completed_focus = SER_November_Sixth_Dictatorship } }
					if = {
						limit = { has_country_flag = YUG_grol_leads_republicans }
						promote_character = SER_milan_grol
					}
					else_if = {
						limit = { has_country_flag = YUG_budisavljevic_leads_republicans }
						CRO = {
							CRO_srdan_budisavljevic = {
								set_nationality = PREV.PREV
								promote_character = social_liberal_subtype
							}
						}
					}
					else_if = {
						limit = {
							has_country_flag = YUG_kramer_leads_republicans
							NOT = { country_exists = SLV }
						}
						SLV = {
							SLV_albert_kramer = {
								set_nationality = PREV.PREV
								promote_character = yes
							}
						}
					}
					SLV = {
						SLV_miha_krek = {
							set_nationality = PREV.PREV
							if = {
								limit = { has_ideology = market_liberal_subtype }
								promote_character = market_liberal_subtype
							}
							else = {
								add_country_leader_role = {
									country_leader = {
										desc = SLV_miha_krek_leader_desc
										ideology = market_liberal_subtype
									}
									promote_leader = yes
								}
							}
						}
					}
					if = {
						limit = {
							NOT = {
								has_completed_focus = SER_unite_with_agrarians
								country_exists = CRO
							}
						}
						CRO = {
							CRO_stjepan_radic = {
								set_nationality = PREV.PREV
								promote_character = social_conservative_subtype
							}
						}
					}
					else = {
						SER_milan_stojadinovic = {
							if = {
								limit = { has_ideology = social_conservative_subtype }
								promote_character = social_conservative_subtype
							}
							else = {
								add_country_leader_role = {
									country_leader = {
										desc = SER_milan_stojadinovic_leader_desc
										ideology = social_conservative_subtype
									}
									promote_leader = yes
								}
							}
						}
					}
					SER_milan_stojadinovic = {
						if = {
							limit = { has_ideology = authoritarian_democrat_subtype }
							promote_character = authoritarian_democrat_subtype
						}
						else = {
							add_country_leader_role = {
								country_leader = {
									desc = SER_milan_stojadinovic_leader_desc
									ideology = authoritarian_democrat_subtype
								}
								promote_leader = yes
							}
						}
					}
				}
			}
		}
	}

	### Republican options

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.1 option yugoslavia_events.1.a"
		name = yugoslavia_events.1.a #Republican Party
		trigger = {
			NOT = { has_country_leader = { character = SER_petar_ii } }
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.2
				has_completed_focus = SER_National_Vanguard
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
				}
			}
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.1
		}
		set_politics = {
			ruling_party = social_liberal
			election_frequency = 48
			elections_allowed = yes
		}
		if = {
			limit = { NOT = { has_completed_focus = SER_Moralistic_Democracy } }
			complete_national_focus = SER_Moralistic_Democracy
		}
		clr_country_flag = SER_reprad_coalition_flag
		clr_country_flag = SER_repsoc_coalition_flag
		activate_advisor = SER_mihailo_ilic_sic
		hidden_effect = {
			SER_remove_radical_ideas = yes
			for_each_loop = {
				array = SER_former_rep_government_ideas
				add_ideas = var:v
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.1 option yugoslavia_events.1.b"
		name = yugoslavia_events.1.b #People's Radical Party
		trigger = {
			NOT = { has_country_leader = { character = SER_petar_ii } }
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.2
				has_completed_focus = SER_Moralistic_Democracy
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_SOCDEM }
				}
			}
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.1
		}
		set_politics = {
			ruling_party = authoritarian_democrat
			election_frequency = 60
			elections_allowed = yes
		}
		if = {
			limit = { NOT = { has_completed_focus = SER_National_Vanguard } }
			complete_national_focus = SER_National_Vanguard
		}
		if = {
			limit = { has_completed_focus = SER_unite_with_agrarians }
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			add_to_coalition = yes
		}
		clr_country_flag = SER_reprad_coalition_flag
		clr_country_flag = SER_radagr_coalition_flag
		activate_advisor = SER_nikola_uzunovic_sic
		hidden_effect = {
			SER_remove_republican_ideas = yes
			for_each_loop = {
				array = SER_former_rad_government_ideas
				add_ideas = var:v
			}
		}
		SER_recalculate_konspiracija = yes
	}

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.1 option yugoslavia_events.1.c"
		name = yugoslavia_events.1.c #Socialist Party
		trigger = {
			NOT = { has_country_leader = { character = SER_petar_ii } }
			has_country_flag = YUG_usy_formed
		}
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SER_path option = SER_PATH_REP_SOCLIB }
					has_game_rule = { rule = SER_path option = SER_PATH_AUTDEM }
					has_game_rule = { rule = SER_path option = SER_PATH_REP_PATAUT }
				}
			}
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.1
		}
		set_politics = {
			ruling_party = social_democrat
			election_frequency = 48
			elections_allowed = yes
		}
		if = {
			limit = { NOT = { has_completed_focus = SER_Victory_for_the_People } }
			complete_national_focus = SER_Victory_for_the_People
		}
		activate_advisor = SER_mihailo_ilic_sic
		hidden_effect = {
			SER_remove_radical_ideas = yes
			SER_remove_republican_ideas = yes
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			add_to_coalition = yes
		}
	}

	## Royalist options

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.1 option yugoslavia_events.1.e"
		name = yugoslavia_events.1.e # Democratic Party
		trigger = {
			has_country_leader = { character = SER_petar_ii }
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.2
				has_government = social_conservative
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = SER_path option = SER_PATH_SOCCON }
			}
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		set_politics = {
			ruling_party = social_liberal
			election_frequency = 48
			elections_allowed = yes
		}
		activate_advisor = SER_mihailo_ilic_sic
	}

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.1 option yugoslavia_events.1.b"
		name = yugoslavia_events.1.b
		trigger = {
			has_country_leader = { character = SER_petar_ii }
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.2
				has_government = social_liberal
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = SER_path option = SER_PATH_MON_SOCLIB }
			}
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.05
		}
		set_politics = {
			ruling_party = social_conservative
			election_frequency = 48
			elections_allowed = yes
		}
		activate_advisor = SER_nikola_uzunovic_sic
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
		}
	}
}
country_event = { # The (Republican-)Democratic Party
	id = yugoslavia_events.2
	title = {
		text = yugoslavia_events.2.t1
		trigger = {
			has_country_leader = { character = SER_petar_ii }
		}
	}
	title = {
		text = yugoslavia_events.2.t2
		trigger = {
			NOT = {
				has_country_leader = { character = SER_petar_ii }
			}
		}
	}
	desc = {
		text = yugoslavia_events.2.d1
		trigger = {
			has_country_leader = { character = SER_petar_ii }
		}
	}
	desc = {
		text = yugoslavia_events.2.d2
		trigger = {
			NOT = {
				has_country_leader = { character = SER_petar_ii }
			}
			has_elected_government = yes
		}
	}
	desc = {
		text = yugoslavia_events.2.d3
		trigger = {
			NOT = {
				has_country_leader = { character = SER_petar_ii }
			}
			has_elected_government = no
		}
	}
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.2 option yugoslavia_events.2.a"
		name = yugoslavia_events.2.a
		if = {
			limit = {
				has_country_leader = { character = SER_petar_ii }
			}
			set_party_name = {
				ideology = social_liberal
				long_name = SER_YUG_democratic_party_long
				name = SER_YUG_democratic_party
			}
		}
		else = {
			set_party_name = {
				ideology = social_liberal
				long_name = SER_YUG_republican_democratic_party_long
				name = SER_YUG_republican_democratic_party
			}
			country_event = { id = yugoslavia_events.5 days = 30 }
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.02
		}
	}
}
country_event = { # The Radicals Radicalize
	id = yugoslavia_events.3
	title = yugoslavia_events.3.t
	desc = {
		text = yugoslavia_events.3.d1
		trigger = {
			has_completed_focus = SER_unite_with_agrarians
		}
	}
	desc = {
		text = yugoslavia_events.3.d2
		trigger = {
			NOT = {
				has_completed_focus = SER_unite_with_agrarians
			}
		}
	}
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	trigger = {
		NOT = {
			has_country_leader = { character = SER_petar_ii }
		}
		has_democratic_government = yes
	}
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.3 option yugoslavia_events.3.a"
		name = yugoslavia_events.3.a
		if = {
			limit = {
				has_completed_focus = SER_unite_with_agrarians
			}
			set_party_name = {
				ideology = market_liberal
				long_name = SER_YUG_slovene_party_long
				name = SER_YUG_slovene_party
			}
			set_party_name = {
				ideology = social_conservative
				long_name = SER_YUG_jarez_party_long
				name = SER_YUG_jarez_party
			}
			set_party_name = {
				ideology = authoritarian_democrat
				long_name = SER_YUG_jarez_party_long
				name = SER_YUG_jarez_party
			}
		}
		else = {
			set_party_name = { # Move to another event later
				ideology = market_liberal
				long_name = SER_YUG_slovene_party_long
				name = SER_YUG_slovene_party
			}
			set_party_name = { # move to another event later
				ideology = social_conservative
				long_name = SER_YUG_hpss_party_long
				name = SER_YUG_hpss_party
			}
			set_party_name = {
				ideology = authoritarian_democrat
				long_name = SER_YUG_authoritarian_democrat_party_long
				name = SER_market_liberal_party
			}
		}
		add_popularity = {
			ideology = market_liberal
			popularity = -0.2
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.1
		}
		if = {
			limit = {
				check_variable = { YUG_serbia_pp_requirement < 5 }
			}
			set_temp_variable = { added_need = 1 }
			custom_effect_tooltip = YUG_serbia_increase_turn_req_tt
			add_to_variable = { YUG_serbia_pp_requirement = added_need }
			YUG_update_AI_variables_serbia = yes
		}
	}
}
country_event = { # Fate of the Konspiracija
	id = yugoslavia_events.4
	title = yugoslavia_events.4.t
	desc = yugoslavia_events.4.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		SER_has_founded_yugoslavia = yes
	}

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.4 option yugoslavia_events.4.a"
		name = yugoslavia_events.4.a
		if = {
			limit = {
				set_temp_variable = { natpop_popularity = ROOT.party_popularity@national_populist }
				check_variable = {
					var = natpop_popularity
					value = 0.1
					compare = less_than_or_equals
				}
			}
			add_ideas = SER_YUG_constitutionalist_military
			set_temp_variable = { pp_gain = 2 }
			custom_effect_tooltip = YUG_pp_gain_tt
			add_to_variable = { YUG_political_capital = pp_gain }
			retire_character = SER_serbian_cultural_club
		}
		else_if = {
			limit = {
				set_temp_variable = { natpop_popularity = ROOT.party_popularity@national_populist }
				check_variable = {
					var = natpop_popularity
					value = 0.2
					compare = less_than_or_equals
				}
			}
			add_ideas = SER_YUG_interferent_military
			if = {
				limit = {
					check_variable = { YUG_croatia_relations_level > 1 }
				}
				set_temp_variable = { checked_state = 2 } # Croatia
				set_temp_variable = { ethnic_situation = -1 }
				custom_effect_tooltip = YUG_croatia_reduce_relations_tt
				YUG_update_ethnic_situation = yes
			}
			if = {
				limit = {
					check_variable = { YUG_slovenia_relations_level > 1 }
				}
				set_temp_variable = { checked_state = 4 } # Slovenia
				set_temp_variable = { ethnic_situation = -1 }
				custom_effect_tooltip = YUG_slovenia_reduce_relations_tt
				YUG_update_ethnic_situation = yes
			}
		}
		else = {
			add_ideas = SER_YUG_deep_state
			if = {
				limit = {
					check_variable = { YUG_croatia_relations_level > 2 }
				}
				set_temp_variable = { checked_state = 2 } # Croatia
				set_temp_variable = { ethnic_situation = -2 }
				custom_effect_tooltip = YUG_croatia_reduce_relations_tt
				YUG_update_ethnic_situation = yes
			}
			else_if = {
				limit = {
					check_variable = { YUG_croatia_relations_level > 1 }
				}
				set_temp_variable = { checked_state = 2 } # Croatia
				set_temp_variable = { ethnic_situation = -1 }
				custom_effect_tooltip = YUG_croatia_reduce_relations_tt
				YUG_update_ethnic_situation = yes
			}
			if = {
				limit = {
					check_variable = { YUG_bosnia_relations_level > 1 }
				}
				set_temp_variable = { checked_state = 3 } # Bosnia
				set_temp_variable = { ethnic_situation = -1 }
				custom_effect_tooltip = YUG_bosnia_reduce_relations_tt
				YUG_update_ethnic_situation = yes
			}
			if = {
				limit = {
					check_variable = { YUG_slovenia_relations_level > 2 }
				}
				set_temp_variable = { checked_state = 4 } # Slovenia
				set_temp_variable = { ethnic_situation = -2 }
				custom_effect_tooltip = YUG_slovenia_reduce_relations_tt
				YUG_update_ethnic_situation = yes
			}
			else_if = {
				limit = {
					check_variable = { YUG_slovenia_relations_level > 1 }
				}
				set_temp_variable = { checked_state = 4 } # Slovenia
				set_temp_variable = { ethnic_situation = -1 }
				custom_effect_tooltip = YUG_slovenia_reduce_relations_tt
				YUG_update_ethnic_situation = yes
			}
			if = {
				limit = {
					check_variable = { YUG_other_relations_level > 1 }
				}
				set_temp_variable = { checked_state = 5 } # Other
				set_temp_variable = { ethnic_situation = -1 }
				custom_effect_tooltip = YUG_other_reduce_relations_tt
				YUG_update_ethnic_situation = yes
			}
		}
	}
}
country_event = { # The (Republican-)Democratic Party
	id = yugoslavia_events.5
	title = yugoslavia_events.5.t
	desc = yugoslavia_events.5.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	trigger = {
		has_elected_government = yes
	}
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.5 option yugoslavia_events.5.a"
		name = yugoslavia_events.5.a
		set_country_flag = YUG_grol_leads_republicans
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.5 option yugoslavia_events.5.b"
		name = yugoslavia_events.5.b
		set_country_flag = YUG_budisavljevic_leads_republicans
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.5 option yugoslavia_events.5.c"
		name = yugoslavia_events.5.c
		trigger = { NOT = { country_exists = SLV } }
		set_country_flag = YUG_kramer_leads_republicans
	}
}
country_event = { # ORJUNA
	id = yugoslavia_events.6
	title = yugoslavia_events.6.t
	desc = yugoslavia_events.6.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	trigger = {
		has_socialist_government = no
	}
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.6 option yugoslavia_events.6.a"
		name = yugoslavia_events.6.a
		if = {
			limit = {
				has_dictatorship_government = no
			}
			set_party_name = {
				ideology = national_populist
				long_name = SER_YUG_orjuna_party_long
				name = SER_YUG_orjuna_party
			}
			promote_character = SER_mirko_korolija
		}
		add_popularity = {
			ideology = national_populist
			popularity = 0.02
		}
		set_country_flag = YUG_orjuna_is_established
		set_temp_variable = { pp_gain = 1 }
		custom_effect_tooltip = YUG_pp_gain_tt
		add_to_variable = { YUG_political_capital = pp_gain }
		custom_effect_tooltip = YUG_orjuna_is_established_tt
	}
}
country_event = { # Special Relationship
	id = yugoslavia_events.7
	title = yugoslavia_events.7.t
	desc = yugoslavia_events.7.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.7 option yugoslavia_events.7.a"
		name = yugoslavia_events.7.a
		ai_chance = { base = 100 }
		give_guarantee = FROM
		give_military_access = FROM
		FROM = {
			give_military_access = ROOT
		}
		diplomatic_relation = {
			country = FROM
			relation = non_aggression_pact
		}
		if = {
			limit = {
				SRI = {
					is_in_faction_with = ROOT
					is_ai = yes
				}
			}
			SRI = {
				diplomatic_relation = {
					country = FROM
					relation = non_aggression_pact
				}
			}
		}
		FROM = {
			country_event = yugoslavia_events.8
		}
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.7 option yugoslavia_events.7.b"
		name = yugoslavia_events.7.b
		ai_chance = { base = 0 }
		FROM = {
			country_event = yugoslavia_events.9
		}
	}
}
country_event = { # Special Relationship
	id = yugoslavia_events.8
	title = yugoslavia_events.8.t
	desc = yugoslavia_events.8.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.8 option yugoslavia_events.8.a"
		name = yugoslavia_events.8.a
		effect_tooltip = {
			FROM = {
				give_guarantee = SER
				give_military_access = SER
				SER = {
					give_military_access = ROOT
				}
				diplomatic_relation = {
					country = SER
					relation = non_aggression_pact
				}
			}
		}
		add_ideas = SER_YUG_special_relationship_idea
	}
}
country_event = { # Special Relationship
	id = yugoslavia_events.9
	title = yugoslavia_events.9.t
	desc = yugoslavia_events.9.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.9 option yugoslavia_events.9.a"
		name = yugoslavia_events.9.a
	}
}
country_event = { # Party of Rights
	id = yugoslavia_events.10
	title = yugoslavia_events.10.t
	desc = yugoslavia_events.10.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	trigger = {
		NOT = {
			has_completed_focus = SER_YUG_brotherhood_and_unity
		}
	}
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.10 option yugoslavia_events.10.a"
		name = yugoslavia_events.10.a
		add_popularity = {
			ideology = national_populist
			popularity = 0.02
		}
		if = {
			limit = {
				check_variable = { YUG_croatia_relations_level > 1 }
			}
			set_temp_variable = { checked_state = 2 } # Croatia
			set_temp_variable = { ethnic_situation = -1 }
			custom_effect_tooltip = YUG_croatia_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
		hidden_effect = {
			country_event = { id = yugoslavia_events.15 days = 300 random_days = 60 }
		}
	}
}
country_event = { # Socialist National Conference
	id = yugoslavia_events.11
	title = yugoslavia_events.11.t
	desc = yugoslavia_events.11.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.11 option yugoslavia_events.11.a"
		name = yugoslavia_events.11.a
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.01
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.01
		}
		add_popularity = {
			ideology = syndicalist
			popularity = 0.01
		}
		hidden_effect = {
			country_event = { id = yugoslavia_events.17 days = 14 }
		}
	}
}
country_event = { # South Slavic Unification
	id = yugoslavia_events.12
	title = yugoslavia_events.12.t
	desc = yugoslavia_events.12.d
	picture = GFX_report_event_BUL_assembly

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.12 option yugoslavia_events.12.a"
		name = yugoslavia_events.12.a
		FROM = {
			country_event = yugoslavia_events.13
		}
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.12 option yugoslavia_events.12.b"
		name = yugoslavia_events.12.b
		ai_chance = { base = 0 }
		FROM = {
			country_event = yugoslavia_events.14
		}
	}
}
country_event = { # South Slavic Unification
	id = yugoslavia_events.13
	title = yugoslavia_events.13.t
	desc = yugoslavia_events.13.d
	picture = GFX_report_event_BUL_assembly

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.13 option yugoslavia_events.13.a"
		name = yugoslavia_events.13.a
		every_other_country = {
			limit = {
				has_war_with = FROM
				NOT = { has_war_with = ROOT }
			}
			ROOT = {
				add_to_war = {
					targeted_alliance = FROM
					enemy = PREV
					hostility_reason = asked_to_join
				}
			}
		}
		annex_country = {
			target = FROM
			transfer_troops = yes
		}
		FROM = {
			every_core_state = {
				limit = {
					is_claim_or_core_of_ROOT = no
					NOT = { is_core_of = GRE }
					NOT = { is_claimed_by = GRE }
					NOT = { is_core_of = ROM }
					NOT = { is_claimed_by = ROM }
				}
				add_claim_by = ROOT
			}
			every_character = {
				limit = {
					is_unit_leader = yes
					NOT = {
						is_character = BUL_pencho_zlatev
						is_character = BUL_kimon_georgiev
						is_character = BUL_hristo_lukov
						is_character = BUL_ivan_valkov
						is_character = BUL_nikola_hadzhipetkov
						is_character = BUL_boris_sakskoburggotski
						is_character = BUL_kyril_sakskoburggotski
					}
				}
				set_character_flag = BUL_leader
				set_nationality = ROOT
			}
		}
		add_stability = -0.1
		YUG_bulgarian_integration_relations_effect = yes
		if = {
			limit = { is_ai = no }
			set_country_flag = four_of_a_kind_achievement_condition
		}
	}
}
country_event = { # Bulgaria refuses
	id = yugoslavia_events.14
	title = yugoslavia_events.14.t
	desc = yugoslavia_events.14.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.14 option yugoslavia_events.14.a"
		name = yugoslavia_events.14.a
		add_popularity = {
			ideology = radical_socialist
			popularity = -0.05
		}
	}
}
country_event = { # ohno
	id = yugoslavia_events.15
	title = yugoslavia_events.15.t
	desc = yugoslavia_events.15.d
	picture = GFX_report_event_yugoslavia_partisans

	is_triggered_only = yes
	trigger = {
		NOT = {
			has_completed_focus = SER_YUG_brotherhood_and_unity
		}
	}
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.15 option yugoslavia_events.15.a"
		name = yugoslavia_events.15.a
		add_popularity = {
			ideology = national_populist
			popularity = 0.02
		}
		if = {
			limit = {
				check_variable = { YUG_croatia_relations_level > 1 }
			}
			set_temp_variable = { checked_state = 2 } # Croatia
			set_temp_variable = { ethnic_situation = -1 }
			custom_effect_tooltip = YUG_croatia_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
		set_variable = { YUG_pc_expenditure_croatia = 0 }
		custom_effect_tooltip = SER_YUG_croatia_zero_expenditure_tt
		YUG_update_expenditure_missions_croatia = yes
		set_country_flag = YUG_ustase_is_established
		custom_effect_tooltip = YUG_ustase_is_established_tt
	}
}
country_event = { # Yugoslavia random event
	# This is way more complicated than it should be buuuut whatever
	id = yugoslavia_events.16
	immediate = {
		hidden_effect = {
			country_event = { id = yugoslavia_mechanics_events.4 days = 90 }
		}
	}
	title = {
		text = yugoslavia_events.16.t1
		trigger = {
			has_country_flag = YUG_flavor_event_1
		}
	}
	title = {
		text = yugoslavia_events.16.t2
		trigger = {
			has_country_flag = YUG_flavor_event_2
		}
	}
	title = {
		text = yugoslavia_events.16.t3
		trigger = {
			has_country_flag = YUG_flavor_event_3
		}
	}
	title = {
		text = yugoslavia_events.16.t4
		trigger = {
			has_country_flag = YUG_flavor_event_4
		}
	}
	title = {
		text = yugoslavia_events.16.t5
		trigger = {
			has_country_flag = YUG_flavor_event_5
		}
	}
	title = {
		text = yugoslavia_events.16.t6
		trigger = {
			has_country_flag = YUG_flavor_event_6
		}
	}
	desc = {
		text = yugoslavia_events.16.d1
		trigger = {
			has_country_flag = YUG_flavor_event_1
		}
	}
	desc = {
		text = yugoslavia_events.16.d2
		trigger = {
			has_country_flag = YUG_flavor_event_2
		}
	}
	desc = {
		text = yugoslavia_events.16.d3
		trigger = {
			has_country_flag = YUG_flavor_event_3
		}
	}
	desc = {
		text = yugoslavia_events.16.d4
		trigger = {
			has_country_flag = YUG_flavor_event_4
		}
	}
	desc = {
		text = yugoslavia_events.16.d5
		trigger = {
			has_country_flag = YUG_flavor_event_5
		}
	}
	desc = {
		text = yugoslavia_events.16.d6
		trigger = {
			has_country_flag = YUG_flavor_event_6
		}
	}
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.16 option yugoslavia_events.16.a"
		name = yugoslavia_events.16.a
		trigger = {
			has_country_flag = YUG_flavor_event_1
		}
		random_list = {
			20 = {
				if = {
					limit = {
						check_variable = { YUG_croatia_relations_level < 10 }
					}
					set_temp_variable = { checked_state = 2 } # Croatia
					set_temp_variable = { ethnic_situation = 1 }
					custom_effect_tooltip = YUG_croatia_improve_relations_tt
					YUG_update_ethnic_situation = yes
				}
			}
			20 = {
				if = {
					limit = {
						check_variable = { YUG_bosnia_relations_level < 10 }
					}
					set_temp_variable = { checked_state = 3 } # Bosnia
					set_temp_variable = { ethnic_situation = 1 }
					custom_effect_tooltip = YUG_bosnia_improve_relations_tt
					YUG_update_ethnic_situation = yes
				}
			}
			20 = {
				if = {
					limit = {
						check_variable = { YUG_slovenia_relations_level < 10 }
					}
					set_temp_variable = { checked_state = 4 } # Slovenia
					set_temp_variable = { ethnic_situation = 1 }
					custom_effect_tooltip = YUG_slovenia_improve_relations_tt
					YUG_update_ethnic_situation = yes
				}
			}
			20 = {
				if = {
					limit = {
						check_variable = { YUG_other_relations_level < 10 }
					}
					set_temp_variable = { checked_state = 5 } # Other
					set_temp_variable = { ethnic_situation = 1 }
					custom_effect_tooltip = YUG_other_improve_relations_tt
					YUG_update_ethnic_situation = yes
				}
			}
		}
		add_stability = -0.08
		add_political_power = -60
		set_temp_variable = { pp_loss = -2 }
		custom_effect_tooltip = YUG_pp_loss_tt
		add_to_variable = { YUG_political_capital = pp_loss }
		clamp_variable = { var = YUG_political_capital min = 0 }
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.16 option yugoslavia_events.16.b"
		name = yugoslavia_events.16.b
		trigger = {
			has_country_flag = YUG_flavor_event_2
		}
		if = {
			limit = {
				check_variable = { YUG_serbia_relations_level < 10 }
			}
			set_temp_variable = { checked_state = 1 }
			set_temp_variable = { ethnic_situation = 1 }
			custom_effect_tooltip = YUG_serbia_improve_relations_tt
			YUG_update_ethnic_situation = yes
		}
		if = {
			limit = {
				check_variable = { YUG_other_relations_level < 10 }
			}
			set_temp_variable = { checked_state = 5 }
			set_temp_variable = { ethnic_situation = 1 }
			custom_effect_tooltip = YUG_other_improve_relations_tt
			YUG_update_ethnic_situation = yes
		}
		if = {
			limit = {
				check_variable = { YUG_croatia_relations_level > 2 }
			}
			set_temp_variable = { checked_state = 2 }
			set_temp_variable = { ethnic_situation = -2 }
			custom_effect_tooltip = YUG_croatia_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
		else_if = {
			limit = {
				check_variable = { YUG_croatia_relations_level > 1 }
			}
			set_temp_variable = { checked_state = 2 }
			set_temp_variable = { ethnic_situation = -1 }
			custom_effect_tooltip = YUG_croatia_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
		if = {
			limit = {
				check_variable = { YUG_slovenia_relations_level > 2 }
			}
			set_temp_variable = { checked_state = 4 }
			set_temp_variable = { ethnic_situation = -2 }
			custom_effect_tooltip = YUG_slovenia_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
		else_if = {
			limit = {
				check_variable = { YUG_slovenia_relations_level > 1 }
			}
			set_temp_variable = { checked_state = 4 }
			set_temp_variable = { ethnic_situation = -1 }
			custom_effect_tooltip = YUG_slovenia_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.16 option yugoslavia_events.16.c"
		name = yugoslavia_events.16.c
		trigger = {
			has_country_flag = YUG_flavor_event_2
		}
		if = {
			limit = {
				check_variable = { YUG_croatia_relations_level < 10 }
			}
			set_temp_variable = { checked_state = 2 } # Croatia
			set_temp_variable = { ethnic_situation = 1 }
			custom_effect_tooltip = YUG_croatia_improve_relations_tt
			YUG_update_ethnic_situation = yes
		}
		if = {
			limit = {
				check_variable = { YUG_slovenia_relations_level < 10 }
			}
			set_temp_variable = { checked_state = 4 } # Slovenia
			set_temp_variable = { ethnic_situation = 1 }
			custom_effect_tooltip = YUG_slovenia_improve_relations_tt
			YUG_update_ethnic_situation = yes
		}
		if = {
			limit = {
				check_variable = { YUG_serbia_relations_level > 2 }
			}
			set_temp_variable = { checked_state = 1 } # Serbia
			set_temp_variable = { ethnic_situation = -2 }
			custom_effect_tooltip = YUG_serbia_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
		else_if = {
			limit = {
				check_variable = { YUG_serbia_relations_level > 1 }
			}
			set_temp_variable = { checked_state = 1 } # Serbia
			set_temp_variable = { ethnic_situation = -1 }
			custom_effect_tooltip = YUG_serbia_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
		if = {
			limit = {
				check_variable = { YUG_other_relations_level > 2 }
			}
			set_temp_variable = { checked_state = 5 } # Other
			set_temp_variable = { ethnic_situation = -2 }
			custom_effect_tooltip = YUG_other_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
		else_if = {
			limit = {
				check_variable = { YUG_other_relations_level > 1 }
			}
			set_temp_variable = { checked_state = 5 } # Other
			set_temp_variable = { ethnic_situation = -1 }
			custom_effect_tooltip = YUG_other_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.16 option yugoslavia_events.16.e"
		name = yugoslavia_events.16.e
		trigger = {
			has_country_flag = YUG_flavor_event_3
		}
		add_political_power = -25
		add_stability = -0.02
		set_temp_variable = { pp_loss = -2 }
		custom_effect_tooltip = YUG_pp_loss_tt
		add_to_variable = { YUG_political_capital = pp_loss }
		clamp_variable = { var = YUG_political_capital min = 0 }
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.16 option yugoslavia_events.16.f"
		name = yugoslavia_events.16.f
		trigger = {
			has_country_flag = YUG_flavor_event_4
		}
		add_political_power = -50
		set_temp_variable = { pp_gain = 1 }
		custom_effect_tooltip = YUG_pp_gain_tt
		add_to_variable = { YUG_political_capital = pp_gain }
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.16 option yugoslavia_events.16.g"
		name = yugoslavia_events.16.g
		trigger = {
			has_country_flag = YUG_flavor_event_5
		}
		add_political_power = -75
		add_stability = -0.04
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.16 option yugoslavia_events.16.h"
		name = yugoslavia_events.16.h
		trigger = {
			has_country_flag = YUG_flavor_event_5
		}
		if = {
			limit = {
				check_variable = { YUG_bosnia_relations_level > 1 }
			}
			set_temp_variable = { checked_state = 3 } # Bosnia
			set_temp_variable = { ethnic_situation = -1 }
			custom_effect_tooltip = YUG_bosnia_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.16 option yugoslavia_events.16.i"
		name = yugoslavia_events.16.i
		trigger = {
			has_country_flag = YUG_flavor_event_6
		}
		set_temp_variable = { pp_loss = -2 }
		custom_effect_tooltip = YUG_pp_loss_tt
		add_to_variable = { YUG_political_capital = pp_loss }
		clamp_variable = { var = YUG_political_capital min = 0 }
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.16 option yugoslavia_events.16.j"
		name = yugoslavia_events.16.j
		trigger = {
			has_country_flag = YUG_flavor_event_6
		}
		if = {
			limit = {
				check_variable = { YUG_other_relations_level > 1 }
			}
			set_temp_variable = { checked_state = 5 } # Other
			set_temp_variable = { ethnic_situation = -1 }
			custom_effect_tooltip = YUG_other_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
	}
}
country_event = { # The Unification Congress
	id = yugoslavia_events.17
	title = yugoslavia_events.17.t
	desc = {
		text = yugoslavia_events.17.d1
		trigger = {
			has_government = radical_socialist
			NOT = {
				has_completed_focus = SER_serbian_path
			}
		}
	}
	desc = {
		text = yugoslavia_events.17.d2
		trigger = {
			has_government = radical_socialist
			has_completed_focus = SER_serbian_path
		}
	}
	desc = {
		text = yugoslavia_events.17.d3
		trigger = {
			has_completed_focus = SER_Victory_for_the_People
			NOT = {
				has_government = radical_socialist
			}
		}
	}
	desc = {
		text = yugoslavia_events.17.d4
		trigger = {
			NOT = {
				has_government = radical_socialist
			}
			NOT = {
				has_completed_focus = SER_Victory_for_the_People
			}
		}
	}
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.17 option yugoslavia_events.17.a"
		name = yugoslavia_events.17.a
		if = {
			limit = {
				has_government = radical_socialist
				NOT = {
					has_completed_focus = SER_serbian_path
				}
			}
			set_party_name = {
				ideology = radical_socialist
				long_name = SER_YUG_radical_socialist_party_long
				name = SER_YUG_radical_socialist_party
			}
			set_party_name = {
				ideology = syndicalist
				long_name = SER_YUG_radical_socialist_party_long
				name = SER_YUG_radical_socialist_party
			}
			set_party_name = {
				ideology = totalist
				long_name = SER_YUG_radical_socialist_party_long
				name = SER_YUG_radical_socialist_party
			}
			set_party_name = {
				ideology = social_democrat
				long_name = SER_YUG_radical_socialist_party_long
				name = SER_YUG_radical_socialist_party
			}
			end_coalition = yes
			set_temp_variable = { coalition_partner_var = token:totalist }
			add_to_coalition = yes
			set_temp_variable = { coalition_partner_var = token:syndicalist }
			add_to_coalition = yes
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
			hidden_effect = {
				country_event = { id = yugoslavia_events.18 days = 15 }
			}
		}
		else_if = {
			limit = {
				has_government = radical_socialist
				has_completed_focus = SER_serbian_path
			}
			set_party_name = {
				ideology = radical_socialist
				long_name = SER_YUG_radical_socialist_party_long
				name = SER_YUG_radical_socialist_party
			}
			set_party_name = {
				ideology = syndicalist
				long_name = SER_YUG_syndicalist_party_long
				name = SER_YUG_syndicalist_party
			}
			set_party_name = {
				ideology = totalist
				long_name = SER_YUG_radical_socialist_party_long
				name = SER_YUG_radical_socialist_party
			}
			set_party_name = {
				ideology = social_democrat
				long_name = SER_YUG_radical_socialist_party_long
				name = SER_YUG_radical_socialist_party
			}
			end_coalition = yes
			set_temp_variable = { coalition_partner_var = token:totalist }
			add_to_coalition = yes
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
			hidden_effect = {
				country_event = { id = yugoslavia_events.18 days = 15 }
			}
		}
		else_if = {
			limit = {
				has_completed_focus = SER_Victory_for_the_People
				NOT = {
					has_government = radical_socialist
				}
			}
			set_party_name = {
				ideology = radical_socialist
				long_name = SER_YUG_radical_socialist_party_long
				name = SER_YUG_radical_socialist_party
			}
			set_party_name = {
				ideology = syndicalist
				long_name = SER_YUG_syndicalist_party_long
				name = SER_YUG_syndicalist_party
			}
			set_party_name = {
				ideology = totalist
				long_name = SER_YUG_syndicalist_party_long
				name = SER_YUG_syndicalist_party
			}
			set_party_name = {
				ideology = social_democrat
				long_name = SER_YUG_social_democrat_party_long
				name = SER_YUG_social_democrat_party
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_completed_focus = SER_Victory_for_the_People
				}
				NOT = {
					has_government = radical_socialist
				}
			}
			set_party_name = {
				ideology = radical_socialist
				long_name = SER_YUG_radical_socialist_party_long
				name = SER_YUG_radical_socialist_party
			}
			set_party_name = {
				ideology = syndicalist
				long_name = SER_YUG_radical_socialist_party_long
				name = SER_YUG_radical_socialist_party
			}
			set_party_name = {
				ideology = totalist
				long_name = SER_YUG_radical_socialist_party_long
				name = SER_YUG_radical_socialist_party
			}
			set_party_name = {
				ideology = social_democrat
				long_name = SER_YUG_social_democrat_party_long
				name = SER_YUG_social_democrat_party
			}
		}
	}
}
country_event = { # New party leader
	id = yugoslavia_events.18
	title = yugoslavia_events.18.t
	desc = yugoslavia_events.18.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.18 option yugoslavia_events.18.a"
		name = yugoslavia_events.18.a
		add_political_power = -25
		if = {
			limit = {
				check_variable = { YUG_serbia_pp_requirement > 1 }
			}
			set_temp_variable = { added_need = -1 }
			custom_effect_tooltip = YUG_serbia_decrease_turn_req_tt
			add_to_variable = { YUG_serbia_pp_requirement = added_need }
			YUG_update_AI_variables_serbia = yes
		}
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.18 option yugoslavia_events.18.b"
		name = yugoslavia_events.18.b
		retire_character = SER_trifun_kaclerovic
		promote_character = SER_mosa_pijade

	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.18 option yugoslavia_events.18.c"
		name = yugoslavia_events.18.c
		retire_character = SER_trifun_kaclerovic
		promote_character = SER_milan_gorkic
		if = {
			limit = {
				check_variable = { YUG_serbia_relations_level > 1 }
			}
			set_temp_variable = { checked_state = 1 } # Serbia
			set_temp_variable = { ethnic_situation = -1 }
			custom_effect_tooltip = YUG_serbia_reduce_relations_tt
			YUG_update_ethnic_situation = yes
		}
		if = {
			limit = {
				check_variable = { YUG_croatia_relations_level < 10 }
			}
			set_temp_variable = { checked_state = 2 } # Croatia
			set_temp_variable = { ethnic_situation = 1 }
			custom_effect_tooltip = YUG_croatia_improve_relations_tt
			YUG_update_ethnic_situation = yes
		}
		if = {
			limit = {
				check_variable = { YUG_slovenia_relations_level < 10 }
			}
			set_temp_variable = { checked_state = 4 } # Slovenia
			set_temp_variable = { ethnic_situation = 1 }
			custom_effect_tooltip = YUG_slovenia_improve_relations_tt
			YUG_update_ethnic_situation = yes
		}
		hidden_effect = {
			country_event = { id = yugoslavia_events.19 days = 1825 }
		}
	}
}
country_event = { # Is this a heckin reference
	id = yugoslavia_events.19
	title = yugoslavia_events.19.t
	desc = yugoslavia_events.19.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	trigger = {
		NOT = {
			has_completed_focus = SER_YUG_brotherhood_and_unity
		}
		OR = {
			is_faction_leader = yes
			is_in_faction = no
		}
		has_government = radical_socialist
	}
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event yugoslavia_events.19 option yugoslavia_events.19.a"
		name = yugoslavia_events.19.a
		add_stability = -0.05
	}
	option = {
		log = "[GetLogInfo]: event yugoslavia_events.19 option yugoslavia_events.19.b"
		name = yugoslavia_events.19.b
		retire_character = SER_milan_gorkic
		promote_character = SER_josip_broz
		add_stability = -0.1
	}
}


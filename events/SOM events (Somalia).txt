###########################
# Somalia
###########################

add_namespace = somalia_events

country_event = { #BM crisis
	id = somalia_events.2
	title = somalia_events.2.t
	desc = somalia_events.2.d
	picture = GFX_report_event_SOM_black_monday

	is_triggered_only = yes

	immediate = {
		hidden_effect = { add_ideas = SOM_BM }
	}

	option = {
		log = "[GetLogInfo]: event somalia_events.2 option somalia_events.2.a"
		name = somalia_events.2.a
		effect_tooltip = { add_ideas = SOM_BM }
		add_stability = -0.2
	}
}

country_event = { #elections
	id = somalia_events.3
	title = somalia_events.3.t
	desc = somalia_events.3.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event somalia_events.3 option somalia_events.3.a"
		name = somalia_events.3.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_game_rule = { rule = SOM_path option = SOM_PATH_SOCCON }
			}
		}
		add_political_power = 75
	}

	option = {
		log = "[GetLogInfo]: event somalia_events.3 option somalia_events.3.b"
		name = somalia_events.3.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_game_rule = { rule = SOM_path option = SOM_PATH_AUTDEM }
			}
		}
		add_political_power = 100
		set_politics = {
			ruling_party = social_conservative
			elections_allowed = no
		}
		set_popularities = {
			totalist = 0
			radical_socialist = 8
			syndicalist = 2
			social_democrat = 8
			social_liberal = 11
			market_liberal = 4
			social_conservative = 32
			authoritarian_democrat = 29
			paternal_autocrat = 3
			national_populist = 3
		}
	}
}

country_event = {
	id = somalia_events.4
	title = somalia_events.4.t
	desc = somalia_events.4.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event somalia_events.4 option somalia_events.4.a"
		name = somalia_events.4.a
		add_political_power = 15
	}
}

country_event = {
	id = somalia_events.5
	title = somalia_events.5.t
	desc = somalia_events.5.d
	picture = GFX_report_event_SOM_referendum

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event somalia_events.5 option somalia_events.5.a"
		name = somalia_events.5.a
		add_political_power = -100
		set_politics = {
			ruling_party = paternal_autocrat
			elections_allowed = no
		}
		set_popularities = {
			totalist = 0
			radical_socialist = 8
			syndicalist = 2
			social_democrat = 8
			social_liberal = 11
			market_liberal = 4
			social_conservative = 3
			authoritarian_democrat = 29
			paternal_autocrat = 32
			national_populist = 3
		}
	}
}

country_event = {
	id = somalia_events.6
	title = somalia_events.6.t
	desc = somalia_events.6.d
	picture = GFX_report_event_SOM_clan_argument

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event somalia_events.6 option somalia_events.6.a"
		name = somalia_events.6.a
		add_political_power = -25
	}
}

country_event = {
	id = somalia_events.7
	title = somalia_events.7.t
	desc = somalia_events.7.d
	picture = GFX_report_event_SOM_hassan_book

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event somalia_events.7 option somalia_events.7.a"
		name = somalia_events.7.a
		add_political_power = 15
	}
}

country_event = {
	id = somalia_events.8
	title = somalia_events.8.t
	desc = somalia_events.8.d
	picture = GFX_report_event_SOM_education_success

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event somalia_events.8 option somalia_events.8.a"
		name = somalia_events.8.a
		add_political_power = 40
	}
}

country_event = {
	id = somalia_events.9
	title = somalia_events.9.t
	desc = somalia_events.9.d
	picture = GFX_report_event_SOM_hasnah_doreh

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event somalia_events.9 option somalia_events.9.a"
		name = somalia_events.9.a
		custom_override_tooltip = {
			tooltip = {
				localization_key = tooltip_create_division_template
				NAME = "Qeybinta Lugta 2"
				LINE_1 = { localization_key = line_battalion_tt NAME = infantry ICON = GFX_unit_infantry_icon_small COUNT = 9 }
			}
			if = {
				limit = { has_template = "Qeybinta Lugta 2" }
				delete_unit_template_and_units = { division_template = "Qeybinta Lugta 2" disband = yes } #no cheating
			}
			division_template = {
				name = "Qeybinta Lugta 2"
				division_names_group = SOM_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
			}
		}
		random_owned_controlled_state = {
			custom_override_tooltip = {
				tooltip = {
					localization_key = tooltip_spawn_unit
					TYPE = "Qeybinta Lugta 2"
				}
				create_unit = {
					division = "name = \"Qeybinta Lugta 'Hasna Doreh'\" division_template = \"Qeybinta Lugta 2\" start_experience_factor = 0.5"
					owner = ROOT
				}
			}
		}
	}
}

country_event = {
	id = somalia_events.12
	title = somalia_events.12.t
	desc = somalia_events.12.d

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_completed_focus = SOM_crackdownonclanism
		NOT = { has_completed_focus = SOM_finishgovernmentreforms }
	}

	option = {
		log = "[GetLogInfo]: event somalia_events.12 option somalia_events.12.a"
		name = somalia_events.12.a
		set_politics = {
			ruling_party = national_populist
			elections_allowed = no
		}
		set_popularities = {
			totalist = 0
			radical_socialist = 8
			syndicalist = 2
			social_democrat = 7
			social_liberal = 1
			market_liberal = 4
			social_conservative = 14
			authoritarian_democrat = 29
			paternal_autocrat = 3
			national_populist = 32
		}
		hidden_effect = {
			if = { limit = { NOT = { has_completed_focus = SOM_unityistrength } }
				unlock_national_focus = SOM_unityistrength
			}
			if = { limit = { NOT = { has_completed_focus = SOM_formalisekingdomstructure } }
				unlock_national_focus = SOM_formalisekingdomstructure
			}
			if = { limit = { NOT = { has_completed_focus = SOM_tfwnoclans } }
				unlock_national_focus = SOM_tfwnoclans
			}
		}
	}
}

country_event = {
	id = somalia_events.13
	title = somalia_events.13.t
	desc = somalia_events.13.d

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_war_with = ETH
	}

	option = {
		log = "[GetLogInfo]: event somalia_events.13 option somalia_events.13.a"
		name = somalia_events.13.a
		add_stability = -0.05
	}
	option = {
		log = "[GetLogInfo]: event somalia_events.13 option somalia_events.13.b"
		name = somalia_events.13.b
		add_political_power = -50
	}
}

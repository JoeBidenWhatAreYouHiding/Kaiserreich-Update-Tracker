####################
# Turkestan Events #
####################
# By JazzyHugh     #
####################

add_namespace = turkestan_republic_events

### Opening Events  ###

#Legacy of the Central Asian Revolt
country_event = {
	id = turkestan_republic_events.99
	title = turkestan_republic_events.99.t
	desc = turkestan_republic_events.99.d
	picture = GFX_report_madamin_bek_and_company

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.99 option turkestan_republic_events.99.a"
		name = turkestan_republic_events.99.a
		hidden_effect = {
			country_event = { id = turkestan_republic_events.102 days = 5 }
		}
	}
}

#The December Reshuffle
country_event = {
	id = turkestan_republic_events.100
	title = turkestan_republic_events.100.t
	desc = turkestan_republic_events.100.d
	picture = GFX_report_event_tashkent_banquet

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.100 option turkestan_republic_events.100.a"
		name = turkestan_republic_events.100.a
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = TRK_eshon_babakhan_advisor
		show_ideas_tooltip = TRK_alihan_tura_advisor
		set_temp_variable = { coalition_partner_var = token:social_conservative }
		add_to_coalition = yes
		hidden_effect = {
			set_country_flag = trk_december_reshuffle
			KHI = { country_event = { id = khiva_events.103 days = 4 } }
			country_event = { id = turkestan_republic_events.96 days = 5 }
		}
		custom_effect_tooltip = tooltip_white_line
		activate_mission = TRK_reformists_timer
		custom_effect_tooltip = TRK_tt_reformist_timer_warning
	}
}

#The Turkestani Balancing Act
country_event = {
	id = turkestan_republic_events.96
	title = turkestan_republic_events.96.t
	desc = turkestan_republic_events.96.d
	picture = GFX_report_event_BHU_dzong

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.96 option turkestan_republic_events.96.a"
		name = turkestan_republic_events.96.a
		country_event = turkestan_republic_events.97
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.96 option turkestan_republic_events.96.b"
		name = turkestan_republic_events.96.b
		country_event = turkestan_republic_events.98
	}
}

#Beks and Kurbashi
country_event = {
	id = turkestan_republic_events.97
	title = turkestan_republic_events.97.t
	desc = turkestan_republic_events.97.d
	picture = GFX_report_event_kyrgyz_wrestling_crowd

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.97 option turkestan_republic_events.97.a"
		name = turkestan_republic_events.97.a
		trigger = { NOT = { has_country_flag = TRK_had_one_already } }
		set_country_flag = TRK_had_one_already
		country_event = turkestan_republic_events.98
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.97 option turkestan_republic_events.97.b"
		name = turkestan_republic_events.97.b
		trigger = { has_country_flag = TRK_had_one_already }
		clr_country_flag = TRK_had_one_already
	}
	after = {
		activate_targeted_decision = { target = THIS decision = TRK_bribe_kurbashi }
	}
}

#Progressives and Merchants
country_event = {
	id = turkestan_republic_events.98
	title = turkestan_republic_events.98.t
	desc = turkestan_republic_events.98.d
	picture = GFX_report_event_namangan_carpet_bazaar

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.98 option turkestan_republic_events.98.a"
		name = turkestan_republic_events.98.a
		trigger = { NOT = { has_country_flag = TRK_had_one_already } }
		set_country_flag = TRK_had_one_already
		country_event = turkestan_republic_events.97
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.98 option turkestan_republic_events.98.b"
		name = turkestan_republic_events.98.b
		trigger = { has_country_flag = TRK_had_one_already }
		clr_country_flag = TRK_had_one_already
	}
	after = {
		activate_targeted_decision = { target = THIS decision = TRK_bribe_mullah }
	}
}

#Our Treaties with Russia
country_event = {
	id = turkestan_republic_events.101
	title = turkestan_republic_events.101.t
	desc = turkestan_republic_events.101.d
	picture = GFX_report_event_generic_diplomacy1

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.101 option turkestan_republic_events.101.a"
		name = turkestan_republic_events.101.a
		add_ideas = TRK_shackles_of_tashkent
		hidden_effect = {
			country_event = { id = turkestan_republic_events.105 days = 5 }
		}
	}
}

#The Coming Storm
country_event = {
	id = turkestan_republic_events.102
	title = turkestan_republic_events.102.t
	desc = turkestan_republic_events.102.d
	picture = GFX_report_event_bukharan_artillery

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.102 option turkestan_republic_events.102.a"
		name = turkestan_republic_events.102.a
		custom_effect_tooltip = CA_prep_intro_tooltip
		custom_effect_tooltip = tooltip_white_line
		activate_targeted_decision = { target = THIS decision = TRK_prep_stockpile_equipment }
		activate_targeted_decision = { target = THIS decision = TRK_prep_sell_supplies }
		hidden_effect = {
			country_event = { id = turkestan_republic_events.101 days = 5 }
		}
	}
}

#Black Monday Arrives in Tashkent
country_event = {
	id = turkestan_republic_events.103
	title = turkestan_republic_events.103.t
	desc = turkestan_republic_events.103.d
	picture = GFX_report_event_farmers_meeting

	fire_only_once = yes

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_variable = { TRK.TRK_black_monday_consumer_goods = 0.5 }
			set_variable = { TRK.TRK_black_monday_construction_speed = -0.25 }
			set_variable = { TRK.TRK_black_monday_factory_output = -0.25 }
			add_dynamic_modifier = { modifier = TRK_black_monday_modifier }
		}
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.103 option turkestan_republic_events.103.a"
		name = turkestan_republic_events.103.a
		random_owned_controlled_state = {
			limit = {
				industrial_complex > 0
			}
			remove_building = {
				type = industrial_complex
				level = 1
			}
		}
		586 = {
			damage_building = {
				type = infrastructure
				damage = 0.5
			}
		}
		407 = {
			damage_building = {
				type = infrastructure
				damage = 0.5
			}
		}
		swap_ideas = {
			remove_idea = TRK_shackles_of_tashkent
			add_idea = TRK_shackles_of_tashkent_postBM
		}
		effect_tooltip = {
			add_dynamic_modifier = { modifier = TRK_black_monday_modifier }
		}
	}
}

#Alihan Tore Meets with the Khivans
country_event = {
	id = turkestan_republic_events.104
	title = turkestan_republic_events.104.t
	desc = turkestan_republic_events.104.d
	picture = GFX_report_event_holding_court

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.104 option turkestan_republic_events.104.a"
		name = turkestan_republic_events.104.a
		add_political_power = 15
		add_popularity = {
			ideology = social_conservative popularity = 0.01
		}
		country_event = { id = turkestan_republic_events.130 days = 7 }
	}
}

#Alihan Tore Meets with the Khivans
country_event = {
	id = turkestan_republic_events.130
	title = turkestan_republic_events.130.t
	desc = turkestan_republic_events.130.d
	picture = GFX_report_event_holding_court

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.130 option turkestan_republic_events.130.a"
		name = turkestan_republic_events.130.a
		add_opinion_modifier = {
			modifier = KR_trade_agreement
			target = KHI
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 50
			producer = OTT
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 35
			producer = GER
		}
		activate_targeted_decision = { target = THIS decision = TRK_compare_maps_and_plans }
	}
}

#Turkestani Gold
country_event = {
	id = turkestan_republic_events.105
	title = turkestan_republic_events.105.t
	desc = turkestan_republic_events.105.d
	picture = GFX_report_event_fergana_gold_merchants

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.105 option turkestan_republic_events.105.a"
		name = turkestan_republic_events.105.a
		activate_mission = TRK_gold_timer
		add_ideas = TRK_syr_darya_gold_3
	}
}

#Reviving the Secret Pact
country_event = {
	id = turkestan_republic_events.106
	title = turkestan_republic_events.106.t
	desc = turkestan_republic_events.106.d
	picture = GFX_report_madamin_bek_and_company

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.106 option turkestan_republic_events.106.a"
		name = turkestan_republic_events.106.a
		add_political_power = -50
		CA_increase_pan_turk_coordination = yes
		custom_effect_tooltip = CA_tt_panturk_coord_increased
		activate_targeted_decision = { target = THIS decision = TRK_extend_caspian_sea_smuggling }
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.106 option turkestan_republic_events.106.b"
		name = turkestan_republic_events.106.b
		add_opinion_modifier = {
			modifier = TRK_doesnt_want_to_be_friends
			target = KHI
		}
	}
	after = {
		hidden_effect = {
			country_event = { id = turkestan_republic_events.107 days = 5 }
			KHI = { country_event = { id = turkestan_republic_events.108 days = 7 } }
		}
	}
}

#The Ballad of Mustafa Shokay
country_event = {
	id = turkestan_republic_events.107
	title = turkestan_republic_events.107.t
	desc = turkestan_republic_events.107.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.107 option turkestan_republic_events.107.a"
		name = turkestan_republic_events.107.a
		add_popularity = {
			ideology = social_liberal popularity = 0.01
		}
		hidden_effect = {
			country_event = { id = turkestan_republic_events.131 days = 5 }
		}
	}
}

#Shokay Buries the Hatchet
country_event = {
	id = turkestan_republic_events.131
	title = turkestan_republic_events.131.t
	desc = turkestan_republic_events.131.d
	picture = GFX_report_event_pipe_guy

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.131 option turkestan_republic_events.131.a"
		name = turkestan_republic_events.131.a
		add_popularity = {
			ideology = social_liberal popularity = 0.03
		}
		add_stability = -0.03
		custom_effect_tooltip = CA_tt_panturk_coord_increased_double
		CA_increase_pan_turk_coordination = yes
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.131 option turkestan_republic_events.131.b"
		name = turkestan_republic_events.131.b
		custom_effect_tooltip = CA_tt_panturk_coord_increased
	}
	after = {
		CA_increase_pan_turk_coordination = yes
		hidden_effect = {
			country_event = { id = turkestan_republic_events.114 days = 7 }
		}
	}
}

#Turkestan Invites Us to Pishpek
country_event = {
	id = turkestan_republic_events.108
	title = turkestan_republic_events.108.t
	desc = turkestan_republic_events.108.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.108 option turkestan_republic_events.108.a"
		name = turkestan_republic_events.108.a
		add_stability = -0.03
		CA_increase_pan_turk_coordination = yes
		custom_effect_tooltip = CA_tt_panturk_coord_increased
		set_country_flag = KHI_jk_to_pishpek
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.108 option turkestan_republic_events.108.b"
		name = turkestan_republic_events.108.b
		add_stability = 0.01
	}
	after = {
		hidden_effect = {
			country_event = { id = turkestan_republic_events.109 days = 10 }
		}
	}
}

#The Pishpek Conference
country_event = {
	id = turkestan_republic_events.109
	title = turkestan_republic_events.109.t
	desc = {
		trigger = {
			tag = TRK
			KHI = { has_country_flag = KHI_jk_to_pishpek }
		}
		text = turkestan_republic_events.109.d.trkjk
	}
	desc = {
		trigger = {
			tag = TRK
			KHI = { NOT = { has_country_flag = KHI_jk_to_pishpek } }
		}
		text = turkestan_republic_events.109.d.trknojk
	}
	desc = {
		trigger = {
			tag = KHI
			has_country_flag = KHI_jk_to_pishpek
		}
		text = turkestan_republic_events.109.d.khijk
	}
	desc = {
		trigger = {
			tag = KHI
			NOT = { has_country_flag = KHI_jk_to_pishpek }
		}
		text = turkestan_republic_events.109.d.khinojk
	}
	picture = GFX_report_event_tashkent_banquet

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.109 option turkestan_republic_events.109.a"
		name = turkestan_republic_events.109.a
		trigger = { has_country_flag = KHI_jk_to_pishpek }
		add_political_power = -75
		CA_increase_pan_turk_coordination = yes
		CA_increase_pan_turk_coordination = yes
		custom_effect_tooltip = CA_tt_panturk_coord_increased_double
		CA_check_pan_turk_coordination = yes
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.109 option turkestan_republic_events.109.b"
		name = turkestan_republic_events.109.b
		trigger = { NOT = { has_country_flag = KHI_jk_to_pishpek } }
		add_political_power = -75
		CA_increase_pan_turk_coordination = yes
		CA_increase_pan_turk_coordination = yes
		custom_effect_tooltip = CA_tt_panturk_coord_increased_double
		CA_check_pan_turk_coordination = yes
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.109 option turkestan_republic_events.109.c"
		name = turkestan_republic_events.109.c
		add_political_power = -35
		CA_increase_pan_turk_coordination = yes
		custom_effect_tooltip = CA_tt_panturk_coord_increased
		CA_check_pan_turk_coordination = yes
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.109 option turkestan_republic_events.109.e"
		name = turkestan_republic_events.109.e
		add_political_power = 5
	}
	after = {
		add_ideas = central_asia_member_of_the_pishpek_pact_0
		custom_effect_tooltip = CA_tt_panturk_idea
	}
}

#Our Frontman in the Alash Autonomy
country_event = {
	id = turkestan_republic_events.110
	title = turkestan_republic_events.110.t
	desc = turkestan_republic_events.110.d
	picture = GFX_report_event_basmachi_squad
	trigger = {
		NOT = { has_global_flag = CA_russia_war_started }
	}

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.110 option turkestan_republic_events.110.a"
		name = turkestan_republic_events.110.a
		CA_increase_pan_turk_coordination = yes
		custom_effect_tooltip = CA_tt_panturk_coord_increased
		CA_check_pan_turk_coordination = yes
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.110 option turkestan_republic_events.110.b"
		name = turkestan_republic_events.110.b
		add_to_variable = {
			TRK_prep = 5
			tooltip = CA_prep_tooltip
		}
	}
}

#Focusing the National Security Department
country_event = {
	id = turkestan_republic_events.111
	title = turkestan_republic_events.111.t
	desc = turkestan_republic_events.111.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.111 option turkestan_republic_events.111.a"
		name = turkestan_republic_events.111.a
		CA_increase_pan_turk_coordination = yes
		custom_effect_tooltip = CA_tt_panturk_coord_increased
		CA_check_pan_turk_coordination = yes
		custom_effect_tooltip = tooltip_white_line
		custom_effect_tooltip = TRK_tt_cancelling_RUS_alash_prep
		RUS = { set_country_flag = TRK_cancel_RUS_CA_alash_prep }
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.111 option turkestan_republic_events.111.b"
		name = turkestan_republic_events.111.b
		add_stability = 0.03
		custom_effect_tooltip = TRK_tt_cancelling_RUS_mil_prep
		set_country_flag = TRK_cancel_RUS_CA_military_prep
	}
}

#Where do Russians Fit in a Pan-Turk World?
country_event = {
	id = turkestan_republic_events.112
	title = turkestan_republic_events.112.t
	desc = turkestan_republic_events.112.d
	picture = GFX_report_event_kokand_cathedral

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.112 option turkestan_republic_events.112.a"
		name = turkestan_republic_events.112.a
		add_political_power = -50
		CA_increase_pan_turk_coordination = yes
		custom_effect_tooltip = CA_tt_panturk_coord_increased
		CA_check_pan_turk_coordination = yes
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.112 option turkestan_republic_events.112.b"
		name = turkestan_republic_events.112.b
		add_stability = 0.01
	}
}

#The Pishpek Pact Grows Stronger!
country_event = {
	id = turkestan_republic_events.113
	title = turkestan_republic_events.113.t
	desc = turkestan_republic_events.113.d
	picture = GFX_report_bukhara_platoon

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.113 option turkestan_republic_events.113.a"
		name = turkestan_republic_events.113.a
		if = {
			limit = {
				has_idea = central_asia_member_of_the_pishpek_pact_0
			}
			swap_ideas = {
				remove_idea = central_asia_member_of_the_pishpek_pact_0
				add_idea = central_asia_member_of_the_pishpek_pact_1
			}
		}
		else_if = {
			limit = {
				has_idea = central_asia_member_of_the_pishpek_pact_1
			}
			swap_ideas = {
				remove_idea = central_asia_member_of_the_pishpek_pact_1
				add_idea = central_asia_member_of_the_pishpek_pact_2
			}
		}
		else_if = {
			limit = {
				has_idea = central_asia_member_of_the_pishpek_pact_2
			}
			swap_ideas = {
				remove_idea = central_asia_member_of_the_pishpek_pact_2
				add_idea = central_asia_member_of_the_pishpek_pact_3
			}
		}
	}
}

#The Cover
country_event = {
	id = turkestan_republic_events.114
	title = turkestan_republic_events.114.t
	desc = turkestan_republic_events.114.d
	picture = GFX_report_event_tashkent_teahouses

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.114 option turkestan_republic_events.114.a"
		name = turkestan_republic_events.114.a
		hidden_effect = {
			country_event = { id = turkestan_republic_events.109 }
		}
	}
}

#Local Squabble
country_event = {
	id = turkestan_republic_events.115
	title = turkestan_republic_events.115.t
	desc = turkestan_republic_events.115.d
	picture = GFX_report_event_sullen_basmachi

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Intervene on behalf of the Beg.
		log = "[GetLogInfo]: event turkestan_republic_events.115 option turkestan_republic_events.115.a"
		name = turkestan_republic_events.115.a
		add_stability = 0.01
		add_manpower = -200
	}
	option = { #Allow the Kurbashi free rein.
		log = "[GetLogInfo]: event turkestan_republic_events.115 option turkestan_republic_events.115.b"
		name = turkestan_republic_events.115.b
		add_war_support = 0.03
		add_stability = -0.03
	}
}

### Fired from TRK Annexing KHI ###

country_event = { #TRK Event Upon Winning Against Khiva
	id = turkestan_republic_events.700
	title = turkestan_republic_events.700.t
	desc = turkestan_republic_events.700.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_tashkent_rally

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.700 option turkestan_republic_events.700.a"
		name = turkestan_republic_events.700.a #We must respect the democratic process!
		custom_effect_tooltip = TRK_tt_sc_faction_wins
		hidden_effect = {
			set_politics = {
				ruling_party = social_conservative
				elections_allowed = yes
			}
			mark_focus_tree_layout_dirty = yes
			TRK_madamin_bek = {
				add_country_leader_role = {
					country_leader = {
						desc = TRK_madamin_bek_leader_desc
						ideology = social_conservative_subtype
						traits = { TRK_amir_ul_musliman }
					}
					promote_leader = yes
				}
			}
			activate_advisor = TRK_alihan_tura_sic

			set_temp_variable = { TRK_new_authdem = TRK.party_popularity_100@authoritarian_democrat }
			divide_temp_variable = { TRK_new_authdem = 2 }

			set_temp_variable = { TRK_new_soccon = TRK.party_popularity_100@social_conservative }
			add_to_temp_variable = { TRK_new_soccon = TRK_new_authdem }

			set_temp_variable = { sum = 100 }
			subtract_from_temp_variable = { sum = party_popularity_100@totalist }
			subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
			subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
			subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
			subtract_from_temp_variable = { sum = party_popularity_100@social_liberal }
			subtract_from_temp_variable = { sum = party_popularity_100@market_liberal }
			subtract_from_temp_variable = { sum = TRK_new_soccon }
			subtract_from_temp_variable = { sum = TRK_new_authdem }
			subtract_from_temp_variable = { sum = TRK.party_popularity_100@paternal_autocrat }
			subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

			add_to_temp_variable = { TRK_new_soccon = sum } #avoid rounding errors

			set_popularities = {
				totalist = party_popularity_100@totalist
				syndicalist = party_popularity_100@syndicalist
				radical_socialist = party_popularity_100@radical_socialist
				social_democrat = party_popularity_100@social_democrat
				social_liberal = party_popularity_100@social_liberal
				market_liberal = party_popularity_100@market_liberal
				social_conservative = TRK_new_soccon
				authoritarian_democrat = TRK_new_authdem
				paternal_autocrat = TRK.party_popularity_100@paternal_autocrat
				national_populist = party_popularity_100@national_populist
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.700 option turkestan_republic_events.700.b"
		name = turkestan_republic_events.700.b #We cannot hold elections until stability is returned
		custom_effect_tooltip = TRK_tt_pa_faction_wins
		hidden_effect = {
			set_politics = {
				ruling_party = paternal_autocrat
				elections_allowed = no
			}
			mark_focus_tree_layout_dirty = yes
			TRK_madamin_bek = {
				add_country_leader_role = {
					country_leader = {
						desc = TRK_madamin_bek_leader_desc
						ideology = paternal_autocrat_subtype
						traits = { TRK_amir_ul_musliman }
					}
					promote_leader = yes
				}
			}

			set_temp_variable = { TRK_new_authdem = TRK.party_popularity_100@authoritarian_democrat }
			divide_temp_variable = { TRK_new_authdem = 2 }

			set_temp_variable = { TRK_new_pataut = TRK.party_popularity_100@paternal_autocrat }
			add_to_temp_variable = { TRK_new_pataut = TRK_new_authdem }

			set_temp_variable = { sum = 100 }
			subtract_from_temp_variable = { sum = party_popularity_100@totalist }
			subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
			subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
			subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
			subtract_from_temp_variable = { sum = party_popularity_100@social_liberal }
			subtract_from_temp_variable = { sum = party_popularity_100@market_liberal }
			subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
			subtract_from_temp_variable = { sum = TRK_new_authdem }
			subtract_from_temp_variable = { sum = TRK_new_pataut }
			subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

			add_to_temp_variable = { TRK_new_pataut = sum } #avoid rounding errors

			set_popularities = {
				totalist = party_popularity_100@totalist
				syndicalist = party_popularity_100@syndicalist
				radical_socialist = party_popularity_100@radical_socialist
				social_democrat = party_popularity_100@social_democrat
				social_liberal = party_popularity_100@social_liberal
				market_liberal = party_popularity_100@market_liberal
				social_conservative = party_popularity_100@social_conservative
				authoritarian_democrat = TRK_new_authdem
				paternal_autocrat = TRK_new_pataut
				national_populist = party_popularity_100@national_populist
			}
		}
	}
	after = {
		set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
		add_to_coalition = yes
		add_ideas = central_asia_banditry_and_dissent_1
		custom_effect_tooltip = tooltip_white_line
		if = {
			limit = { has_idea = TRK_wartime_rationing }
			remove_ideas = TRK_wartime_rationing
		}
		if = {
			limit = { has_idea = TRK_fighting_for_our_faith_1 }
			remove_ideas = TRK_fighting_for_our_faith_1
		}
		if = {
			limit = { has_idea = TRK_fighting_for_our_faith_2 }
			remove_ideas = TRK_fighting_for_our_faith_2
		}
		if = {
			limit = { has_idea = TRK_fighting_for_our_faith_3 }
			remove_ideas = TRK_fighting_for_our_faith_3
		}
		if = {
			limit = { has_idea = TRK_wartime_government }
			remove_ideas = TRK_wartime_government
		}
		if = {
			limit = { has_idea = TRK_redoubling_our_defence }
			remove_ideas = TRK_redoubling_our_defence
		}
		set_country_flag = CA_internal_struggles_concluded
		clr_country_flag = TRK_central_asia_conflict_active
		hidden_effect = {
			### Is there an easier way to do this? Carry over current ruler traits when adding new role?
			if = {
				limit = { has_country_flag = TRK_amir_2_flag }
				swap_ruler_traits = {
					remove = TRK_amir_ul_musliman
					add = TRK_amir_ul_musliman_2
				}
			}
			if = {
				limit = { has_completed_focus = TRK_walking_the_turkestan_tightrope }
				add_country_leader_trait = TRK_pragmatic_mediator
			}
			country_event = { id = turkestan_republic_events.710 days = 25 }
		}
	}
}

#Unification with the Kazakhs?
country_event = {
	id = turkestan_republic_events.710
	title = turkestan_republic_events.710.t
	desc = turkestan_republic_events.710.d
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		KAZ = {
			exists = yes
			is_subject = no
		}
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.710 option turkestan_republic_events.710.a"
		name = turkestan_republic_events.710.a
		ai_chance = {
			base = 30
			modifier = {
				factor = 2
				check_variable = { TRK_pan_turk_coord > 5 }
			}
			modifier = {
				factor = 3
				check_variable = { TRK_pan_turk_coord > 9 }
			}
			modifier = {
				factor = 2
				check_variable = { TRK_democraticness > 2 }
			}
		}
		add_political_power = -50
		KAZ = { country_event = turkestan_republic_events.714 }
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.710 option turkestan_republic_events.710.b"
		name = turkestan_republic_events.710.b
		ai_chance = { base = 40 }
		add_political_power = -25
		KAZ = { country_event = turkestan_republic_events.711 }
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.710 option turkestan_republic_events.710.c"
		name = turkestan_republic_events.710.c
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { TRK_pan_turk_coord > 5 }
			}
		}
		add_stability = -0.15
		activate_targeted_decision = { target = KAZ decision = CA_attack }
	}
}

#Turkestan Proposes an Alliance
country_event = {
	id = turkestan_republic_events.711
	title = turkestan_republic_events.711.t
	desc = turkestan_republic_events.711.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.711 option turkestan_republic_events.711.a"
		name = turkestan_republic_events.711.a
		ai_chance = { base = 70 }
		TRK = { country_event = turkestan_republic_events.712 }
		effect_tooltip = {
			create_faction = pan_turkic_pact
			add_to_faction = TRK
		}
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.711 option turkestan_republic_events.711.b"
		name = turkestan_republic_events.711.b
		ai_chance = {
			base = 30
			modifier = {
				factor = 0.75
				TRK = {
					check_variable = { TRK_pan_turk_coord > 5 }
				}
			}
			modifier = {
				factor = 0.5
				TRK = {
					check_variable = { TRK_pan_turk_coord > 9 }
				}
			}
			modifier = {
				factor = 0.75
				TRK = {
					check_variable = { TRK_kazakh_strength > 2 }
				}
			}
			modifier = {
				factor = 0.5
				TRK = {
					check_variable = { TRK_kazakh_strength > 5 }
				}
			}
			modifier = {
				factor = 0
				TRK = {
					check_variable = { TRK_kazakh_strength > 8 }
				}
			}
		}
		TRK = { country_event = turkestan_republic_events.713 }
		KAZ_mustafa_shokay = {
			set_nationality = TRK
		}
		activate_advisor = KAZ_bazarbay_mametuly_sic
	}
}

#The Kazakhs Accept Our Invitation
country_event = {
	id = turkestan_republic_events.712
	title = turkestan_republic_events.712.t
	desc = turkestan_republic_events.712.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.712 option turkestan_republic_events.712.a"
		name = turkestan_republic_events.712.a
		create_faction = pan_turkic_pact
		add_to_faction = KAZ
	}
}

#The Kazakhs Reject Our Invitation
country_event = {
	id = turkestan_republic_events.713
	title = turkestan_republic_events.713.t
	desc = turkestan_republic_events.713.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.713 option turkestan_republic_events.713.a"
		name = turkestan_republic_events.713.a
		activate_targeted_decision = { target = KAZ decision = CA_attack }
	}
}

#Turkestan Requests Unification
country_event = {
	id = turkestan_republic_events.714
	title = turkestan_republic_events.714.t
	desc = turkestan_republic_events.714.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.714 option turkestan_republic_events.714.a"
		name = turkestan_republic_events.714.a
		ai_chance = {
			base = 20
			modifier = {
				factor = 1.25
				TRK = {
					check_variable = { TRK_pan_turk_coord > 5 }
				}
			}
			modifier = {
				factor = 1.5
				TRK = {
					check_variable = { TRK_pan_turk_coord > 9 }
				}
			}
			modifier = {
				factor = 1.25
				TRK = {
					check_variable = { TRK_kazakh_strength > 2 }
				}
			}
			modifier = {
				factor = 1.5
				TRK = {
					check_variable = { TRK_kazakh_strength > 5 }
				}
			}
			modifier = {
				factor = 3
				TRK = {
					check_variable = { TRK_kazakh_strength > 8 }
				}
			}
		}
		TRK = { country_event = turkestan_republic_events.715 }
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.714 option turkestan_republic_events.714.b"
		name = turkestan_republic_events.714.b
		ai_chance = { base = 20 }
		TRK = { country_event = turkestan_republic_events.717 }
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.714 option turkestan_republic_events.714.c"
		name = turkestan_republic_events.714.c
		ai_chance = {
			base = 20
			modifier = {
				factor = 0.75
				TRK = {
					check_variable = { TRK_pan_turk_coord > 5 }
				}
			}
			modifier = {
				factor = 0.5
				TRK = {
					check_variable = { TRK_pan_turk_coord > 9 }
				}
			}
			modifier = {
				factor = 0.75
				TRK = {
					check_variable = { TRK_kazakh_strength > 2 }
				}
			}
			modifier = {
				factor = 0.5
				TRK = {
					check_variable = { TRK_kazakh_strength > 5 }
				}
			}
			modifier = {
				factor = 0
				TRK = {
					check_variable = { TRK_kazakh_strength > 8 }
				}
			}
		}
		TRK = { country_event = turkestan_republic_events.716 }
		KAZ_mustafa_shokay = {
			set_nationality = TRK
		}
		activate_advisor = KAZ_bazarbay_mametuly_sic
		activate_targeted_decision = { target = TRK decision = CA_attack }
	}
}

#The Kazakhs Accept Our Invitation
country_event = {
	id = turkestan_republic_events.715
	title = turkestan_republic_events.715.t
	desc = turkestan_republic_events.715.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.715 option turkestan_republic_events.715.a"
		name = turkestan_republic_events.715.a
		hidden_effect = {
			KAZ = {
				KAZ_mustafa_shokay = {
					set_nationality = TRK
				}
				KAZ_mirzhakyp_dulatuly = {
					set_nationality = TRK
				}
				KAZ_sadyk_amanzholov = {
					set_nationality = TRK
				}
				KAZ_bazarbay_mametuly = {
					set_nationality = TRK
				}
				KAZ_smagul_saduakasov = {
					set_nationality = TRK
				}
				KAZ_akhmet_baitursynuly = {
					set_nationality = TRK
				}
				KAZ_khalel_dosmukhameduly = {
					set_nationality = TRK
				}
			}
		}
		if = {
			limit = { KAZ = { is_ai = no } }
			TRK = { change_tag_from = KAZ }
		}
		annex_country = {
			target = KAZ
			transfer_troops = yes
		}
		every_state = {
			limit = {
				is_alash = yes
			}
			add_compliance = 50
		}
		581 = { #Uralsk
			add_claim_of_ROOT = yes
			enable_state_integration_80_compliance = yes
		}
		583 = { #Petropavlovsk
			add_claim_of_ROOT = yes
			enable_state_integration_80_compliance = yes
		}
		588 = { #Pavlodar
			add_claim_of_ROOT = yes
			enable_state_integration_80_compliance = yes
		}
		654 = { #Ulala
			add_claim_of_ROOT = yes
			enable_state_integration_80_compliance = yes
		}
		617 = { #Dihua
			add_claim_of_ROOT = yes
			enable_state_integration_80_compliance = yes
		}
		619 = { #Dzungaria
			add_claim_of_ROOT = yes
			enable_state_integration_80_compliance = yes
		}
	}
}

#The Kazakhs Reject Our Invitation
country_event = {
	id = turkestan_republic_events.716
	title = turkestan_republic_events.716.t
	desc = turkestan_republic_events.716.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.716 option turkestan_republic_events.716.a"
		name = turkestan_republic_events.716.a
		activate_targeted_decision = { target = KAZ decision = CA_attack }
	}
}

#The Kazakhs Counter with an Alliance
country_event = {
	id = turkestan_republic_events.717
	title = turkestan_republic_events.717.t
	desc = turkestan_republic_events.717.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.717 option turkestan_republic_events.717.a"
		name = turkestan_republic_events.717.a
		ai_chance = { base = 70 }
		create_faction = pan_turkic_pact
		add_to_faction = KAZ
		KAZ = { country_event = turkestan_republic_events.718 }
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.717 option turkestan_republic_events.717.b"
		name = turkestan_republic_events.717.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { TRK_pan_turk_coord > 5 }
			}
		}
		KAZ = { country_event = turkestan_republic_events.719 }
		activate_targeted_decision = { target = KAZ decision = CA_attack }
	}
}

#The Turkestanis Accept our Counter
country_event = {
	id = turkestan_republic_events.718
	title = turkestan_republic_events.718.t
	desc = turkestan_republic_events.718.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.718 option turkestan_republic_events.718.a"
		name = turkestan_republic_events.718.a
		effect_tooltip = {
			create_faction = pan_turkic_pact
			add_to_faction = TRK
		}
		KAZ_mustafa_shokay = {
			set_nationality = TRK
		}
		activate_advisor = KAZ_bazarbay_mametuly_sic
	}
}

#The Turkestanis Reject our Counter
country_event = {
	id = turkestan_republic_events.719
	title = turkestan_republic_events.719.t
	desc = turkestan_republic_events.719.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.719 option turkestan_republic_events.719.a"
		name = turkestan_republic_events.719.a
		activate_targeted_decision = { target = TRK decision = CA_attack }
		KAZ_mustafa_shokay = {
			set_nationality = TRK
		}
		activate_advisor = KAZ_bazarbay_mametuly_sic
	}
}

### Fired by Focus ###

#Dealing with the Kyrgyz Tribes
country_event = {
	id = turkestan_republic_events.1005
	title = turkestan_republic_events.1005.t
	desc = turkestan_republic_events.1005.d
	picture = GFX_report_event_basmachi_squad

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1005 option turkestan_republic_events.1005.a"
		name = turkestan_republic_events.1005.a
		add_popularity = {
			ideology = national_populist popularity = 0.03
		}
		586 = { #
			create_unit = {
				division = "division_template = \"Kurshirmat's Riders\" start_experience_factor = 0.1"
				prioritize_location = 12511
				owner = TRK
			}
		}
		custom_effect_tooltip = TRK_tt_ksm_strong
		hidden_effect = {
			add_to_variable = {
				TRK_ksm_strength = 1
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1005 option turkestan_republic_events.1005.b"
		name = turkestan_republic_events.1005.b
		add_stability = -0.03
		custom_override_tooltip = {
			tooltip = {
				localization_key = tooltip_create_division_template
				NAME = "Kyrgyz Riders"
				LINE_1 = { localization_key = line_battalion_tt NAME = cavalry ICON = GFX_unit_cavalry_icon_small COUNT = 4 }
			}
			if = {
				limit = { has_template = "Kyrgyz Riders" }
				delete_unit_template_and_units = { division_template = "Kyrgyz Riders" disband = yes } #no cheating
			}
			division_template = {
				name = "Kyrgyz Riders"
				division_names_group = CA_CAV_01
				regiments = {
					cavalry = { x = 0 y = 0 }
					cavalry = { x = 0 y = 1 }
					cavalry = { x = 0 y = 2 }
					cavalry = { x = 0 y = 3 }
				}
			}
		}
		586 = { #Kokand
			custom_override_tooltip = {
				tooltip = {
					localization_key = tooltip_spawn_unit
					TYPE = "Kyrgyz Riders"
				}
				create_unit = {
					division = "division_template = \"Kyrgyz Riders\" start_experience_factor = 0.1"
					prioritize_location = 12511
					owner = ROOT
				}
			}
		}
		TRK_kurshirmat = {
			add_timed_unit_leader_trait = {
				trait = disgruntled
				days = 75
			}
		}
		custom_effect_tooltip = TRK_tt_ksm_angry
		hidden_effect = {
			add_to_variable = {
				TRK_ksm_anger = 1
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1005 option turkestan_republic_events.1005.c"
		name = turkestan_republic_events.1005.c
		add_stability = 0.05
		TRK_kurshirmat = {
			add_timed_unit_leader_trait = {
				trait = disgruntled
				days = 75
			}
		}
		custom_effect_tooltip = TRK_tt_ksm_angry
		hidden_effect = {
			add_to_variable = {
				TRK_ksm_anger = 1
			}
		}

	}
}

#Local Jadids Seek Protection
country_event = {
	id = turkestan_republic_events.1006
	title = turkestan_republic_events.1006.t
	desc = turkestan_republic_events.1006.d
	picture = GFX_report_event_trial_or_meeting

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1006 option turkestan_republic_events.1006.a"
		name = turkestan_republic_events.1006.a
		trigger = {
			TRK_alihan_tura = { is_political_advisor = yes }
		}
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = TRK_abdulla_qodiriy_advisor
		custom_effect_tooltip = tooltip_white_line
		add_popularity = {
			ideology = social_conservative popularity = 0.04
		}
		add_stability = 0.06
		add_war_support = 0.06
		custom_effect_tooltip = TRK_tore_advisor_is_helpful_tooltip
		hidden_effect = {
			set_country_flag = trk_protect_jadids
		}
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1006 option turkestan_republic_events.1006.b"
		name = turkestan_republic_events.1006.b
		trigger = {
			TRK_eshon_babakhan = { is_political_advisor = yes }
		}
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = TRK_abdulla_qodiriy_advisor
		custom_effect_tooltip = tooltip_white_line
		add_popularity = {
			ideology = authoritarian_democrat popularity = 0.02
		}
		add_stability = 0.06
		add_war_support = 0.03
		custom_effect_tooltip = TRK_babakhan_advisor_is_helpful_tooltip
		hidden_effect = {
			set_country_flag = trk_protect_jadids
		}
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1006 option turkestan_republic_events.1006.c"
		name = turkestan_republic_events.1006.c
		trigger = {
			TRK_eshon_babakhan = { is_political_advisor = no }
			TRK_alihan_tura = { is_political_advisor = no }
		}
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = TRK_abdulla_qodiriy_advisor
		custom_effect_tooltip = tooltip_white_line
		add_popularity = {
			ideology = social_liberal popularity = 0.03
		}
		add_stability = 0.02
		add_war_support = 0.02
		custom_effect_tooltip = TRK_jadid_advisor_helpful_tooltip
		hidden_effect = {
			set_country_flag = trk_protect_jadids
		}
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1006 option turkestan_republic_events.1006.e"
		name = turkestan_republic_events.1006.e
		add_popularity = {
			ideology = paternal_autocrat popularity = 0.02
		}
		add_stability = -0.03
		add_war_support = 0.06
	}
}

#Rise of the Novokyrghyz
country_event = {
	id = turkestan_republic_events.1008
	title = turkestan_republic_events.1008.t
	desc = turkestan_republic_events.1008.d
	picture = GFX_report_event_basmachi_horsemen

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1008 option turkestan_republic_events.1008.a"
		name = turkestan_republic_events.1008.a
		add_political_power = -30
		swap_ideas = {
			remove_idea = TRK_turkestani_horsemen_0
			add_idea = TRK_turkestani_horsemen_1
		}
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1008 option turkestan_republic_events.1008.b"
		name = turkestan_republic_events.1008.b

	}
}

#Reaping the Black Gold
country_event = {
	id = turkestan_republic_events.1011
	title = turkestan_republic_events.1011.t
	desc = turkestan_republic_events.1011.d
	picture = GFX_report_event_unveiling_monument

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1011 option turkestan_republic_events.1011.a"
		name = turkestan_republic_events.1011.a
		add_political_power = 25
		586 = {
			add_resource = {
				type = oil
				amount = 4
			}
		}
		set_temp_variable = { TRK_black_monday_consumer_goods_change = -0.1 }
		set_temp_variable = { TRK_black_monday_factory_output_change = 0.05 }
		TRK_reduce_black_monday = yes
	}
}

#Meeting with the Tashkent City Fathers
country_event = {
	id = turkestan_republic_events.1012
	title = turkestan_republic_events.1012.t
	desc = turkestan_republic_events.1012.d
	picture = GFX_report_event_kokand_bankers

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1012 option turkestan_republic_events.1012.a"
		name = turkestan_republic_events.1012.a
		trigger = {
			TRK_nikolay_mallitsky = { is_political_advisor = yes }
		}
		add_offsite_building = {
			type = industrial_complex
			level = 1
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.02
		}
		add_political_power = 30
		custom_effect_tooltip = TRK_mallitsky_advisor_is_helpful_tooltip
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1012 option turkestan_republic_events.1012.b"
		name = turkestan_republic_events.1012.b
		trigger = {
			TRK_mikhail_gavrilov = { is_political_advisor = yes }
		}
		add_offsite_building = {
			type = industrial_complex
			level = 1
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.03
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.03
		}
		add_stability = -0.03
		custom_effect_tooltip = TRK_gavrilov_advisor_is_helpful_tooltip
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1012 option turkestan_republic_events.1012.c"
		name = turkestan_republic_events.1012.c
		trigger = {
			TRK_nikolay_mallitsky = { is_political_advisor = no }
			TRK_mikhail_gavrilov = { is_political_advisor = no }
		}
		add_stability = 0.05
		custom_effect_tooltip = TRK_tashkent_advisor_helpful_tooltip
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1012 option turkestan_republic_events.1012.e"
		name = turkestan_republic_events.1012.e
		add_offsite_building = {
			type = industrial_complex
			level = 1
		}
		add_popularity = {
			ideology = social_democrat
			popularity = -0.03
		}
		add_popularity = {
			ideology = market_liberal
			popularity = -0.03
		}
		add_stability = -0.05
		add_timed_idea = {
			idea = TRK_delayed_elections
			days = 125
		}
	}
}

#Negotiating with the Russian Peasantry
country_event = {
	id = turkestan_republic_events.1013
	title = turkestan_republic_events.1013.t
	desc = turkestan_republic_events.1013.d
	picture = GFX_report_event_holding_court

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1013 option turkestan_republic_events.1013.a"
		name = turkestan_republic_events.1013.a
		trigger = {
			TRK_konstantin_monstrov = { is_political_advisor = yes }
			TRK_konstantin_osipov = { is_political_advisor = yes }
		}
		add_stability = -0.05
		custom_effect_tooltip = tooltip_white_line
		TRK_create_fergana_peasant_army = yes
		custom_effect_tooltip = tooltip_white_line
		TRK_create_taskhent_garrison = yes
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1013 option turkestan_republic_events.1013.b"
		name = turkestan_republic_events.1013.b
		trigger = {
			TRK_konstantin_monstrov = { is_political_advisor = yes }
			TRK_konstantin_osipov = { is_political_advisor = no }
		}
		add_stability = -0.03
		custom_effect_tooltip = tooltip_white_line
		TRK_create_fergana_peasant_army = yes
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1013 option turkestan_republic_events.1013.c"
		name = turkestan_republic_events.1013.c
		trigger = {
			TRK_konstantin_osipov = { is_political_advisor = yes }
			TRK_konstantin_monstrov = { is_political_advisor = no }
		}
		add_stability = -0.03
		custom_effect_tooltip = tooltip_white_line
		TRK_create_taskhent_garrison = yes
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1013 option turkestan_republic_events.1013.e"
		name = turkestan_republic_events.1013.e
		trigger = {
			TRK_konstantin_monstrov = { is_political_advisor = no }
			TRK_konstantin_osipov = { is_political_advisor = no }
		}
		add_stability = -0.03
		add_manpower = 1000
		custom_effect_tooltip = TRK_peasant_advisor_helpful_tooltip
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1013 option turkestan_republic_events.1013.f"
		name = turkestan_republic_events.1013.f
		add_stability = 0.03
	}
}

#The Andijan Summit
country_event = {
	id = turkestan_republic_events.1014
	title = turkestan_republic_events.1014.t
	desc = turkestan_republic_events.1014.d
	picture = GFX_report_event_tribal_khans
	fire_only_once = yes
	is_triggered_only = yes
	trigger = { NOT = { has_global_flag = CA_russia_war_started } }

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1014 option turkestan_republic_events.1014.a"
		name = turkestan_republic_events.1014.a
		add_to_variable = {
			TRK_prep = 3
			tooltip = CA_prep_tooltip
		}
		add_popularity = {
			ideology = national_populist
			popularity = 0.05
		}
		custom_effect_tooltip = TRK_tt_ksm_strong
		hidden_effect = {
			add_to_variable = {
				TRK_ksm_strength = 1
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1014 option turkestan_republic_events.1014.b"
		name = turkestan_republic_events.1014.b
		add_to_variable = {
			TRK_prep = 7
			tooltip = CA_prep_tooltip
		}
		add_timed_idea = {
			idea = TRK_aftermath_of_andijan
			days = 50
		}
		TRK_kurshirmat = {
			add_timed_unit_leader_trait = {
				trait = disgruntled
				days = 50
			}
		}
		custom_effect_tooltip = TRK_tt_ksm_angry
		hidden_effect = {
			add_to_variable = {
				TRK_ksm_anger = 1
			}
		}
	}
}

#Choosing a Commander
country_event = {
	id = turkestan_republic_events.1015
	title = turkestan_republic_events.1015.t
	desc = turkestan_republic_events.1015.d
	picture = GFX_report_event_basmachi_riders

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Madamin
		log = "[GetLogInfo]: event turkestan_republic_events.1015 option turkestan_republic_events.1015.a"
		name = turkestan_republic_events.1015.a
		swap_ruler_traits = {
			remove = TRK_amir_ul_musliman
			add = TRK_amir_ul_musliman_2
		}
		set_country_flag = TRK_amir_2_flag
		TRK_kurshirmat = {
			add_timed_unit_leader_trait = {
				trait = disgruntled
				days = 50
			}
		}
		custom_effect_tooltip = TRK_tt_ksm_angry
		add_to_variable = { TRK_ksm_anger = 1 }
		custom_override_tooltip = {
			tooltip = {
				localization_key = tooltip_create_division_template
				NAME = "Presidential Guard"
				LINE_1 = { localization_key = line_battalion_tt NAME = infantry ICON = GFX_unit_infantry_icon_small COUNT = 5 }
				SUPPORT_1 = { localization_key = support_battalion_tt NAME = recon ICON = GFX_unit_recon_icon_small }
			}
			if = {
				limit = { has_template = "Presidential Guard" }
				delete_unit_template_and_units = { division_template = "Presidential Guard" disband = yes } #no cheating
			}
			division_template = {
				name = "Presidential Guard"
				division_names_group = CA_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
					infantry = { x = 1 y = 0 }
				}
				support = {
					recon = { x = 0 y = 0 }
				}
			}
		}
		407 = { #Tashkent
			custom_override_tooltip = {
				tooltip = {
					localization_key = tooltip_spawn_unit
					TYPE = "Presidential Guard"
				}
				create_unit = {
					division = "division_template = \"Presidential Guard\" start_experience_factor = 0.3"
					prioritize_location = 1459
					allow_spawning_on_enemy_provs = yes
					owner = ROOT
				}
			}
		}
	}
	option = { #Katta
		log = "[GetLogInfo]: event turkestan_republic_events.1015 option turkestan_republic_events.1015.b"
		name = turkestan_republic_events.1015.b
		custom_effect_tooltip = improves_political_advisor_tt
		effect_tooltip = {
			swap_ideas = {
				remove_idea = KR_katta_ergash_1
				add_idea = KR_katta_ergash_2
			}
		}
		hidden_effect = {
			remove_trait = {
				character = TRK_katta_ergash
				slot = second_in_command
				trait = KR_big_kurbashi_sic
			}
			add_trait = {
				character = TRK_katta_ergash
				slot = second_in_command
				trait = KR_big_kurbashi_2_sic
			}
			TRK_katta_ergash = {
				swap_country_leader_traits = {
					remove = TRK_big_kurbashi_leader
					add = TRK_big_kurbashi_2_leader
				}
			}
		}
		TRK_kurshirmat = {
			add_timed_unit_leader_trait = {
				trait = disgruntled
				days = 50
			}
		}
		custom_effect_tooltip = TRK_tt_ksm_angry
		add_to_variable = { TRK_ksm_anger = 1 }
		custom_override_tooltip = {
			tooltip = {
				localization_key = tooltip_create_division_template
				NAME = "Katta's Presidential Guard"
				LINE_1 = { localization_key = line_battalion_tt NAME = infantry ICON = GFX_unit_infantry_icon_small COUNT = 5 }
				SUPPORT_1 = { localization_key = support_battalion_tt NAME = recon ICON = GFX_unit_recon_icon_small }
			}
			if = {
				limit = { has_template = "Katta's Presidential Guard" }
				delete_unit_template_and_units = { division_template = "Katta's Presidential Guard" disband = yes } #no cheating
			}
			division_template = {
				name = "Katta's Presidential Guard"
				division_names_group = CA_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
					infantry = { x = 1 y = 0 }
				}
				support = {
					recon = { x = 0 y = 0 }
				}
			}
		}
		407 = { #Tashkent
			custom_override_tooltip = {
				tooltip = {
					localization_key = tooltip_spawn_unit
					TYPE = "Katta's Presidential Guard"
				}
				create_unit = {
					division = "division_template = \"Katta's Presidential Guard\" start_experience_factor = 0.3"
					prioritize_location = 1459
					allow_spawning_on_enemy_provs = yes
					owner = ROOT
				}
			}
		}
	}
	option = { #Kurshirmat
		log = "[GetLogInfo]: event turkestan_republic_events.1015 option turkestan_republic_events.1015.c"
		name = turkestan_republic_events.1015.c
		custom_effect_tooltip = improves_military_advisor_tt
		effect_tooltip = {
			swap_ideas = {
				remove_idea = KR_kurshirmat_1
				add_idea = KR_kurshirmat_2
			}
		}
		#hidden_effect = {
		#	remove_trait = {
		#		character = TRK_kurshirmat
		#		slot = army_chief
		#		trait = KR_army_chief_manoeuvre_1
		#	}
		#	add_trait = {
		#		character = TRK_kurshirmat
		#		slot = army_chief
		#		trait = KR_army_chief_kurbashi
		#	}
		#}
		custom_effect_tooltip = TRK_tt_ksm_strong
		add_to_variable = { TRK_ksm_strength = 1 }
		custom_override_tooltip = {
			tooltip = {
				localization_key = tooltip_create_division_template
				NAME = "Kurshirmat's Presidential Guard"
				LINE_1 = { localization_key = line_battalion_tt NAME = infantry ICON = GFX_unit_infantry_icon_small COUNT = 5 }
				SUPPORT_1 = { localization_key = support_battalion_tt NAME = recon ICON = GFX_unit_recon_icon_small }
			}
			if = {
				limit = { has_template = "Kurshirmat's Presidential Guard" }
				delete_unit_template_and_units = { division_template = "Kurshirmat's Presidential Guard" disband = yes } #no cheating
			}
			division_template = {
				name = "Kurshirmat's Presidential Guard"
				division_names_group = CA_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
					infantry = { x = 1 y = 0 }
				}
				support = {
					recon = { x = 0 y = 0 }
				}
			}
		}
		407 = { #Tashkent
			custom_override_tooltip = {
				tooltip = {
					localization_key = tooltip_spawn_unit
					TYPE = "Kurshirmat's Presidential Guard"
				}
				create_unit = {
					division = "division_template = \"Kurshirmat's Presidential Guard\" start_experience_factor = 0.3"
					prioritize_location = 1459
					allow_spawning_on_enemy_provs = yes
					owner = ROOT
				}
			}
		}
	}
	option = { #Officers
		log = "[GetLogInfo]: event turkestan_republic_events.1015 option turkestan_republic_events.1015.e"
		name = turkestan_republic_events.1015.e
		add_ideas = TRK_commander_officers
		TRK_kurshirmat = {
			add_timed_unit_leader_trait = {
				trait = disgruntled
				days = 50
			}
		}
		custom_effect_tooltip = TRK_tt_ksm_angry
		add_to_variable = { TRK_ksm_anger = 1 }
		add_to_variable = { TRK_democraticness = 1 }
		custom_override_tooltip = {
			tooltip = {
				localization_key = tooltip_create_division_template
				NAME = "Presidential Guard"
				LINE_1 = { localization_key = line_battalion_tt NAME = infantry ICON = GFX_unit_infantry_icon_small COUNT = 5 }
				SUPPORT_1 = { localization_key = support_battalion_tt NAME = recon ICON = GFX_unit_recon_icon_small }
			}
			if = {
				limit = { has_template = "Presidential Guard" }
				delete_unit_template_and_units = { division_template = "Presidential Guard" disband = yes } #no cheating
			}
			division_template = {
				name = "Presidential Guard"
				division_names_group = CA_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
					infantry = { x = 1 y = 0 }
				}
				support = {
					recon = { x = 0 y = 0 }
				}
			}
		}
		407 = { #Tashkent
			custom_override_tooltip = {
				tooltip = {
					localization_key = tooltip_spawn_unit
					TYPE = "Presidential Guard"
				}
				create_unit = {
					division = "division_template = \"Presidential Guard\" start_experience_factor = 0.3"
					prioritize_location = 1459
					allow_spawning_on_enemy_provs = yes
					owner = ROOT
				}
			}
		}
	}
}

#Conflict Among the Russians
country_event = {
	id = turkestan_republic_events.1016
	title = turkestan_republic_events.1016.t
	desc = turkestan_republic_events.1016.d
	picture = GFX_report_event_tashkent_streetcar

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1016 option turkestan_republic_events.1016.a"
		name = turkestan_republic_events.1016.a #Fresh blood could be good for the Union (favor Mallitsky - the challenger)
		set_country_flag = trk_osipov_snubbed
		add_stability = -0.01
		add_popularity = {
			ideology = market_liberal
			popularity = 0.02
		}
		custom_effect_tooltip = improves_political_advisor_tt
		effect_tooltip = {
			swap_ideas = {
				remove_idea = KR_mallitsky_1
				add_idea = KR_mallitsky_2
			}
		}
		custom_effect_tooltip = TRK_tooltip_snubbed_advisor_osipov
		hidden_effect = {
			remove_trait = {
				character = TRK_nikolay_mallitsky
				slot = political_advisor
				trait = KR_responsible_russian
			}
			add_trait = {
				character = TRK_nikolay_mallitsky
				slot = political_advisor
				trait = KR_responsible_russian_2
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1016 option turkestan_republic_events.1016.b"
		name = turkestan_republic_events.1016.b #Put an end to this farcical challenge (favor Osipov)
		set_country_flag = trk_mallitsky_snubbed
		add_stability = -0.01
		add_popularity = {
			ideology = social_democrat
			popularity = 0.02
		}
		custom_effect_tooltip = improves_political_advisor_tt
		effect_tooltip = {
			swap_ideas = {
				remove_idea = KR_osipov_1
				add_idea = KR_osipov_2
			}
		}
		custom_effect_tooltip = {
			localization_key = tooltip_disable_political_advisor
			ADVISOR = TRK_nikolay_mallitsky
		}
		hidden_effect = {
			remove_trait = {
				character = TRK_konstantin_osipov
				slot = political_advisor
				trait = KR_fickle_wunderkind
			}
			add_trait = {
				character = TRK_konstantin_osipov
				slot = political_advisor
				trait = KR_fickle_wunderkind_2
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1016 option turkestan_republic_events.1016.c"
		name = turkestan_republic_events.1016.c #keep our necks out of it
		add_stability = 0.01
		add_popularity = {
			ideology = market_liberal
			popularity = 0.01
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.01
		}
	}
}

#The Old Bear Fends Off Challengers
country_event = {
	id = turkestan_republic_events.1017
	title = turkestan_republic_events.1017.t
	desc = turkestan_republic_events.1017.d
	picture = GFX_report_event_fergana_peasant_army

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1017 option turkestan_republic_events.1017.a"
		name = turkestan_republic_events.1017.a #Put an end to this farcical challenge (favor Monstrov)
		set_country_flag = trk_gavrilov_snubbed
		add_political_power = -25
		custom_effect_tooltip = improves_political_advisor_tt
		effect_tooltip = {
			swap_ideas = {
				remove_idea = KR_monstrov_1
				add_idea = KR_monstrov_2
			}
		}
		custom_effect_tooltip = {
			localization_key = tooltip_disable_political_advisor
			ADVISOR = TRK_mikhail_gavrilov
		}
		hidden_effect = {
			remove_trait = {
				character = TRK_konstantin_monstrov
				slot = political_advisor
				trait = KR_ancient_general
			}
			add_trait = {
				character = TRK_konstantin_monstrov
				slot = political_advisor
				trait = KR_ancient_general_2
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1017 option turkestan_republic_events.1017.b"
		name = turkestan_republic_events.1017.b #Fresh blood could be good for the Association (favor Gavrilov - the challenger)
		set_country_flag = trk_monstrov_snubbed
		add_stability = -0.01
		add_popularity = {
			ideology = market_liberal
			popularity = 0.02
		}
		custom_effect_tooltip = improves_political_advisor_tt
		effect_tooltip = {
			swap_ideas = {
				remove_idea = KR_gavrilov_1
				add_idea = KR_gavrilov_2
			}
		}
		custom_effect_tooltip = {
			localization_key = tooltip_disable_political_advisor
			ADVISOR = TRK_konstantin_monstrov
		}
		hidden_effect = {
			remove_trait = {
				character = TRK_mikhail_gavrilov
				slot = political_advisor
				trait = KR_tobacco_baron
			}
			add_trait = {
				character = TRK_mikhail_gavrilov
				slot = political_advisor
				trait = KR_tobacco_baron_2
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1017 option turkestan_republic_events.1017.c"
		name = turkestan_republic_events.1017.c #keep our necks out of it
		add_stability = 0.01
	}
}

#Reformists Achieve their Goals!
country_event = {
	id = turkestan_republic_events.1018
	title = turkestan_republic_events.1018.t
	desc = turkestan_republic_events.1018.d
	picture = GFX_report_event_tashkent_debate

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1018 option turkestan_republic_events.1018.a"
		name = turkestan_republic_events.1018.a
		swap_ideas = {
			remove_idea = TRK_uneasy_alliance
			add_idea = TRK_uneasy_alliance_reformists_successful
		}
		add_to_variable = {
			TRK_democraticness = 1
		}
	}
}

#Turkestani Thermador
country_event = {
	id = turkestan_republic_events.1019
	title = turkestan_republic_events.1019.t
	desc = turkestan_republic_events.1019.d
	picture = GFX_report_event_basmachi_riders

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event turkestan_republic_events.1019 option turkestan_republic_events.1019.a"
		name = turkestan_republic_events.1019.a
		swap_ideas = {
			remove_idea = TRK_uneasy_alliance
			add_idea = TRK_uneasy_alliance_reformists_fail
		}
		set_country_flag = trk_reformists_lose_initiative
	}
}

#Tensions Flare in Old Tashkent
country_event = {
	id = turkestan_republic_events.1020
	title = turkestan_republic_events.1020.t
	desc = turkestan_republic_events.1020.d
	picture = GFX_report_event_KHI_railyard

	fire_only_once = yes

	is_triggered_only = yes

	option = { #The law is the law.
		log = "[GetLogInfo]: event turkestan_republic_events.1020 option turkestan_republic_events.1020.a"
		name = turkestan_republic_events.1020.a
		add_stability = 0.01
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.02
		}
	}
	option = { #Perhaps some leniency is in order...
		log = "[GetLogInfo]: event turkestan_republic_events.1020 option turkestan_republic_events.1020.b"
		name = turkestan_republic_events.1020.b
		add_stability = -0.01
	}
}

#Merchants Request Investment
country_event = {
	id = turkestan_republic_events.1021
	title = turkestan_republic_events.1021.t
	desc = turkestan_republic_events.1021.d
	picture = GFX_report_event_andijan_merchants

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Give them what they need.
		log = "[GetLogInfo]: event turkestan_republic_events.1021 option turkestan_republic_events.1021.a"
		name = turkestan_republic_events.1021.a
		trigger = {
			OR = {
				has_idea = TRK_syr_darya_gold_1
				has_idea = TRK_syr_darya_gold_2
				has_idea = TRK_syr_darya_gold_3
				has_idea = TRK_syr_darya_gold_4
				has_idea = TRK_syr_darya_gold_5
			}
		}
		TRK_decrease_gold = yes
		random = {
			chance = 80
			country_event = { id = turkestan_republic_events.1022 days = 75 }
		}
	}
	option = { #They ask for too much.
		log = "[GetLogInfo]: event turkestan_republic_events.1021 option turkestan_republic_events.1021.b"
		name = turkestan_republic_events.1021.b

	}
}

#Returns on our Investment
country_event = {
	id = turkestan_republic_events.1022
	title = turkestan_republic_events.1022.t
	desc = turkestan_republic_events.1022.d
	picture = GFX_report_event_lots_of_cotton

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Fantastic!
		log = "[GetLogInfo]: event turkestan_republic_events.1022 option turkestan_republic_events.1022.a"
		name = turkestan_republic_events.1022.a
		if = {
			limit = { has_idea = TRK_syr_darya_gold_5 }
			add_political_power = 75
			add_to_variable = {
				TRK_prep = 5
				tooltip = CA_prep_tooltip
			}
		}
		else = {
			add_political_power = 25
			add_to_variable = {
				TRK_prep = 5
				tooltip = CA_prep_tooltip
			}
			custom_effect_tooltip = tooltip_white_line
			TRK_increase_gold = yes
		}
	}
}

#Popular Commander Caught Smuggling
country_event = {
	id = turkestan_republic_events.1023
	title = turkestan_republic_events.1023.t
	desc = turkestan_republic_events.1023.d
	picture = GFX_report_event_sullen_basmachi

	fire_only_once = yes

	is_triggered_only = yes

	option = { #We cannot let such crimes go unpunished!
		log = "[GetLogInfo]: event turkestan_republic_events.1023 option turkestan_republic_events.1023.a"
		name = turkestan_republic_events.1023.a
		add_days_mission_timeout = {
			mission = TRK_angry_kurbashi_mission_timer
			days = 35
		}
		add_to_variable = {
			TRK_prep = 1
			tooltip = CA_prep_tooltip
		}
	}
	option = { #Now is not the time to remove talented commanders!
		log = "[GetLogInfo]: event turkestan_republic_events.1023 option turkestan_republic_events.1023.b"
		name = turkestan_republic_events.1023.b
		add_to_variable = {
			TRK_prep = -5
			tooltip = CA_prep_tooltip
		}
	}
}

#Potential Spy-Ring Unearthed
country_event = {
	id = turkestan_republic_events.1024
	title = turkestan_republic_events.1024.t
	desc = turkestan_republic_events.1024.d
	picture = GFX_report_event_kokand_bankers

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Better to be safe than sorry.
		log = "[GetLogInfo]: event turkestan_republic_events.1024 option turkestan_republic_events.1024.a"
		name = turkestan_republic_events.1024.a
		remove_ideas = TRK_rebuilding_market_connections
	}
	option = { #Sometimes businessmen are just...businessmen.
		log = "[GetLogInfo]: event turkestan_republic_events.1024 option turkestan_republic_events.1024.b"
		name = turkestan_republic_events.1024.b
		random_list = {
			60 = {
				add_to_variable = {
					TRK_prep = 1
					tooltip = CA_prep_tooltip
				}
			}
			40 = {
				add_to_variable = {
					TRK_prep = -5
					tooltip = CA_prep_tooltip
				}
				add_stability = -0.05
			}
		}
	}
}

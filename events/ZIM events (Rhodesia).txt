###########################
# Zimbabwe Events
###########################

add_namespace = rhodesia_events

### Introduction events

country_event = { #Introduction/Spawn Troops
	id = rhodesia_events.1
	title = rhodesia_events.1.t
	desc = rhodesia_events.1.d
	picture = GFX_report_event_SAF_cape_town

	is_triggered_only = yes

	option = { #Together we shall prevail!
		log = "[GetLogInfo]: event rhodesia_events.1 option rhodesia_events.1.a"
		name = rhodesia_events.1.a
		add_war_support = 0.1
		add_manpower = 25000
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 500
			producer = SAF
		}
	}
}

country_event = { #Joining the entente
	id = rhodesia_events.2
	title = rhodesia_events.2.t
	desc = rhodesia_events.2.d
	picture = GFX_report_event_SAF_cape_town

	is_triggered_only = yes

	option = { #Together we shall prevail!
		log = "[GetLogInfo]: event rhodesia_events.2 option rhodesia_events.2.a"
		name = rhodesia_events.2.a
		effect_tooltip = {
			CAN = {
				country_event = { id = natal_events.5 days = 2 }
			}
		}
	}
}

country_event = { #Expertise from the Empire
	id = rhodesia_events.3
	title = rhodesia_events.3.t
	desc = rhodesia_events.3.d
	picture = GFX_report_event_SAF_cape_town

	is_triggered_only = yes

	option = { #Economic
		log = "[GetLogInfo]: event rhodesia_events.3 option rhodesia_events.3.a"
		name = rhodesia_events.3.a
		ai_chance = { base = 34 }
		add_tech_bonus = {
			name = ZIM_invite_imperial_experts
			bonus = 1
			uses = 2
			category = industry
		}
	}

	option = { #Military
		log = "[GetLogInfo]: event rhodesia_events.3 option rhodesia_events.3.b"
		name = rhodesia_events.3.b
		ai_chance = { base = 33 }
		add_tech_bonus = {
			name = ZIM_invite_imperial_experts
			bonus = 1
			uses = 2
			category = infantry_weapons
		}
	}

	option = { #Airforce
		log = "[GetLogInfo]: event rhodesia_events.3 option rhodesia_events.3.c"
		name = rhodesia_events.3.c
		ai_chance = { base = 33 }
		add_tech_bonus = {
			name = ZIM_invite_imperial_experts
			bonus = 1
			uses = 2
			category = air_equipment
		}
	}
}

country_event = { #Expand Native Reserves
	id = rhodesia_events.4
	title = rhodesia_events.4.t
	desc = rhodesia_events.4.d
	picture = GFX_report_event_SAF_cape_town

	is_triggered_only = yes

	option = { #Just a little bit
		log = "[GetLogInfo]: event rhodesia_events.4 option rhodesia_events.4.a"
		name = rhodesia_events.4.a
		ai_chance = { base = 50 }
		ZIM_reform_segregation_1 = yes
	}

	option = { #Much
		log = "[GetLogInfo]: event rhodesia_events.4 option rhodesia_events.4.b"
		name = rhodesia_events.4.b
		ai_chance = { base = 50 }
		set_temp_variable = { ideology_change_var = -0.05 }
		change_ruling_party_popularity = yes
		ZIM_reform_segregation_2 = yes
	}

	after = {
		add_political_power = -50
		add_stability = 0.05
	}
}

# Elections
country_event = {
	id = rhodesia_events.5
	title = rhodesia_events.5.t
	desc = rhodesia_events.5.d
	picture = GFX_report_event_SAF_parliament_1

	is_triggered_only = yes

	option = { #Rhodesia Party
		log = "[GetLogInfo]: event rhodesia_events.5 option rhodesia_events.5.a"
		name = rhodesia_events.5.a
		ai_chance = { base = 30 }
		add_popularity = {
			ideology = market_liberal
			popularity = 0.2
		}
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = market_liberal
					last_election = "[CURRENT_DATE]"
					election_frequency = 60
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		hidden_effect = {
			country_event = { id = rhodesia_events.12 days = 30 }
		}
	}

	option = { #Reform Party
		log = "[GetLogInfo]: event rhodesia_events.5 option rhodesia_events.5.b"
		name = rhodesia_events.5.b
		ai_chance = { base = 50 }
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_liberal
					last_election = "[CURRENT_DATE]"
					election_frequency = 60
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		hidden_effect = {
			country_event = { id = rhodesia_events.6 days = 2 }
		}
	}

	option = { #Hung parliament
		log = "[GetLogInfo]: event rhodesia_events.5 option rhodesia_events.5.c"
		name = rhodesia_events.5.c
		ai_chance = { base = 20 }
		add_popularity = {
			ideology = social_liberal
			popularity = -0.05
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.05
		}
		hidden_effect = {
			meta_effect = {
				text = {
					set_politics = {
						ruling_party = social_liberal
						last_election = "[CURRENT_DATE]"
						election_frequency = 60
						elections_allowed = yes
					}
				}
				CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
			}
			country_event = { id = rhodesia_events.10 days = 2 }
		}
	}
}

# The minister question
country_event = {
	id = rhodesia_events.6
	title = rhodesia_events.6.t
	desc = rhodesia_events.6.d
	picture = GFX_report_event_SAF_parliament_1

	is_triggered_only = yes

	option = { #Appoint left-wing ministers
		log = "[GetLogInfo]: event rhodesia_events.6 option rhodesia_events.6.a"
		name = rhodesia_events.6.a
		ai_chance = { base = 30 }
		add_political_power = 25
	}

	option = { #Appoint right-wing ministers
		log = "[GetLogInfo]: event rhodesia_events.6 option rhodesia_events.6.b"
		name = rhodesia_events.6.b
		ai_chance = { base = 50 }
		custom_effect_tooltip = ZIM_tt_reform_becomes_authdem
		hidden_effect = {
			set_temp_variable = { SAF_moderate_to_extremist_value = party_popularity@social_liberal }
			set_temp_variable = { SAF_moderate_to_extremist_value_reverse = 0 }
			subtract_from_temp_variable = { var = SAF_moderate_to_extremist_value_reverse value = party_popularity@social_liberal }
			add_popularity = { ideology = social_liberal popularity = SAF_moderate_to_extremist_value_reverse }
			add_popularity = { ideology = authoritarian_democrat popularity = SAF_moderate_to_extremist_value }
		}
		set_politics = {
			ruling_party = authoritarian_democrat
			elections_allowed = no
		}
		hidden_effect = {
			country_event = { id = rhodesia_events.7 days = 60 }
		}
	}
}

# The left side of the Reform Party is pissed that Huggins ignored them
country_event = {
	id = rhodesia_events.7
	title = rhodesia_events.7.t
	desc = rhodesia_events.7.d
	picture = GFX_report_event_SAF_parliament_1

	is_triggered_only = yes

	option = { #This is an annoyance
		log = "[GetLogInfo]: event rhodesia_events.7 option rhodesia_events.7.a"
		name = rhodesia_events.7.a
		add_political_power = -100
		add_popularity = { ideology = social_liberal popularity = -0.05 }
		add_popularity = { ideology = social_democrat popularity = 0.05 }
		hidden_effect = {
			country_event = { id = rhodesia_events.8 days = 60 }
		}
	}
}

# Huggins forms an alliance with the Rhodesia Party, and asks the governor to dissolve parliament
country_event = {
	id = rhodesia_events.8
	title = rhodesia_events.8.t
	desc = rhodesia_events.8.d
	picture = GFX_report_event_SAF_parliament_1

	is_triggered_only = yes

	option = { #Dissolve parliament
		log = "[GetLogInfo]: event rhodesia_events.8 option rhodesia_events.8.a"
		name = rhodesia_events.8.a
		ai_chance = { base = 60 }
		custom_effect_tooltip = saf_tt_elections_in_six_weeks
		hidden_effect = {
			country_event = { id = rhodesia_events.9 days = 42 }
		}
	}

	option = { #This mandate isn't even a year old, and workable government can be attained!
		log = "[GetLogInfo]: event rhodesia_events.8 option rhodesia_events.8.b"
		name = rhodesia_events.8.b
		ai_chance = { base = 40 }
		set_party_name = {
			ideology = market_liberal
			long_name = ZIM_market_liberal_party_long_united
			name = ZIM_market_liberal_party_united
		}
		set_party_name = {
			ideology = authoritarian_democrat
			long_name = ZIM_authoritarian_democrat_party_long_united
			name = ZIM_authoritarian_democrat_party_united
		}
	}

	after = {
		set_country_flag = ZIM_can_elect_united
		custom_effect_tooltip = ZIM_tt_rhodesia_and_right_reform_become_united
		hidden_effect = {
			set_temp_variable = { SAF_moderate_to_extremist_value = party_popularity@market_liberal }
			set_temp_variable = { SAF_moderate_to_extremist_value_reverse = 0 }
			subtract_from_temp_variable = { var = SAF_moderate_to_extremist_value_reverse value = party_popularity@market_liberal }
			add_popularity = { ideology = market_liberal popularity = SAF_moderate_to_extremist_value_reverse }
			add_popularity = { ideology = authoritarian_democrat popularity = SAF_moderate_to_extremist_value }
		}
		add_popularity = { ideology = authoritarian_democrat popularity = -0.3 }
		add_popularity = { ideology = social_liberal popularity = 0.3 }
	}
}

# Early elections
country_event = {
	id = rhodesia_events.9
	title = rhodesia_events.9.t
	desc = rhodesia_events.9.d
	picture = GFX_report_event_SAF_parliament_1

	is_triggered_only = yes

	option = { #United Rhodesia Party
		log = "[GetLogInfo]: event rhodesia_events.9 option rhodesia_events.9.a"
		name = rhodesia_events.9.a
		ai_chance = { base = 90 }
		add_popularity = { ideology = authoritarian_democrat popularity = 0.1 }
		add_popularity = { ideology = social_liberal popularity = -0.1 }
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = authoritarian_democrat
					last_election = "[CURRENT_DATE]"
					election_frequency = 60
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
	}

	option = { #Labour-Reform coalition
		log = "[GetLogInfo]: event rhodesia_events.9 option rhodesia_events.9.b"
		name = rhodesia_events.9.b
		ai_chance = { base = 10 }
		add_popularity = { ideology = social_democrat popularity = 0.2 }
		add_popularity = { ideology = authoritarian_democrat popularity = -0.2 }
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_democrat
					last_election = "[CURRENT_DATE]"
					election_frequency = 60
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		set_temp_variable = { coalition_partner_var = token:social_liberal }
		add_to_coalition = yes
	}
}

# Hung parliament, Reform needs to choose who to form a coalition with
country_event = {
	id = rhodesia_events.10
	title = rhodesia_events.10.t
	desc = rhodesia_events.10.d
	picture = GFX_report_event_SAF_parliament_1

	is_triggered_only = yes

	option = { #Nangle wins out: coalition with labour
		log = "[GetLogInfo]: event rhodesia_events.10 option rhodesia_events.10.a"
		name = rhodesia_events.10.a
		ai_chance = { base = 50 }
		set_politics = {
			ruling_party = social_liberal
			elections_allowed = yes
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.25
		}
		set_temp_variable = { coalition_partner_var = token:social_democrat }
		add_to_coalition = yes
	}

	option = { #Huggins wins out: coalition with Rhodesia Party
		log = "[GetLogInfo]: event rhodesia_events.10 option rhodesia_events.10.b"
		name = rhodesia_events.10.b
		ai_chance = { base = 50 }
		set_country_flag = ZIM_can_elect_united
		custom_effect_tooltip = ZIM_tt_reform_becomes_authdem
		hidden_effect = {
			set_temp_variable = { SAF_moderate_to_extremist_value = party_popularity@social_liberal }
			set_temp_variable = { SAF_moderate_to_extremist_value_reverse = 0 }
			subtract_from_temp_variable = { var = SAF_moderate_to_extremist_value_reverse value = party_popularity@social_liberal }
			add_popularity = { ideology = social_liberal popularity = SAF_moderate_to_extremist_value_reverse }
			add_popularity = { ideology = authoritarian_democrat popularity = SAF_moderate_to_extremist_value }
		}
		set_politics = {
			ruling_party = authoritarian_democrat
			elections_allowed = yes
		}
		set_temp_variable = { coalition_partner_var = token:market_liberal }
		add_to_coalition = yes
		hidden_effect = {
			country_event = { id = rhodesia_events.11 days = 600 }
		}
	}
}

# Rhodesia_reform coalition is a happy marriage, form united Party
country_event = {
	id = rhodesia_events.11
	title = rhodesia_events.11.t
	desc = rhodesia_events.11.d
	picture = GFX_report_event_SAF_parliament_1

	is_triggered_only = yes

	option = { #Dissolve parliament
		log = "[GetLogInfo]: event rhodesia_events.11 option rhodesia_events.11.a"
		name = rhodesia_events.11.a
		custom_effect_tooltip = ZIM_tt_rhodesia_and_right_reform_become_united
		hidden_effect = {
			set_temp_variable = { SAF_moderate_to_extremist_value = party_popularity@market_liberal }
			set_temp_variable = { SAF_moderate_to_extremist_value_reverse = 0 }
			subtract_from_temp_variable = { var = SAF_moderate_to_extremist_value_reverse value = party_popularity@market_liberal }
			add_popularity = { ideology = market_liberal popularity = SAF_moderate_to_extremist_value_reverse }
			add_popularity = { ideology = authoritarian_democrat popularity = SAF_moderate_to_extremist_value }
		}
		set_party_name = {
			ideology = market_liberal
			long_name = ZIM_market_liberal_party_long_united
			name = ZIM_market_liberal_party_united
		}
		set_party_name = {
			ideology = authoritarian_democrat
			long_name = ZIM_authoritarian_democrat_party_long_united
			name = ZIM_authoritarian_democrat_party_united
		}
		end_coalition = yes
	}
}

# Election loop
country_event = {
	id = rhodesia_events.13
	title = rhodesia_events.13.t
	desc = rhodesia_events.13.d
	picture = GFX_report_event_SAF_parliament_1

	is_triggered_only = yes

	option = { #Rhodesia Party
		log = "[GetLogInfo]: event rhodesia_events.13 option rhodesia_events.13.a"
		name = rhodesia_events.13.a
		ai_chance = { base = 30 }
		trigger = {
			NOT = { has_country_flag = ZIM_can_elect_united }
		}
		if = {
			limit = { market_liberal < 0.3 }
			add_popularity = { ideology = market_liberal popularity = 0.2 }
		}
		else = {
			add_popularity = { ideology = market_liberal popularity = 0.05 }
		}
		set_politics = {
			ruling_party = market_liberal
			elections_allowed = yes
		}
	}

	option = { #Reform Party
		log = "[GetLogInfo]: event rhodesia_events.13 option rhodesia_events.13.b"
		name = rhodesia_events.13.b
		ai_chance = { base = 50 }
		trigger = {
			NOT = { has_country_flag = ZIM_can_elect_united }
		}
		if = {
			limit = { social_liberal < 0.3 }
			add_popularity = { ideology = social_liberal popularity = 0.2 }
		}
		else = {
			add_popularity = { ideology = social_liberal popularity = 0.05 }
		}
		set_politics = {
			ruling_party = social_liberal
			elections_allowed = yes
		}
	}

	option = { #United Party
		log = "[GetLogInfo]: event rhodesia_events.13 option rhodesia_events.13.c"
		name = rhodesia_events.13.c
		ai_chance = { base = 50 }
		trigger = {
			has_country_flag = ZIM_can_elect_united
		}
		if = {
			limit = { authoritarian_democrat < 0.3 }
			add_popularity = { ideology = authoritarian_democrat popularity = 0.2 }
		}
		else = {
			add_popularity = { ideology = authoritarian_democrat popularity = 0.05 }
		}
		set_politics = {
			ruling_party = authoritarian_democrat
			elections_allowed = yes
		}
	}

	option = { #Labour Party
		log = "[GetLogInfo]: event rhodesia_events.13 option rhodesia_events.13.e"
		name = rhodesia_events.13.e
		ai_chance = { base = 50 }
		trigger = {
			has_country_flag = ZIM_can_elect_united
		}
		if = {
			limit = { social_democrat < 0.3 }
			add_popularity = { ideology = social_democrat popularity = 0.2 }
		}
		else = {
			add_popularity = { ideology = social_democrat popularity = 0.05 }
		}
		set_politics = {
			ruling_party = social_democrat
			elections_allowed = yes
		}
	}
}

# Huggins steps down as leader of the Reform Party after defeat
country_event = {
	id = rhodesia_events.12
	title = rhodesia_events.12.t
	desc = rhodesia_events.12.d
	picture = GFX_report_event_SAF_parliament_1

	is_triggered_only = yes

	option = { #Interesting
		log = "[GetLogInfo]: event rhodesia_events.12 option rhodesia_events.12.a"
		name = rhodesia_events.12.a
		custom_effect_tooltip = ZIM_tt_thomas_nangle_now_leader_of_opposition
		add_political_power = 25
	}
}

country_event = { #RRWU/Salisbury MA
	id = rhodesia_events.45
	title = rhodesia_events.45.t
	desc = rhodesia_events.45.d
	#picture = GFX_report_event_SAF_cape_town

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event rhodesia_events.45 option rhodesia_events.45.a"
		name = rhodesia_events.45.a
	}
}
